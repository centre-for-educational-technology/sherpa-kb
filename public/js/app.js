(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"/z1Y":function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".badge[data-v-7aa41ab6]:not(:last-child){margin-right:5px}",""])},0:function(t,e,n){n("bUC5"),t.exports=n("pyCd")},"3vls":function(t,e,n){"use strict";var r=n("L2JU");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a={computed:a(a({},Object(r.b)({totalLanguages:"app/totalLanguages"})),Object(r.c)({languages:function(t){return t.app.languages}})),methods:{languagesPopoverData:function(t){return{title:"Translated to languages",content:this.languages.filter((function(e){return t.descriptions.hasOwnProperty(e.code)})).map((function(t){return t.name})).join(", ")}},languagesButtonVariant:function(t){return Object.keys(t.descriptions).length>=this.totalLanguages?"outline-success":"outline-secondary"},formatDate:function(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),".").concat((e.getMonth()+1).toString().padStart(2,"0"),".").concat(e.getFullYear())},descriptionInLanguageOrEnglish:function(t,e){return t.hasOwnProperty(e)?t[e]:t.en},shortenDescription:function(t,e){return e||(e=50),t.length>e?"".concat(t.substr(0,e),"..."):t}}}},"4sS4":function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".fade-enter-active[data-v-4ab0644c],.fade-leave-active[data-v-4ab0644c]{transition:opacity .5s}.fade-enter[data-v-4ab0644c],.fade-leave-to[data-v-4ab0644c]{opacity:0}",""])},"51mL":function(t,e,n){"use strict";n("sSy8")},"5SZc":function(t,e,n){"use strict";n("ePpQ")},"6QWR":function(t,e,n){"use strict";n.r(e);var r=n("L2JU"),s=n("PjCe"),a=n("APFM"),i=n("azh7"),o=n("dF+P");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d={props:["language"],mixins:[o.a],computed:l(l({},Object(r.c)({languages:function(t){return t.app.languages}})),{},{modalId:function(){return"answer-create"},isEnglish:function(){return"en"===this.language}}),data:function(){return{form:{answer:"",translation:"",state:{answer:null,translation:null}},isBusy:!1}},methods:{resetModal:function(){this.form.answer="",this.form.translation="",this.form.state={answer:null,translation:null}},canSave:function(){return this.isEnglish?this.form.state.answer:this.form.state.answer&&this.form.state.translation},handleSave:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;if(this.$refs.form.checkValidity()){this.isBusy=!0;var e={descriptions:[]};this.isEnglish||e.descriptions.push({code:"en",value:this.form.translation}),e.descriptions.push({code:this.language,value:this.form.answer}),axios.post("/answers",e).then((function(e){t.isBusy=!1,t.$store.dispatch("answers/insertAnswer",e.data),t.$nextTick((function(){t.$bvModal.hide(t.modalId)}))})).catch((function(e){t.isBusy=!1,console.error(e),t.displayHttpError(e)}))}},answerLabel:function(t){var e=this.languages.find((function(e){return e.code===t}));return"Answer in ".concat(e?e.name:t)},updateInputState:function(t,e){this.form.state[e]=t.length>0},updateAnswerState:function(t){this.updateInputState(t,"answer")},updateTranslationState:function(t){this.updateInputState(t,"translation")}}},f=n("KHd+"),p=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:t.modalId,title:"Add new answer","ok-title":"Create","ok-disabled":!t.canSave(),busy:t.isBusy},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleSave}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{id:"input-group-answer",label:t.answerLabel(t.language),"label-for":"input-answer","invalid-feedback":"Answer is required",state:t.form.state.answer}},[n("b-form-textarea",{attrs:{id:"input-answer",required:"",state:t.form.state.answer,rows:"2","max-rows":"6",trim:"",debounce:"250"},on:{update:t.updateAnswerState},model:{value:t.form.answer,callback:function(e){t.$set(t.form,"answer",e)},expression:"form.answer"}})],1),t._v(" "),t.isEnglish?t._e():n("b-form-group",{attrs:{id:"input-group-translation",label:t.answerLabel("en"),"label-for":"input-translation","invalid-feedback":"English translation is required",state:t.form.state.translation}},[n("b-form-textarea",{attrs:{id:"input-translation",required:"",state:t.form.state.translation,rows:"2","max-rows":"6",trim:"",debounce:"250"},on:{update:t.updateTranslationState},model:{value:t.form.translation,callback:function(e){t.$set(t.form,"translation",e)},expression:"form.translation"}})],1)],1)])}),[],!1,null,null,null).exports;function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b={props:["language"],components:{FormAnswer:n("xsCT").a},mixins:[o.a],computed:g(g(g({},Object(r.c)({topics:function(t){return t.questions.topics},languages:function(t){return t.app.languages}})),Object(r.b)({answers:"answers/forQuestion"})),{},{modalId:function(){return"question-create"},topicOptions:function(){var t=this.topics.map((function(t){return{value:t.id,text:t.description}}));return t.unshift({value:"",text:""}),t},answerOptions:function(){var t=this;return this.answers.map((function(e){return{value:e.id,text:e.descriptions.hasOwnProperty(t.language)?e.descriptions[t.language]:e.descriptions.en}}))},isEnglish:function(){return"en"===this.language}}),data:function(){return{form:{question:"",translation:"",topic:"",answer:"",state:{question:null,translation:null}},isBusy:!1}},methods:{resetModal:function(){this.form.question="",this.form.translation="",this.form.topic="",this.form.answer="",this.form.state.question=null,this.form.state.translation=null},canSave:function(){return this.isEnglish?this.form.state.question:this.form.state.question&&this.form.state.translation},handleSave:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;if(this.$refs.form.checkValidity()){this.isBusy=!0;var e={descriptions:[],status:this.form.status};this.isEnglish||e.descriptions.push({code:"en",value:this.form.translation}),e.descriptions.push({code:this.language,value:this.form.question}),this.form.topic&&(e.topic=this.form.topic),this.form.answer&&(e.answer=this.form.answer),axios.post("/questions",e).then((function(e){t.isBusy=!1,t.$store.dispatch("questions/insertQuestion",e.data),t.$nextTick((function(){t.$bvModal.hide(t.modalId)}))})).catch((function(e){t.isBusy=!1,console.error(e),t.displayHttpError(e)}))}},questionLabel:function(t){var e=this.languages.find((function(e){return e.code===t}));return"Question in ".concat(e?e.name:t)},updateInputState:function(t,e){this.form.state[t]=e.length>0}}},v=Object(f.a)(b,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:t.modalId,title:"Add new question","ok-title":"Create","ok-disabled":!t.canSave(),busy:t.isBusy},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleSave}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{id:"input-group-question",label:t.questionLabel(t.language),"label-for":"input-question","invalid-feedback":"Question is required",state:t.form.state.question}},[n("b-form-input",{attrs:{id:"input-question",type:"text",required:"",state:t.form.state.question,trim:"",debounce:"250"},on:{update:function(e){for(var n=arguments.length,r=Array(n);n--;)r[n]=arguments[n];return t.updateInputState.apply(void 0,["question"].concat(r))}},model:{value:t.form.question,callback:function(e){t.$set(t.form,"question",e)},expression:"form.question"}})],1),t._v(" "),t.isEnglish?t._e():n("b-form-group",{attrs:{id:"input-group-translation",label:t.questionLabel("en"),"label-for":"input-translation","invalid-feedback":"English translation is required",state:t.form.state.translation}},[n("b-form-input",{attrs:{id:"input-translation",type:"text",required:"",state:t.form.state.translation,trim:"",debounce:"250"},on:{update:function(e){for(var n=arguments.length,r=Array(n);n--;)r[n]=arguments[n];return t.updateInputState.apply(void 0,["translation"].concat(r))}},model:{value:t.form.translation,callback:function(e){t.$set(t.form,"translation",e)},expression:"form.translation"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-topic",label:"Category","label-for":"input-topic"}},[n("b-form-select",{attrs:{options:t.topicOptions,id:"input-topic"},model:{value:t.form.topic,callback:function(e){t.$set(t.form,"topic",e)},expression:"form.topic"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-answer",label:"Answer","label-for":"input-answer"}},[n("form-answer",{attrs:{options:t.answerOptions},model:{value:t.form.answer,callback:function(e){t.$set(t.form,"answer",e)},expression:"form.answer"}})],1)],1)])}),[],!1,null,null,null).exports,w=n("7O5W"),y=n("wHSu");function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){S(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}w.c.add(y.e);var _={props:["language","isBusy"],components:{QuestionsTable:s.a,PendingQuestionsTable:a.a,AnswersTable:i.a,AnswerCreate:p,QuestionCreate:v},data:function(){return{tabIndex:0}},computed:x(x({},Object(r.c)({questions:function(t){return t.questions.items},answers:function(t){return t.answers.items}})),{},{pendingQuestions:function(){return this.$store.getters["pendingQuestions/forLanguage"](this.language)},isEnglish:function(){return"en"===this.language}}),methods:{tabTitleBadgeVariant:function(t){return this.tabIndex===t?"light":"secondary"}},created:function(){this.$store.dispatch("questions/preloadAllQuestions"),this.$store.dispatch("pendingQuestions/preloadAllPendingQuestions"),this.$store.dispatch("answers/preloadAllAnswers")}},k=Object(f.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mt-4"},[n("b-tabs",{attrs:{"content-class":"mt-4","active-nav-item-class":"bg-primary text-white",fill:""},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[n("b-tab",{attrs:{lazy:""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n                Questions\n                "),t.isBusy?t._e():n("b-badge",{attrs:{variant:t.tabTitleBadgeVariant(0),pill:""}},[t._v("\n                    "+t._s(t.questions.length)+"\n                ")]),t._v(" "),t.isBusy?n("b-spinner",{attrs:{variant:t.tabTitleBadgeVariant(0),type:"grow",label:"Loading...",small:""}}):t._e()]},proxy:!0}])},[t._v(" "),n("question-create",{attrs:{language:t.language}}),t._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"question-create",expression:"'question-create'"},{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mb-4",attrs:{variant:"primary",title:"Add new question"}},[n("font-awesome-icon",{attrs:{icon:["fas","plus"]}})],1),t._v(" "),n("questions-table",{attrs:{items:t.questions,language:t.language,"is-busy":t.isBusy}})],1),t._v(" "),n("b-tab",{attrs:{lazy:""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n                Pending questions\n                "),t.isBusy?t._e():n("b-badge",{attrs:{variant:t.tabTitleBadgeVariant(1),pill:""}},[t._v("\n                    "+t._s(t.pendingQuestions.length)+"\n                ")]),t._v(" "),t.isBusy?n("b-spinner",{attrs:{variant:t.tabTitleBadgeVariant(1),type:"grow",label:"Loading...",small:""}}):t._e()]},proxy:!0}])},[t._v(" "),n("pending-questions-table",{attrs:{items:t.pendingQuestions,language:t.language,"is-busy":t.isBusy}})],1),t._v(" "),n("b-tab",{attrs:{lazy:""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n                Answers\n                "),t.isBusy?t._e():n("b-badge",{attrs:{variant:t.tabTitleBadgeVariant(2),pill:""}},[t._v("\n                    "+t._s(t.answers.length)+"\n                ")]),t._v(" "),t.isBusy?n("b-spinner",{attrs:{variant:t.tabTitleBadgeVariant(2),type:"grow",label:"Loading...",small:""}}):t._e()]},proxy:!0}])},[t._v(" "),n("answer-create",{attrs:{language:t.language}}),t._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"answer-create",expression:"'answer-create'"},{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mb-4",attrs:{variant:"primary",title:"Add new answer"}},[n("font-awesome-icon",{attrs:{icon:["fas","plus"]}})],1),t._v(" "),n("answers-table",{attrs:{items:t.answers,language:t.language,"is-busy":t.isBusy}})],1)],1)],1)}),[],!1,null,null,null);e.default=k.exports},"9Wh1":function(t,e,n){window._=n("LvDl");try{window.Popper=n("8L3F").default,window.$=window.jQuery=n("EVdn"),n("SYky")}catch(t){}window.axios=n("vDqi"),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",document.querySelector('meta[name="base-url"]')&&(window.axios.defaults.baseURL=document.querySelector('meta[name="base-url"]').content)},APFM:function(t,e,n){"use strict";var r=n("L2JU"),s=n("dF+P"),a={props:["pendingQuestion"],mixins:[s.a],computed:{modalId:function(){return"pending-question-edit"},questionState:function(){return(this.form.question&&this.form.question.length)>0},translationState:function(){return(this.form.translation&&this.form.translation.length)>0}},data:function(){return{form:{question:"",translation:"",group:null,propagate:!1},isBusy:!1}},methods:{getDescription:function(t){var e=Object.keys(t.descriptions);return 1===e.length&&"en"===e[0]?t.descriptions.en:"en"!==e[0]?t.descriptions[e[0]]:t.descriptions[e[1]]},getEnglishDescription:function(t){return t.descriptions.hasOwnProperty("en")?t.descriptions.en:""},resetModal:function(){this.form.question=this.getDescription(this.pendingQuestion),this.form.translation=this.getEnglishDescription(this.pendingQuestion),this.form.group=this.pendingQuestion.group,this.form.propagate=!1},canBePropagated:function(){return this.form.question&&this.form.translation&&this.form.question.trim()&&this.form.translation.trim()&&"pending"===this.pendingQuestion.status.value},isEnglishOnly:function(){var t=Object.keys(this.pendingQuestion.descriptions);return 1===t.length&&"en"===t[0]},canEdit:function(){return"pending"===this.pendingQuestion.status.value},canSave:function(){return this.canEdit()},handleSave:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;this.$refs.form.checkValidity()&&(this.isBusy=!0,axios.put("/pending_questions/"+this.pendingQuestion.id,{question:this.form.question,translation:this.form.translation,group:this.form.group,propagate:this.form.propagate}).then((function(e){t.isBusy=!1,t.$store.dispatch("pendingQuestions/updatePendingQuestion",e.data),t.$nextTick((function(){t.$bvModal.hide(t.modalId)}))})).catch((function(e){t.isBusy=!1,console.error(e),t.displayHttpError(e)})))}}},i=n("KHd+"),o=Object(i.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:t.modalId,title:"Edit pending question","ok-title":"Save","ok-disabled":!t.canSave(),busy:t.isBusy},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleSave}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{id:"input-group-question",label:"Question","label-for":"input-question","invalid-feedback":"Question is required",state:t.questionState}},[n("b-form-input",{attrs:{id:"input-question",type:"text",required:"",state:t.questionState,trim:"",disabled:!t.canEdit()},model:{value:t.form.question,callback:function(e){t.$set(t.form,"question",e)},expression:"form.question"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-translation",label:"English translation","label-for":"input-translation","invalid-feedback":"English translation is required",state:t.translationState,description:"Translation is not needed if suggestion was submitted in English."}},[n("b-form-input",{attrs:{id:"input-translation",type:"text",required:"",state:t.translationState,trim:"",disabled:!t.canEdit()||t.isEnglishOnly()},model:{value:t.form.translation,callback:function(e){t.$set(t.form,"translation",e)},expression:"form.translation"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-group",label:"Group number"}},[n("b-form-input",{attrs:{id:"input-group",type:"number",min:"0",disabled:!t.canEdit()},model:{value:t.form.group,callback:function(e){t.$set(t.form,"group",e)},expression:"form.group"}})],1),t._v(" "),n("b-form-group",{attrs:{description:"Changing status to Propagated will send the question for review by SELFIE master. This would also prevent you from making any changes to the question itself or English translation."}},[n("b-form-checkbox",{attrs:{name:"propagate",switch:"",disabled:!t.canBePropagated()},model:{value:t.form.propagate,callback:function(e){t.$set(t.form,"propagate",e)},expression:"form.propagate"}},[n("b",[t._v("Change status to propagated")])])],1)],1)])}),[],!1,null,null,null).exports;function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d={props:["pendingQuestion"],mixins:[s.a],computed:l(l({},Object(r.c)({states:function(t){return t.pendingQuestions.states}})),{},{modalId:function(){return"pending-question-review"},questionState:function(){return(this.form.question&&this.form.question.length)>0},translationState:function(){return(this.form.translation&&this.form.translation.length)>0}}),data:function(){return{form:{question:"",translation:"",group:null,status:""},isBusy:!1}},methods:{getDescription:function(t){var e=Object.keys(t.descriptions);return 1===e.length&&"en"===e[0]?t.descriptions.en:"en"!==e[0]?t.descriptions[e[0]]:t.descriptions[e[1]]},getEnglishDescription:function(t){return t.descriptions.hasOwnProperty("en")?t.descriptions.en:""},statusOptions:function(){var t=this;return this.states.map((function(e){return{value:e.value,text:e.text,disabled:-1===t.pendingQuestion.status.transitionable.indexOf(e.value)&&t.pendingQuestion.status.value!==e.value}}))},resetModal:function(){this.form.question=this.getDescription(this.pendingQuestion),this.form.translation=this.getEnglishDescription(this.pendingQuestion),this.form.group=this.pendingQuestion.group,this.form.status=this.pendingQuestion.status.value},isEnglishOnly:function(){var t=Object.keys(this.pendingQuestion.descriptions);return 1===t.length&&"en"===t[0]},canEdit:function(){return"propagated"===this.pendingQuestion.status.value},canSave:function(){return this.canEdit()},handleSave:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;this.$refs.form.checkValidity()&&(this.isBusy=!0,axios.put("/pending_questions/"+this.pendingQuestion.id,{question:this.form.question,translation:this.form.translation,group:this.form.group,status:this.form.status}).then((function(e){t.isBusy=!1,t.$store.dispatch("pendingQuestions/updatePendingQuestion",e.data),"completed"===e.data.status.value&&t.$store.dispatch("questions/loadAllQuestions"),t.$nextTick((function(){t.$bvModal.hide(t.modalId)}))})).catch((function(e){t.isBusy=!1,console.error(e),t.displayHttpError(e)})))}}},f=Object(i.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:t.modalId,title:"Review pending question","ok-title":"Save","ok-disabled":!t.canSave(),busy:t.isBusy},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleSave}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{id:"input-group-question",label:"Question","label-for":"input-question","invalid-feedback":"Question is required",state:t.questionState}},[n("b-form-input",{attrs:{id:"input-question",type:"text",required:"",state:t.questionState,trim:"",disabled:!t.canEdit()},model:{value:t.form.question,callback:function(e){t.$set(t.form,"question",e)},expression:"form.question"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-translation",label:"English translation","label-for":"input-translation","invalid-feedback":"English translation is required",state:t.translationState,description:"Translation is not needed if suggestion was submitted in English."}},[n("b-form-input",{attrs:{id:"input-translation",type:"text",required:"",state:t.translationState,trim:"",disabled:!t.canEdit()||t.isEnglishOnly()},model:{value:t.form.translation,callback:function(e){t.$set(t.form,"translation",e)},expression:"form.translation"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-group",label:"Group number"}},[n("b-form-input",{attrs:{id:"input-group",type:"number",min:"0",disabled:!t.canEdit()},model:{value:t.form.group,callback:function(e){t.$set(t.form,"group",e)},expression:"form.group"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-status",label:"Status","label-for":"input-status",description:"Completed and Canceled are final states, former of those will create a new question as a result. Pending will send the pending question back to language experts."}},[n("b-form-select",{attrs:{options:t.statusOptions(),id:"input-status",disabled:!t.canEdit()},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)],1)])}),[],!1,null,null,null).exports,p=n("qSOY"),m=n("3vls"),g=n("ZVlY");function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w={props:["items","language","isBusy"],mixins:[m.a,g.a],components:{PendingQuestionEdit:o,PendingQuestionReview:f,TableSearchDescriptions:p.a},computed:b(b({},Object(r.c)({perPage:function(t){return t.app.itemsPerPage}})),{},{modalId:function(){return"pending-question-"+(this.language?"edit":"review")}}),data:function(){return{currentPage:1,sortBy:"id",sortDesc:!0,fields:[{key:"id",label:"ID",sortable:!0,tdClass:["align-middle","text-center"]},{key:"question",sortable:!1,tdClass:["align-middle","text-center"]},{key:"english_translation",sortable:!1,tdClass:["align-middle","text-center"]},{key:"group",sortable:!1,tdClass:["align-middle","text-center"]},{key:"date",sortable:!1,tdClass:["align-middle","text-center"]},{key:"status",sortable:!1,tdClass:function(t,e,n){var r=["align-middle","text-center"];switch(t.value){case"pending":r.push("table-warning");break;case"completed":r.push("table-success");break;case"canceled":r.push("table-danger")}return r}}],pendingQuestion:null}},methods:{getDescription:function(t){var e=Object.keys(t.descriptions);return 1===e.length&&"en"===e[0]?t.descriptions.en:"en"!==e[0]?t.descriptions[e[0]]:t.descriptions[e[1]]},hasEnglishDescription:function(t){return t.descriptions.hasOwnProperty("en")},getEnglishDescription:function(t){return this.hasEnglishDescription(t)?t.descriptions.en:null},englishTranslationOrPlaceholderText:function(t){return t&&t.trim()?t:"Add English translation"},onOpenModal:function(t){var e=this;this.pendingQuestion=t,this.$nextTick((function(){e.$bvModal.show(e.modalId)}))}},created:function(){this.$store.dispatch("pendingQuestions/preloadStates")}},y=Object(i.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.language&&t.pendingQuestion?n("pending-question-edit",{attrs:{"pending-question":t.pendingQuestion}}):t._e(),t._v(" "),!t.language&&t.pendingQuestion?n("pending-question-review",{attrs:{"pending-question":t.pendingQuestion}}):t._e(),t._v(" "),n("h3",[t._v("Pending questions")]),t._v(" "),n("table-search-descriptions"),t._v(" "),n("b-table",{attrs:{striped:"",hover:"",fields:t.fields,items:t.filteredItems,"primary-key":"id","thead-class":"text-center","per-page":t.perPage,"current-page":t.currentPage,stacked:"lg","sort-by":t.sortBy,"sort-desc":t.sortDesc,busy:t.isBusy},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"cell(id)",fn:function(e){return[t._v("\n            "+t._s(e.value)+"\n        ")]}},{key:"cell(question)",fn:function(e){return[n("b-button",{attrs:{variant:"link"},on:{click:function(n){return t.onOpenModal(e.item)}}},[t._v("\n                "+t._s(t.getDescription(e.item))+"\n            ")])]}},{key:"cell(english_translation)",fn:function(e){return[n("b-button",{class:{"text-secondary":!t.hasEnglishDescription(e.item)},attrs:{variant:"link"},on:{click:function(n){return t.onOpenModal(e.item)}}},[t._v("\n                "+t._s(t.englishTranslationOrPlaceholderText(t.getEnglishDescription(e.item)))+"\n            ")])]}},{key:"cell(group)",fn:function(e){return[t._v("\n            "+t._s(e.value)+"\n        ")]}},{key:"cell(date)",fn:function(e){return[t._v("\n            "+t._s(t.formatDate(e.value))+"\n        ")]}},{key:"cell(status)",fn:function(e){return[t._v("\n            "+t._s(e.item.status.status)+"\n        ")]}}])}),t._v(" "),t.totalRows>t.perPage?n("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"center"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)}),[],!1,null,null,null);e.a=y.exports},EX7P:function(t,e,n){var r=n("4sS4");"string"==typeof r&&(r=[[t.i,r,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(r,s);r.locals&&(t.exports=r.locals)},HHId:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".popover-preserve-new-lines .popover-body{white-space:pre-wrap}",""])},HS2t:function(t,e,n){"use strict";n.r(e);var r=n("L2JU"),s=n("dF+P"),a={props:["languageOptions","roleOptions"],mixins:[s.a],computed:{modalId:function(){return"user-create"},nameState:function(){return-1===this.form.dirty.indexOf("name")?null:(this.form.name&&this.form.name.length)>0},emailState:function(){return-1===this.form.dirty.indexOf("email")?null:(this.form.email&&this.form.email.length)>0},passwordState:function(){return-1===this.form.dirty.indexOf("password")?null:!!(this.form.password&&this.form.password.length>=8)},confirmationState:function(){return-1===this.form.dirty.indexOf("confirmation")?null:!!(this.form.confirmation&&this.form.confirmation.length>=8&&this.form.password===this.form.confirmation)}},data:function(){return{form:{dirty:[],name:"",email:"",password:"",confirmation:"",language:null,roles:[]},isBusy:!1}},methods:{resetModal:function(){this.form.dirty=[],this.form.name="",this.form.email="",this.form.password="",this.form.confirmation="",this.form.language=this.languageOptions[0].value,this.form.roles=[]},canEdit:function(){return!0},canSave:function(){return this.canEdit()&&this.nameState&&this.emailState&&this.passwordState&&this.confirmationState},handleSave:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;this.$refs.form.checkValidity()&&(this.isBusy=!0,axios.post("/users",{name:this.form.name,email:this.form.email,password:this.form.password,password_confirmation:this.form.confirmation,language:this.form.language,roles:this.form.roles}).then((function(e){t.isBusy=!1,t.$root.$emit("userCreated",e.data.data),t.$nextTick((function(){t.$bvModal.hide(t.modalId)}))})).catch((function(e){t.isBusy=!1,console.error(e),t.displayHttpError(e)})))},setDirty:function(t){-1===this.form.dirty.indexOf(t)&&this.form.dirty.push(t)}}},i=n("KHd+"),o=Object(i.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:t.modalId,title:"Create user","ok-title":"Create","ok-disabled":!t.canSave(),busy:t.isBusy},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleSave}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{id:"input-group-name",label:"Name","label-for":"input-name","invalid-feedback":"Name is required",state:t.nameState}},[n("b-form-input",{attrs:{id:"input-name",type:"text",required:"",state:t.nameState,trim:"",disabled:!t.canEdit(),debounce:"250"},on:{update:function(e){return t.setDirty("name")}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-email",label:"Email","label-for":"input-emai","invalid-feedback":"Email is required",state:t.emailState}},[n("b-form-input",{attrs:{id:"input-email",type:"email",required:"",state:t.emailState,trim:"",disabled:!t.canEdit(),debounce:"250"},on:{update:function(e){return t.setDirty("email")}},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-password",label:"Password","label-for":"input-password","invalid-feedback":"Password is required. Length should be at least 8 characters.",state:t.passwordState}},[n("b-form-input",{attrs:{id:"input-password",type:"password",trim:"",required:"",state:t.passwordState,disabled:!t.canEdit(),debounce:"250"},on:{update:function(e){return t.setDirty("password")}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-confirmation",label:"Password confirmation","label-for":"input-confirmation","invalid-feedback":"Confirmation is required. Length should be at least 8 characters. Password and confirmation should match.",state:t.confirmationState}},[n("b-form-input",{attrs:{id:"input-confirmation",type:"password",trim:"",required:"",state:t.confirmationState,disabled:!t.canEdit(),debounce:"250"},on:{update:function(e){return t.setDirty("confirmation")}},model:{value:t.form.confirmation,callback:function(e){t.$set(t.form,"confirmation",e)},expression:"form.confirmation"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-language",label:"Language","label-for":"input-language"}},[n("b-form-select",{attrs:{options:t.languageOptions,id:"input-language"},model:{value:t.form.language,callback:function(e){t.$set(t.form,"language",e)},expression:"form.language"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-roles",label:"Roles","label-for":"input-roles"}},[n("b-form-select",{attrs:{id:"input-roles",options:t.roleOptions,multiple:""},model:{value:t.form.roles,callback:function(e){t.$set(t.form,"roles",e)},expression:"form.roles"}})],1)],1)])}),[],!1,null,null,null).exports,u={props:["user","languageOptions","roleOptions"],mixins:[s.a],computed:{modalId:function(){return"user-edit"},nameState:function(){return(this.form.name&&this.form.name.length)>0},emailState:function(){return(this.form.email&&this.form.email.length)>0},passwordState:function(){return""===this.form.password?null:!!(this.form.password&&this.form.password.length>=8)},confirmationState:function(){return""===this.form.confirmation?null:!!(this.form.confirmation&&this.form.confirmation.length>=8&&this.form.password===this.form.confirmation)}},data:function(){return{form:{name:"",email:"",password:"",confirmation:"",language:null,roles:[]},isBusy:!1}},methods:{resetModal:function(){this.form.name=this.user.name,this.form.email=this.user.email,this.form.password="",this.form.confirmation="",this.form.language=this.user.language,this.form.roles=this.user.roles.map((function(t){return t.id}))},canEdit:function(){return!0},canSave:function(){return this.canEdit()&&this.nameState&&this.emailState&&(this.passwordState||null===this.passwordState)&&(this.confirmationState||null===this.confirmationState)},handleSave:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;if(this.$refs.form.checkValidity()){this.isBusy=!0;var e={name:this.form.name,language:this.form.language,roles:this.form.roles};this.user.email!==this.form.email&&(e.email=this.form.email),this.form.password&&this.form.confirmation&&(e.password=this.form.password,e.password_confirmation=this.form.confirmation),axios.put("/users/"+this.user.id,e).then((function(e){t.isBusy=!1,t.$root.$emit("userUpdated",e.data.data),t.$nextTick((function(){t.$bvModal.hide(t.modalId)}))})).catch((function(e){t.isBusy=!1,console.error(e),t.displayHttpError(e)}))}}}},l=Object(i.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:t.modalId,title:"Edit user","ok-title":"Save","ok-disabled":!t.canSave(),busy:t.isBusy},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleSave}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{id:"input-group-name",label:"Name","label-for":"input-name","invalid-feedback":"Name is required",state:t.nameState}},[n("b-form-input",{attrs:{id:"input-name",type:"text",required:"",state:t.nameState,trim:"",disabled:!t.canEdit()},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-email",label:"Email","label-for":"input-emai","invalid-feedback":"Email is required",state:t.emailState}},[n("b-form-input",{attrs:{id:"input-email",type:"email",required:"",state:t.emailState,trim:"",disabled:!t.canEdit()},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-password",label:"Password","label-for":"input-password","invalid-feedback":"Length should be at least 8 characters.",state:t.passwordState}},[n("b-form-input",{attrs:{id:"input-password",type:"password",trim:"",disabled:!t.canEdit(),state:t.passwordState},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-confirmation",label:"Password confirmation","label-for":"input-confirmation","invalid-feedback":"Length should be at least 8 characters. Password and confirmation should match.",state:t.confirmationState}},[n("b-form-input",{attrs:{id:"input-confirmation",type:"password",trim:"",disabled:!t.canEdit(),state:t.confirmationState},model:{value:t.form.confirmation,callback:function(e){t.$set(t.form,"confirmation",e)},expression:"form.confirmation"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-language",label:"Language","label-for":"input-language"}},[n("b-form-select",{attrs:{options:t.languageOptions,id:"input-language"},model:{value:t.form.language,callback:function(e){t.$set(t.form,"language",e)},expression:"form.language"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-roles",label:"Roles","label-for":"input-roles"}},[n("b-form-select",{attrs:{id:"input-roles",options:t.roleOptions,multiple:""},model:{value:t.form.roles,callback:function(e){t.$set(t.form,"roles",e)},expression:"form.roles"}})],1)],1)])}),[],!1,null,null,null).exports,c=n("7O5W"),d=n("wHSu");function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}c.c.add(d.i),c.c.add(d.j),c.c.add(d.l),c.c.add(d.k);var g={components:{UserCreate:o,UserEdit:l},mixins:[s.a],computed:p(p({},Object(r.c)({perPage:function(t){return t.app.itemsPerPage},currentUser:function(t){return t.app.user},languages:function(t){return t.app.languages}})),{},{totalRows:function(){return this.items.length},fields:function(){return[{key:"id",label:"ID",sortable:!0,tdClass:["align-middle","text-center"]},{key:"name",sortable:!1,tdClass:["align-middle","text-center"]},{key:"email",sortable:!1,tdClass:["align-middle","text-center"]},{key:"email_verified_at",label:"Verified",sortable:!1,tdClass:["align-middle","text-center"]},{key:"created_at",sortable:!1,tdClass:["align-middle","text-center"]},{key:"language",sortable:!1,tdClass:["align-middle","text-center"]},{key:"roles",sortable:!1,tdClass:["align-middle","text-center"]},{key:"actions",label:"",sortable:!1,tdClass:["align-middle","text-center"]}]},roleOptions:function(){var t=this;return this.roles.map((function(e){return{value:e.id,text:t.capitalize(e.name)}}))},languageOptions:function(){return this.languages.map((function(t){return{value:t.id,text:t.name}}))}}),data:function(){return{currentPage:1,sortBy:"id",sortDesc:!0,items:[],isBusy:!0,user:null,roles:[]}},methods:{formatDate:function(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),".").concat((e.getMonth()+1).toString().padStart(2,"0"),".").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))},formatMailto:function(t){return"mailto:".concat(t)},onEditUser:function(t){var e=this;this.user=t,this.$nextTick((function(){e.$bvModal.show("user-edit")}))},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},onDeleteUser:function(t){var e=this;this.$bvModal.msgBoxConfirm("Please confirm that you really want to delete user ".concat(t.name,"."),{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(n){n&&(e.isBusy=!0,axios.delete("/users/".concat(t.id)).then((function(n){e.isBusy=!1;var r=e.items.findIndex((function(e){return e.id===t.id}));-1!==r&&e.items.splice(r,1)})).catch((function(t){e.isBusy=!1,console.error("User delete:",t),e.displayHttpError(t)})))})).catch((function(t){console.log("User delete confirmation error:",t)}))},formatLanguage:function(t){var e=this.languages.find((function(e){return e.id===t}));return e?e.name:t}},created:function(){var t=this;axios.get("/users").then((function(e){t.isBusy=!1,t.items=e.data.data})).catch((function(e){t.isBusy=!1,console.error("Users loading:",e)})),axios.get("/users/roles").then((function(e){t.isBusy=!1,t.roles=e.data.data})).catch((function(e){t.isBusy=!1,console.error("Roles loading:",e)})),this.$root.$on("userCreated",(function(e){t.items.push(e)})),this.$root.$on("userUpdated",(function(e){var n=t.items.findIndex((function(t){return t.id===e.id}));-1!==n?Vue.set(t.items,n,e):console.warn("Index not found, could not update a user:",e)}))}},h=(n("5SZc"),Object(i.a)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("user-create",{attrs:{"language-options":t.languageOptions,"role-options":t.roleOptions}}),t._v(" "),t.user?n("user-edit",{attrs:{user:t.user,"language-options":t.languageOptions,"role-options":t.roleOptions}}):t._e(),t._v(" "),n("h3",[t._v("Users")]),t._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"user-create",expression:"'user-create'"},{name:"b-tooltip",rawName:"v-b-tooltip.right",value:"Add new user",expression:"'Add new user'",modifiers:{right:!0}}],staticClass:"my-4",attrs:{variant:"primary"}},[n("font-awesome-icon",{attrs:{icon:["fas","user-plus"],size:"lg"}})],1),t._v(" "),n("b-table",{attrs:{striped:"",hover:"",fields:t.fields,items:t.items,"primary-key":"id","thead-class":"text-center",stacked:"lg","per-page":t.perPage,"current-page":t.currentPage,"sort-by":t.sortBy,"sort-desc":t.sortDesc,busy:t.isBusy},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"cell(id)",fn:function(e){return[t._v("\n            "+t._s(e.value)+"\n        ")]}},{key:"cell(name)",fn:function(e){return[t._v("\n            "+t._s(e.value)+"\n        ")]}},{key:"cell(email)",fn:function(e){return[n("a",{attrs:{href:t.formatMailto(e.value)}},[t._v("\n                "+t._s(e.value)+"\n            ")])]}},{key:"cell(email_verified_at)",fn:function(e){return[e.value?n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{pill:"",variant:"outline-success",title:t.formatDate(e.value)}},[n("font-awesome-icon",{attrs:{icon:["fas","user-check"],size:"lg"}})],1):t._e(),t._v(" "),e.value?t._e():n("b-button",{attrs:{pill:"",variant:"outline-secondary",disabled:""}},[n("font-awesome-icon",{attrs:{icon:["fas","user-check"],size:"lg"}})],1)]}},{key:"cell(created_at)",fn:function(e){return[t._v("\n            "+t._s(t.formatDate(e.value))+"\n        ")]}},{key:"cell(language)",fn:function(e){return[t._v("\n            "+t._s(t.formatLanguage(e.value))+"\n        ")]}},{key:"cell(roles)",fn:function(e){return t._l(e.value,(function(e){return n("b-badge",{key:e.id,attrs:{pill:""}},[t._v(t._s(t.capitalize(e.name)))])}))}},{key:"cell(actions)",fn:function(e){return[n("b-button-group",[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{variant:"success",title:"Edit user"},on:{click:function(n){return t.onEditUser(e.item)}}},[n("font-awesome-icon",{attrs:{icon:["fas","user-edit"],size:"lg"}})],1),t._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{variant:"danger",title:"Delete user",disabled:e.item.id===t.currentUser.id},on:{click:function(n){return t.onDeleteUser(e.item)}}},[n("font-awesome-icon",{attrs:{icon:["fas","user-minus"],size:"lg"}})],1)],1)]}}])}),t._v(" "),t.totalRows>t.perPage?n("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"center"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)}),[],!1,null,"7aa41ab6",null));e.default=h.exports},Jpow:function(t,e,n){"use strict";n("EX7P")},PjCe:function(t,e,n){"use strict";var r=n("L2JU"),s=n("dF+P"),a=n("xsCT");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l={props:["question","language"],mixins:[s.a],components:{FormAnswer:a.a},computed:o(o(o({},Object(r.c)({states:function(t){return t.questions.states},topics:function(t){return t.questions.topics},languages:function(t){return t.app.languages}})),Object(r.b)({answers:"answers/forQuestion"})),{},{modalId:function(){return"question-edit"},questionState:function(){return(this.form.question&&this.form.question.length)>0},translationState:function(){return(this.form.translation&&this.form.translation.length)>0},topicOptions:function(){var t=this.topics.map((function(t){return{value:t.id,text:t.description}}));return t.unshift({value:"",text:""}),t},statusOptions:function(){var t=this;return this.states.filter((function(t){return"published"!==t.value})).map((function(e){return{value:e.value,text:e.text,disabled:-1===t.question.status.transitionable.indexOf(e.value)&&t.question.status.value!==e.value}}))},answerOptions:function(){var t=this;return this.answers.map((function(e){return{value:e.id,text:e.descriptions.hasOwnProperty(t.language)?e.descriptions[t.language]:e.descriptions.en}}))},isEnglish:function(){return"en"===this.language}}),data:function(){return{form:{question:"",translation:"",topic:"",answer:"",translated:!1},isBusy:!1}},methods:{getDescription:function(t){return t.descriptions[this.language]},getEnglishDescription:function(t){return t.descriptions.hasOwnProperty("en")?t.descriptions.en:""},resetModal:function(){this.form.question=this.getDescription(this.question),this.form.translation=this.getEnglishDescription(this.question),this.form.topic=this.question.topic?this.question.topic.id:"",this.form.answer=this.question.answer?this.question.answer:"",this.form.translated=!1},canEdit:function(){return"in_translation"===this.question.status.value||"translated"===this.question.status.value},canSave:function(){return this.canEdit()&&(this.isEnglish?this.form.question:this.form.question&&this.form.translation)},canChangeStatus:function(){return"in_translation"===this.question.status.value&&this.questionState&&this.translationState},handleSave:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;if(this.$refs.form.checkValidity()){this.isBusy=!0;var e={descriptions:[]};this.isEnglish||e.descriptions.push({code:"en",value:this.form.translation}),e.descriptions.push({code:this.language,value:this.form.question}),this.form.topic&&(e.topic=this.form.topic),this.form.answer&&(e.answer=this.form.answer),this.form.translated&&(e.status="translated"),axios.put("/questions/".concat(this.question.id),e).then((function(e){t.isBusy=!1,t.$store.dispatch("questions/updateQuestion",e.data),t.$nextTick((function(){t.$bvModal.hide(t.modalId)}))})).catch((function(e){t.isBusy=!1,console.error(e),t.displayHttpError(e)}))}},questionLabel:function(t){var e=this.languages.find((function(e){return e.code===t}));return"Question in ".concat(e?e.name:t)}}},c=n("KHd+"),d=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:t.modalId,title:"Edit question","ok-title":"Save","ok-disabled":!t.canSave(),busy:t.isBusy},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleSave}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{id:"input-group-question",label:t.questionLabel(t.language),"label-for":"input-question","invalid-feedback":"Question is required",state:t.questionState}},[n("b-form-input",{attrs:{id:"input-question",type:"text",required:"",state:t.questionState,trim:"",disabled:!t.canEdit()},model:{value:t.form.question,callback:function(e){t.$set(t.form,"question",e)},expression:"form.question"}})],1),t._v(" "),t.isEnglish?t._e():n("b-form-group",{attrs:{id:"input-group-translation",label:t.questionLabel("en"),"label-for":"input-translation","invalid-feedback":"English translation is required",state:t.translationState}},[n("b-form-input",{attrs:{id:"input-translation",type:"text",required:"",state:t.translationState,trim:"",disabled:!t.canEdit()},model:{value:t.form.translation,callback:function(e){t.$set(t.form,"translation",e)},expression:"form.translation"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-topic",label:"Category","label-for":"input-topic"}},[n("b-form-select",{attrs:{options:t.topicOptions,id:"input-topic",disabled:!t.canEdit()},model:{value:t.form.topic,callback:function(e){t.$set(t.form,"topic",e)},expression:"form.topic"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-answer",label:"Answer","label-for":"input-answer"}},[n("form-answer",{attrs:{options:t.answerOptions,disabled:!t.canEdit()},model:{value:t.form.answer,callback:function(e){t.$set(t.form,"answer",e)},expression:"form.answer"}})],1),t._v(" "),n("b-form-group",{attrs:{description:"Changing status to Translated will send the question for review by SELFIE master. You and other Language Experts would still be able to make changes as needed."}},[n("b-form-checkbox",{attrs:{name:"translated",switch:"",disabled:!t.canChangeStatus()},model:{value:t.form.translated,callback:function(e){t.$set(t.form,"translated",e)},expression:"form.translated"}},[n("b",[t._v("Change status to translated")])])],1)],1)])}),[],!1,null,null,null).exports;function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g={props:["question"],mixins:[s.a],components:{FormAnswer:a.a},computed:p(p(p({},Object(r.c)({states:function(t){return t.questions.states},topics:function(t){return t.questions.topics},languages:function(t){return t.app.languages}})),Object(r.b)({answers:"answers/forQuestion"})),{},{modalId:function(){return"question-review"},topicOptions:function(){var t=this.topics.map((function(t){return{value:t.id,text:t.description}}));return t.unshift({value:"",text:""}),t},statusOptions:function(){var t=this;return this.states.filter((function(t){return"in_translation"!==t.value})).map((function(e){return{value:e.value,text:e.text,disabled:-1===t.question.status.transitionable.indexOf(e.value)&&t.question.status.value!==e.value}}))},answerOptions:function(){var t=this;return this.answers.map((function(e){return{value:e.id,text:e.descriptions.hasOwnProperty(t.language)?e.descriptions[t.language]:e.descriptions.en}}))}}),data:function(){return{form:{question:{},topic:"",status:"",answer:"",state:{}},isBusy:!1}},methods:{resetModal:function(){var t=this,e={},n={};Object.values(this.languages).forEach((function(r){var s=r.code;e[s]=t.question.descriptions.hasOwnProperty(s)?t.question.descriptions[s]:"",n[s]=!!e[s]||null})),this.form.question=e,this.form.state=n,this.form.status=this.question.status.value,this.form.topic=this.question.topic?this.question.topic.id:"",this.form.status=this.question.status.value,this.form.answer=this.question.answer?this.question.answer:""},canEdit:function(){return!0},canSave:function(){return this.canEdit()&&Object.values(this.form.state).every((function(t){return!0===t}))},handleSave:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;if(this.$refs.form.checkValidity()){this.isBusy=!0;var e={descriptions:[],status:this.form.status};e.descriptions=Object.entries(this.form.question).map((function(t){return{code:t[0],value:t[1]}})),this.form.topic&&(e.topic=this.form.topic),this.form.answer&&(e.answer=this.form.answer),axios.put("/questions/".concat(this.question.id),e).then((function(e){t.isBusy=!1,t.$store.dispatch("questions/updateQuestion",e.data),t.$nextTick((function(){t.$bvModal.hide(t.modalId)}))})).catch((function(e){t.isBusy=!1,console.error(e),t.displayHttpError(e)}))}},formGroupId:function(t){return"input-group-question-".concat(t.code)},formGroupLabel:function(t){return"Question in ".concat(t.name)},formInputId:function(t){return"input-question-".concat(t.code)},updateInputState:function(t,e){this.form.state[t]=e.length>0}}},h=Object(c.a)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:t.modalId,title:"Review question","ok-title":"Save","ok-disabled":!t.canSave(),busy:t.isBusy},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleSave}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[t._l(t.languages,(function(e){return n("b-form-group",{key:e.code,attrs:{id:t.formGroupId(e),label:t.formGroupLabel(e),"label-for":t.formInputId(e),"invalid-feedback":"Question text is required",state:t.form.state[e.code]}},[n("b-form-input",{attrs:{id:t.formInputId(e),type:"text",required:"",state:t.form.state[e.code],trim:"",debounce:"250",disabled:!t.canEdit()},on:{update:function(n){for(var r=arguments.length,s=Array(r);r--;)s[r]=arguments[r];return t.updateInputState.apply(void 0,[e.code].concat(s))}},model:{value:t.form.question[e.code],callback:function(n){t.$set(t.form.question,e.code,n)},expression:"form.question[language.code]"}})],1)})),t._v(" "),n("b-form-group",{attrs:{id:"input-group-topic",label:"Category","label-for":"input-topic"}},[n("b-form-select",{attrs:{options:t.topicOptions,id:"input-topic",disabled:!t.canEdit()},model:{value:t.form.topic,callback:function(e){t.$set(t.form,"topic",e)},expression:"form.topic"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-status",label:"Status","label-for":"input-status"}},[n("b-form-select",{attrs:{options:t.statusOptions,id:"input-status",disabled:!t.canEdit()},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-answer",label:"Answer","label-for":"input-answer"}},[n("form-answer",{attrs:{options:t.answerOptions,disabled:!t.canEdit()},model:{value:t.form.answer,callback:function(e){t.$set(t.form,"answer",e)},expression:"form.answer"}})],1)],2)])}),[],!1,null,null,null).exports,b=n("QnqO"),v=n("tx6q"),w=n("qSOY"),y=n("3vls"),O=n("ZVlY"),x=n("7O5W"),S=n("wHSu");function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){P(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function P(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}x.c.add(S.d),x.c.add(S.b);var q={props:["items","language","isBusy"],mixins:[y.a,O.a],components:{QuestionEdit:d,QuestionReview:h,AnswerEdit:b.a,AnswerReview:v.a,TableSearchDescriptions:w.a},computed:k(k(k({},Object(r.c)({perPage:function(t){return t.app.itemsPerPage}})),Object(r.b)({answers:"answers/forQuestion"})),{},{fields:function(){var t=[{key:"id",label:"ID",sortable:!0,tdClass:["align-middle","text-center"]},{key:"question",sortable:!1,tdClass:["align-middle","text-center"]},{key:"english_translation",sortable:!1,tdClass:["align-middle","text-center"]},{key:"category",sortable:!1,tdClass:["align-middle","text-center"]},{key:"answer",sortable:!1,tdClass:["align-middle","text-center"]},{key:"date",sortable:!1,tdClass:["align-middle","text-center"]},{key:"languages",sortable:!1,tdClass:["align-middle","text-center"]},{key:"status",sortable:!1,tdClass:function(t,e,n){var r=["align-middle","text-center"];switch(t.value){case"in_translation":r.push("table-warning");break;case"translated":r.push("table-info");break;case"published":r.push("table-success")}return r}}];return this.language?t:t.filter((function(t){return"question"!==t.key}))},modalId:function(){var t=this.language?"edit":"review";return"question-".concat(t)},answerModalId:function(){var t=this.language?"edit":"review";return"answer-".concat(t)}}),data:function(){return{currentPage:1,sortBy:"id",sortDesc:!0,question:null,answer:null}},methods:{descriptionsCount:function(t){return Object.keys(t.descriptions).length},hasDescription:function(t){return t.descriptions.hasOwnProperty(this.language)&&t.descriptions[this.language].trim()},descriptionOrPlaceholderText:function(t){return this.hasDescription(t)?t.descriptions[this.language]:"Add translation"},answerPopoverData:function(t){var e=this.answers.find((function(e){return e.id===t.answer})),n=this.language?this.language:"en";return{content:e?this.descriptionInLanguageOrEnglish(e.descriptions,n):"",customClass:"popover-preserve-new-lines"}},onOpenModal:function(t){var e=this;this.question=t,this.$nextTick((function(){e.$bvModal.show(e.modalId)}))},onOpenAnswerModal:function(t){var e=this,n=this.answers.find((function(e){return e.id===t.answer}));n&&(this.answer=n,this.$nextTick((function(){e.$bvModal.show(e.answerModalId)})))},answerDescriptionsCount:function(t){var e=this.answers.find((function(e){return e.id===t}));return e?this.descriptionsCount(e):0},answerLanguagesPopoverData:function(t){var e=this.answers.find((function(e){return e.id===t}));return e?this.languagesPopoverData(e):{}}},created:function(){this.$store.dispatch("questions/preloadStates"),this.$store.dispatch("questions/preloadTopics"),this.$store.dispatch("answers/preloadStates")}},j=(n("51mL"),Object(c.a)(q,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.language&&t.question?n("question-edit",{attrs:{question:t.question,language:t.language}}):t._e(),t._v(" "),!t.language&&t.question?n("question-review",{attrs:{question:t.question}}):t._e(),t._v(" "),t.language&&t.answer?n("answer-edit",{attrs:{answer:t.answer,language:t.language}}):t._e(),t._v(" "),!t.language&&t.answer?n("answer-review",{attrs:{answer:t.answer}}):t._e(),t._v(" "),n("h3",[t._v("Questions")]),t._v(" "),n("table-search-descriptions"),t._v(" "),n("b-table",{attrs:{striped:"",hover:"",fields:t.fields,items:t.filteredItems,"primary-key":"id","thead-class":"text-center",stacked:"lg","per-page":t.perPage,"current-page":t.currentPage,"sort-by":t.sortBy,"sort-desc":t.sortDesc,busy:t.isBusy},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"cell(id)",fn:function(e){return[t._v("\n            "+t._s(e.value)+"\n        ")]}},t.language?{key:"cell(question)",fn:function(e){return[n("b-button",{class:{"text-secondary":!t.hasDescription(e.item)},attrs:{variant:"link"},on:{click:function(n){return t.onOpenModal(e.item)}}},[t._v("\n                "+t._s(t.descriptionOrPlaceholderText(e.item))+"\n            ")])]}}:null,{key:"cell(english_translation)",fn:function(e){return[n("b-button",{attrs:{variant:"link"},on:{click:function(n){return t.onOpenModal(e.item)}}},[t._v("\n                "+t._s(e.item.descriptions.en)+"\n            ")])]}},{key:"cell(category)",fn:function(e){return[t._v("\n            "+t._s(e.item.topic?e.item.topic.description:null)+"\n        ")]}},{key:"cell(answer)",fn:function(e){return[e.item.answer?n("b-button-group",[n("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.click.blur.top",value:t.answerPopoverData(e.item),expression:"answerPopoverData(data.item)",modifiers:{hover:!0,click:!0,blur:!0,top:!0}}],attrs:{variant:"outline-secondary"}},[n("font-awesome-icon",{attrs:{icon:["fas","info-circle"]}})],1),t._v(" "),n("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.click.blur.top",value:t.answerLanguagesPopoverData(e.item.answer),expression:"answerLanguagesPopoverData(data.item.answer)",modifiers:{hover:!0,click:!0,blur:!0,top:!0}}],attrs:{variant:"outline-secondary"}},[t._v("\n                    "+t._s(t.answerDescriptionsCount(e.item.answer))+" / "+t._s(t.totalLanguages)+"\n                ")]),t._v(" "),n("b-button",{attrs:{variant:"outline-secondary"},on:{click:function(n){return t.onOpenAnswerModal(e.item)}}},[n("font-awesome-icon",{attrs:{icon:["fa","edit"]}})],1)],1):t._e()]}},{key:"cell(languages)",fn:function(e){return[n("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.click.blur.top",value:t.languagesPopoverData(e.item),expression:"languagesPopoverData(data.item)",modifiers:{hover:!0,click:!0,blur:!0,top:!0}}],attrs:{pill:"",variant:t.languagesButtonVariant(e.item)}},[t._v("\n                "+t._s(t.descriptionsCount(e.item))+" / "+t._s(t.totalLanguages)+"\n            ")])]}},{key:"cell(date)",fn:function(e){return[t._v("\n            "+t._s(t.formatDate(e.value))+"\n        ")]}},{key:"cell(status)",fn:function(e){return[t._v("\n            "+t._s(e.item.status.status)+"\n        ")]}}],null,!0)}),t._v(" "),t.totalRows>t.perPage?n("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"center"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)}),[],!1,null,null,null));e.a=j.exports},QnqO:function(t,e,n){"use strict";var r=n("L2JU");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o={props:["language","answer"],mixins:[n("dF+P").a],computed:a(a({},Object(r.c)({languages:function(t){return t.app.languages}})),{},{modalId:function(){return"answer-edit"},totalLanguages:function(){return this.$store.getters["app/totalLanguages"]},isEnglish:function(){return"en"===this.language}}),data:function(){return{form:{answer:"",translation:"",translated:!1,state:{answer:null,translation:null}},isBusy:!1}},methods:{resetModal:function(){this.form.answer=this.answer.descriptions.hasOwnProperty(this.language)?this.answer.descriptions[this.language]:"",this.form.translation=this.answer.descriptions.en,this.form.translated=!1,this.form.state={answer:this.form.answer.length>0,translation:this.form.translation.length>0}},canEdit:function(){return"in_translation"===this.answer.status.value||"translated"===this.answer.status.value},canSave:function(){return this.canEdit()&&(this.isEnglish?this.form.state.answer:this.form.state.answer&&this.form.state.translation)},canChangeStatus:function(){return"in_translation"===this.answer.status.value&&this.form.state.answer&&this.form.state.translation},handleSave:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;if(this.$refs.form.checkValidity()){this.isBusy=!0;var e={descriptions:[]};this.isEnglish||e.descriptions.push({code:"en",value:this.form.translation}),e.descriptions.push({code:this.language,value:this.form.answer}),this.form.translated&&(e.status="translated"),axios.put("/answers/".concat(this.answer.id),e).then((function(e){t.isBusy=!1,t.$store.dispatch("answers/updateAnswer",e.data),t.$nextTick((function(){t.$bvModal.hide(t.modalId)}))})).catch((function(e){t.isBusy=!1,console.error(e),t.displayHttpError(e)}))}},answerLabel:function(t){var e=this.languages.find((function(e){return e.code===t}));return"Answer in ".concat(e?e.name:t)},updateInputState:function(t,e){this.form.state[e]=t.length>0},updateAnswerState:function(t){this.updateInputState(t,"answer")},updateTranslationState:function(t){this.updateInputState(t,"translation")}}},u=n("KHd+"),l=Object(u.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:t.modalId,title:"Edit answer","ok-title":"Save","ok-disabled":!t.canSave(),busy:t.isBusy},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleSave}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{id:"input-group-answer",label:t.answerLabel(t.language),"label-for":"input-answer","invalid-feedback":"Answer is required",state:t.form.state.answer}},[n("b-form-textarea",{attrs:{id:"input-answer",required:"",state:t.form.state.answer,rows:"2","max-rows":"6",trim:"",debounce:"250",disabled:!t.canEdit()},on:{update:t.updateAnswerState},model:{value:t.form.answer,callback:function(e){t.$set(t.form,"answer",e)},expression:"form.answer"}})],1),t._v(" "),t.isEnglish?t._e():n("b-form-group",{attrs:{id:"input-group-translation",label:t.answerLabel("en"),"label-for":"input-translation","invalid-feedback":"English translation is required",state:t.form.state.translation}},[n("b-form-textarea",{attrs:{id:"input-translation",required:"",state:t.form.state.translation,rows:"2","max-rows":"6",trim:"",debounce:"250",disabled:!t.canEdit()},on:{update:t.updateTranslationState},model:{value:t.form.translation,callback:function(e){t.$set(t.form,"translation",e)},expression:"form.translation"}})],1),t._v(" "),n("b-form-group",{attrs:{description:"Changing status to Translated will send the answer for review by SELFIE master. You and other Language Experts would still be able to make changes as needed."}},[n("b-form-checkbox",{attrs:{name:"translated",switch:"",disabled:!t.canChangeStatus()},model:{value:t.form.translated,callback:function(e){t.$set(t.form,"translated",e)},expression:"form.translated"}},[n("b",[t._v("Change status to translated")])])],1)],1)])}),[],!1,null,null,null);e.a=l.exports},Qw9S:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".fade-enter-active[data-v-fed5ae9a],.fade-leave-active[data-v-fed5ae9a]{transition:opacity .5s}.fade-enter[data-v-fed5ae9a],.fade-leave-to[data-v-fed5ae9a]{opacity:0}table.b-table[aria-busy=true][data-v-fed5ae9a]{opacity:.6}",""])},ZKpM:function(t,e,n){var r=n("Qw9S");"string"==typeof r&&(r=[[t.i,r,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(r,s);r.locals&&(t.exports=r.locals)},ZVlY:function(t,e,n){"use strict";e.a={computed:{filteredItems:function(){var t=this;if(""!==this.form.search){var e=["en"];return e.includes(this.language)||e.push(this.language),this.items.filter((function(n){return(t.language?Object.entries(n.descriptions).filter((function(t){return e.includes(t[0])})).map((function(t){return t[1]})):Object.values(n.descriptions)).join(" ").toLowerCase().includes(t.form.search.toLowerCase())}))}return this.items},totalRows:function(){return this.filteredItems.length}},data:function(){return{form:{search:""}}}}},azh7:function(t,e,n){"use strict";var r=n("L2JU"),s=n("QnqO"),a=n("tx6q"),i=n("qSOY"),o=n("3vls"),u=n("ZVlY");function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f={props:["items","language","isBusy"],mixins:[o.a,u.a],components:{AnswerEdit:s.a,AnswerReview:a.a,TableSearchDescriptions:i.a},computed:c(c({},Object(r.c)({perPage:function(t){return t.app.itemsPerPage}})),{},{fields:function(){var t=[{key:"id",label:"ID",sortable:!0,tdClass:["align-middle","text-center"]},{key:"answer",sortable:!1,tdClass:["align-middle","text-center"]},{key:"english_translation",sortable:!1,tdClass:["align-middle","text-center"]},{key:"date",sortable:!1,tdClass:["align-middle","text-center"]},{key:"languages",sortable:!1,tdClass:["align-middle","text-center"]},{key:"status",sortable:!1,tdClass:function(t,e,n){var r=["align-middle","text-center"];switch(t.value){case"in_translation":r.push("table-warning");break;case"translated":r.push("table-info");break;case"published":r.push("table-success")}return r}}];return this.language?t:t.filter((function(t){return"answer"!==t.key}))},modalId:function(){var t=this.language?"edit":"review";return"answer-".concat(t)}}),data:function(){return{currentPage:1,sortBy:"id",sortDesc:!0,answer:null}},methods:{descriptionsCount:function(t){return Object.keys(t.descriptions).length},hasDescription:function(t){return t.descriptions.hasOwnProperty(this.language)&&t.descriptions[this.language].trim()},descriptionOrPlaceholderText:function(t){return this.hasDescription(t)?t.descriptions[this.language]:"Add translation"},popoverData:function(t,e){return{content:t.descriptions.hasOwnProperty(e)?t.descriptions[e]:"",customClass:"popover-preserve-new-lines"}},onOpenModal:function(t){var e=this;this.answer=t,this.$nextTick((function(){e.$bvModal.show(e.modalId)}))}},created:function(){this.$store.dispatch("answers/preloadStates")}},p=(n("n0wh"),n("KHd+")),m=Object(p.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.language&&t.answer?n("answer-edit",{attrs:{answer:t.answer,language:t.language}}):t._e(),t._v(" "),!t.language&&t.answer?n("answer-review",{attrs:{answer:t.answer}}):t._e(),t._v(" "),n("h3",[t._v("Answers")]),t._v(" "),n("table-search-descriptions"),t._v(" "),n("b-table",{attrs:{striped:"",hover:"",fields:t.fields,items:t.filteredItems,"primary-key":"id","thead-class":"text-center",stacked:"lg","per-page":t.perPage,"current-page":t.currentPage,"sort-by":t.sortBy,"sort-desc":t.sortDesc,busy:t.isBusy},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"cell(id)",fn:function(e){return[t._v("\n            "+t._s(e.value)+"\n        ")]}},t.language?{key:"cell(answer)",fn:function(e){return[n("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:t.popoverData(e.item,t.language),expression:"popoverData(data.item, language)",modifiers:{hover:!0,top:!0}}],class:{"text-secondary":!t.hasDescription(e.item)},attrs:{variant:"link"},on:{click:function(n){return t.onOpenModal(e.item)}}},[t._v("\n                "+t._s(t.shortenDescription(t.descriptionOrPlaceholderText(e.item)))+"\n            ")])]}}:null,{key:"cell(english_translation)",fn:function(e){return[n("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:t.popoverData(e.item,"en"),expression:"popoverData(data.item, 'en')",modifiers:{hover:!0,top:!0}}],attrs:{variant:"link"},on:{click:function(n){return t.onOpenModal(e.item)}}},[t._v("\n                "+t._s(t.shortenDescription(e.item.descriptions.en))+"\n            ")])]}},{key:"cell(languages)",fn:function(e){return[n("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.click.blur.top",value:t.languagesPopoverData(e.item),expression:"languagesPopoverData(data.item)",modifiers:{hover:!0,click:!0,blur:!0,top:!0}}],attrs:{pill:"",variant:t.languagesButtonVariant(e.item)}},[t._v("\n                "+t._s(t.descriptionsCount(e.item))+" / "+t._s(t.totalLanguages)+"\n            ")])]}},{key:"cell(date)",fn:function(e){return[t._v("\n            "+t._s(t.formatDate(e.value))+"\n        ")]}},{key:"cell(status)",fn:function(e){return[t._v("\n            "+t._s(e.item.status.status)+"\n        ")]}}],null,!0)}),t._v(" "),t.totalRows>t.perPage?n("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"center"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)}),[],!1,null,null,null);e.a=m.exports},bUC5:function(t,e,n){"use strict";n.r(e);var r=n("XuX8"),s=n.n(r),a=n("L2JU"),i={namespaced:!0,state:function(){return{user:null,languages:[],itemsPerPage:25}},getters:{isAuthenticated:function(t){return!!t.user},user:function(t){return t.user},languages:function(t){return t.languages},totalLanguages:function(t){return t.languages.length}},actions:{setUser:function(t,e){(0,t.commit)("setUser",e)},setLanguages:function(t,e){(0,t.commit)("setLanguages",e)}},mutations:{setUser:function(t,e){t.user=e},setLanguages:function(t,e){t.languages=e}}},o={namespaced:!0,state:function(){return{items:[],states:[],topics:[],preloaded:[]}},getters:{totalCount:function(t){return t.items.length},forReview:function(t){return t.items.filter((function(t){return"in_translation"!==t.status.value}))}},actions:{loadAllQuestions:function(t){var e=t.commit;return axios.get("/questions").then((function(t){e("setQuestions",t.data.data)})).catch((function(t){console.error("Questions loading:",t)}))},preloadAllQuestions:function(t){var e=t.state,n=t.dispatch,r=t.commit;e.preloaded.hasOwnProperty("items")||(r("setPreloaded","items"),n("loadAllQuestions"))},loadStates:function(t){var e=t.commit;return axios.get("/questions/states").then((function(t){e("setStates",t.data)})).catch((function(t){console.error("Question states loading:",t)}))},preloadStates:function(t){var e=t.state,n=t.dispatch,r=t.commit;e.preloaded.hasOwnProperty("states")||(r("setPreloaded","states"),n("loadStates"))},loadTopics:function(t){var e=t.commit;return axios.get("/questions/topics").then((function(t){e("setTopics",t.data.data)})).catch((function(t){console.error("Question topics loading:",t)}))},preloadTopics:function(t){var e=t.state,n=t.dispatch,r=t.commit;e.preloaded.hasOwnProperty("topics")||(r("setPreloaded","topics"),n("loadTopics"))},updateQuestion:function(t,e){(0,t.commit)("updateQuestion",e)},insertQuestion:function(t,e){(0,t.commit)("insertQuestion",e)}},mutations:{setQuestions:function(t,e){t.items=e},updateQuestion:function(t,e){var n=t.items.findIndex((function(t){return t.id===e.id}));-1!==n&&Vue.set(t.items,n,e)},setPreloaded:function(t,e){Vue.set(t.preloaded,e,e)},setStates:function(t,e){t.states=e},setTopics:function(t,e){t.topics=e},insertQuestion:function(t,e){t.items.push(e)}}},u={namespaced:!0,state:function(){return{items:[],states:[],preloaded:{}}},getters:{totalCount:function(t){return t.items.length},forLanguage:function(t){return function(e){return"en"===e?t.items.filter((function(t){return t.descriptions.hasOwnProperty(e)&&1===Object.keys(t.descriptions).length})):t.items.filter((function(t){return t.descriptions.hasOwnProperty(e)}))}},forReview:function(t){return t.items.filter((function(t){return"pending"!==t.status.value}))}},actions:{loadAllPendingQuestions:function(t){var e=t.commit;return axios.get("/pending_questions").then((function(t){e("setPendingQuestions",t.data.data)})).catch((function(t){console.error("Pending questions loading:",t)}))},preloadAllPendingQuestions:function(t){var e=t.state,n=t.dispatch,r=t.commit;e.preloaded.hasOwnProperty("items")||(r("setPreloaded","items"),n("loadAllPendingQuestions"))},updatePendingQuestion:function(t,e){(0,t.commit)("updatePendingQuestion",e)},loadStates:function(t){var e=t.commit;return axios.get("/pending_questions/states").then((function(t){e("setStates",t.data)})).catch((function(t){console.error("Pending question states:",t)}))},preloadStates:function(t){var e=t.state,n=t.dispatch,r=t.commit;e.preloaded.hasOwnProperty("states")||(r("setPreloaded","states"),n("loadStates"))}},mutations:{setPendingQuestions:function(t,e){t.items=e},updatePendingQuestion:function(t,e){var n=t.items.findIndex((function(t){return t.id===e.id}));-1!==n&&Vue.set(t.items,n,e)},setPreloaded:function(t,e){Vue.set(t.preloaded,e,e)},setStates:function(t,e){t.states=e}}},l={namespaced:!0,state:function(){return{items:[],states:[],preloaded:[]}},getters:{totalCount:function(t){return t.items.length},forReview:function(t){return t.items.filter((function(t){return"in_translation"!==t.status.value}))},published:function(t){return t.items.filter((function(t){return"published"===t.status.value}))},forQuestion:function(t){return t.items.filter((function(t){return"published"===t.status.value||"translated"===t.status.value}))}},actions:{loadAllAnswers:function(t){var e=t.commit;return axios.get("/answers").then((function(t){e("setAnswers",t.data.data)})).catch((function(t){console.error("Answers loading:",t)}))},preloadAllAnswers:function(t){var e=t.state,n=t.dispatch,r=t.commit;e.preloaded.hasOwnProperty("items")||(r("setPreloaded","items"),n("loadAllAnswers"))},loadStates:function(t){var e=t.commit;return axios.get("/answers/states").then((function(t){e("setStates",t.data)})).catch((function(t){console.error("Answer states loading:",t)}))},preloadStates:function(t){var e=t.state,n=t.dispatch,r=t.commit;e.preloaded.hasOwnProperty("states")||(r("setPreloaded","states"),n("loadStates"))},insertAnswer:function(t,e){(0,t.commit)("insertAnswer",e)},updateAnswer:function(t,e){(0,t.commit)("updateAnswer",e)}},mutations:{setAnswers:function(t,e){t.items=e},updateAnswer:function(t,e){var n=t.items.findIndex((function(t){return t.id===e.id}));-1!==n?Vue.set(t.items,n,e):console.warn("Index not found, could not update an answer:",e)},setPreloaded:function(t,e){Vue.set(t.preloaded,e,e)},setStates:function(t,e){t.states=e},insertAnswer:function(t,e){t.items.push(e)}}};s.a.use(a.a);var c=new a.a.Store({modules:{app:i,questions:o,pendingQuestions:u,answers:l}}),d=n("rT2p");n("9Wh1"),window.Vue=n("XuX8"),s.a.use(n("X1uE")),s.a.component("font-awesome-icon",d.a),s.a.config.productionTip=!1,s.a.component("language-expert-view",n("6QWR").default),s.a.component("master-expert-view",n("ebRQ").default),s.a.component("users-table",n("HS2t").default);new s.a({el:"#app",store:c,mounted:function(){document.querySelector('meta[name="current-user"]')&&this.$store.dispatch("app/setUser",JSON.parse(document.querySelector('meta[name="current-user"]').content)),document.querySelector('meta[name="app-languages"]')&&this.$store.dispatch("app/setLanguages",JSON.parse(document.querySelector('meta[name="app-languages"]').content))}})},"dF+P":function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,s=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(r=(i=o.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){s=!0,a=t}finally{try{r||null==o.return||o.return()}finally{if(s)throw a}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}e.a={methods:{displayHttpError:function(t){var e=this.$createElement,n=[],s=2500,a=t.message;if(t.response&&t.response.data&&t.response.data.message&&(a=t.response.data.message),n.push(e("strong",{class:["text-center","mb-1","d-block"]},a)),t.response&&t.response.data&&t.response.data.errors){s=5e3;var i=[];Object.entries(t.response.data.errors).forEach((function(t){var n=r(t,2),s=n[0],a=n[1];i.push(e("dt",{class:["text-capitalize"]},s)),a.forEach((function(t){i.push(e("dd",{class:["text-center"]},t))}))})),n.push(e("dl",i))}this.$bvToast.toast(n,{variant:"danger",solid:!0,autoHideDelay:s,noCloseButton:!0})}}}},ePpQ:function(t,e,n){var r=n("/z1Y");"string"==typeof r&&(r=[[t.i,r,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(r,s);r.locals&&(t.exports=r.locals)},ebRQ:function(t,e,n){"use strict";n.r(e);var r=n("L2JU"),s=n("PjCe"),a=n("APFM"),i=n("azh7");function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c={computed:u(u({},Object(r.c)({languages:function(t){return t.app.languages}})),{},{fields:function(){var t=this,e=[{key:"name",label:"Language",sortable:!1,tdClass:["align-middle","text-center"]},{key:"questions",sortable:!1,tdClass:["align-middle","text-center","table-success"]},{key:"questions_translated",sortable:!1,tdClass:function(e,n,r){var s=["align-middle","text-center"];return t.questionTranslationsCount(r)===t.statistics.questions.count?s.push("table-success"):s.push("table-warning"),s}},{key:"answers",sortable:!1,tdClass:["align-middle","text-center","table-success"]},{key:"answers_translated",sortable:!1,tdClass:function(e,n,r){var s=["align-middle","text-center"];return t.answerTranslationsCount(r)===t.statistics.answers.count?s.push("table-success"):s.push("table-warning"),s}}];return e}}),data:function(){return{statistics:null}},methods:{questionTranslationsCount:function(t){var e=this.statistics.questions.translations.find((function(e){return t.code===e.code}));return e?e.count:0},answerTranslationsCount:function(t){var e=this.statistics.answers.translations.find((function(e){return t.code===e.code}));return e?e.count:0}},created:function(){var t=this;axios.get("/statistics").then((function(e){t.statistics=e.data})).catch((function(t){console.error("Statistics loading:",t)}))}},d=(n("Jpow"),n("KHd+")),f=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("transition",{attrs:{name:"fade",mode:"out-in"}},[t.statistics?t._e():n("div",{staticClass:"d-flex justify-content-center"},[n("b-spinner",{attrs:{type:"grow",label:"Loading statistics data",small:"",variant:"secondary"}})],1),t._v(" "),t.statistics?n("b-table",{attrs:{striped:"",hover:"",fields:t.fields,items:t.languages,"primary-key":"id","thead-class":"text-center",stacked:"lg"},scopedSlots:t._u([{key:"cell(name)",fn:function(e){return[t._v("\n                "+t._s(e.value)+"\n            ")]}},{key:"cell(questions)",fn:function(){return[t._v("\n                "+t._s(t.statistics.questions.count)+"\n            ")]},proxy:!0},{key:"cell(questions_translated)",fn:function(e){return[t._v("\n                "+t._s(t.questionTranslationsCount(e.item))+"\n            ")]}},{key:"cell(answers)",fn:function(){return[t._v("\n                "+t._s(t.statistics.answers.count)+"\n            ")]},proxy:!0},{key:"cell(answers_translated)",fn:function(e){return[t._v("\n                "+t._s(t.answerTranslationsCount(e.item))+"\n            ")]}}],null,!1,4028698361)}):t._e()],1)],1)}),[],!1,null,"4ab0644c",null).exports,p=n("7O5W"),m=n("wHSu");function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}p.c.add(m.g),p.c.add(m.f);var v={components:{QuestionsTable:s.a,PendingQuestionsTable:a.a,AnswersTable:i.a,StatisticsTable:f},data:function(){return{tabIndex:0,selectedLanguage:null,isBusy:!1,showStatistics:!1}},computed:h(h({},Object(r.c)({languages:function(t){return t.app.languages}})),{},{questions:function(){return this.$store.getters["questions/forReview"]},pendingQuestions:function(){return this.$store.getters["pendingQuestions/forReview"]},answers:function(){return this.$store.getters["answers/forReview"]}}),methods:{tabTitleBadgeVariant:function(t){return this.tabIndex===t?"light":"secondary"},onLanguageSelected:function(t){var e=this;this.selectedLanguage&&t&&this.selectedLanguage.code!==t.code?(this.isBusy=!0,this.selectedLanguage=t,setTimeout((function(){e.isBusy=!1}),500)):this.selectedLanguage=t},onToggleStatistics:function(){this.showStatistics=!this.showStatistics}},created:function(){this.$store.dispatch("answers/preloadAllAnswers"),this.$store.dispatch("questions/preloadAllQuestions"),this.$store.dispatch("pendingQuestions/preloadAllPendingQuestions")}},w=(n("vJT8"),Object(d.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mt-4"},[n("div",{staticClass:"text-right"},[n("b-button-group",{staticClass:"mb-4"},[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:t.showStatistics?"secondary":"outline-secondary",title:"Toggle statistics"},on:{click:function(e){return t.onToggleStatistics()}}},[n("font-awesome-icon",{attrs:{icon:["fas","table"]}})],1),t._v(" "),n("b-dropdown",{attrs:{id:"language-expert-view",dropup:"",text:"Open language expert view",variant:t.selectedLanguage?"secondary":"outline-secondary"}},t._l(t.languages,(function(e){return n("b-dropdown-item",{key:e.code,staticClass:"text-uppercase text-center",attrs:{href:"#",disabled:t.selectedLanguage&&t.selectedLanguage.code===e.code},on:{click:function(n){return t.onLanguageSelected(e)}}},[t._v("\n                    "+t._s(e.name)+"\n                ")])})),1)],1)],1),t._v(" "),t.showStatistics?n("statistics-table"):t._e(),t._v(" "),n("transition",{attrs:{name:"fade",mode:"out-in"}},[t.selectedLanguage?t._e():n("b-tabs",{attrs:{"content-class":"mt-4","active-nav-item-class":"bg-primary text-white",fill:""},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[n("b-tab",{attrs:{lazy:""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n                    Questions\n                    "),n("b-badge",{attrs:{variant:t.tabTitleBadgeVariant(0),pill:""}},[t._v(t._s(t.questions.length))])]},proxy:!0}],null,!1,2111805051)},[t._v(" "),n("questions-table",{attrs:{items:t.questions}})],1),t._v(" "),n("b-tab",{attrs:{lazy:""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n                    Pending questions\n                    "),n("b-badge",{attrs:{variant:t.tabTitleBadgeVariant(1),pill:""}},[t._v(t._s(t.pendingQuestions.length))])]},proxy:!0}],null,!1,622617658)},[t._v(" "),n("pending-questions-table",{attrs:{items:t.pendingQuestions}})],1),t._v(" "),n("b-tab",{attrs:{lazy:""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n                    Answers\n                    "),n("b-badge",{attrs:{variant:t.tabTitleBadgeVariant(2),pill:""}},[t._v(t._s(t.answers.length))])]},proxy:!0}],null,!1,2480985657)},[t._v(" "),n("answers-table",{attrs:{items:t.answers}})],1)],1),t._v(" "),t.selectedLanguage?n("b-card",{scopedSlots:t._u([{key:"header",fn:function(){return[n("h3",{staticClass:"mb-0"},[t._v("\n                    Country SELFIE Expert "+t._s(t.selectedLanguage.name)+"\n                    "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{title:"Clear selected language",size:"sm",variant:"outline-secondary"},on:{click:function(e){return t.onLanguageSelected(null)}}},[n("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)],1)]},proxy:!0}],null,!1,159328666)},[t._v(" "),n("language-expert-view",{attrs:{language:t.selectedLanguage.code,"is-busy":t.isBusy}})],1):t._e()],1)],1)}),[],!1,null,"fed5ae9a",null));e.default=w.exports},n0wh:function(t,e,n){"use strict";n("xKtu")},pyCd:function(t,e){},qSOY:function(t,e,n){"use strict";var r={methods:{onSearchSubmit:function(t){t.preventDefault()},onSearchReset:function(t){t.preventDefault(),this.$parent.form.search=""}}},s=n("KHd+"),a=Object(s.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex flex-row-reverse"},[n("b-form",{staticClass:"mb-2",attrs:{inline:""},on:{submit:t.onSearchSubmit,reset:t.onSearchReset}},[n("b-form-group",{attrs:{id:"input-group-search-text"}},[n("b-input-group",[n("b-form-input",{attrs:{id:"search-text",type:"text",placeholder:"Search text",trim:"",debounce:"500"},model:{value:t.$parent.form.search,callback:function(e){t.$set(t.$parent.form,"search",e)},expression:"$parent.form.search"}}),t._v(" "),n("b-input-group-append",[n("b-button",{attrs:{type:"reset",variant:"outline-danger"}},[t._v("Reset")])],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.a=a.exports},sSy8:function(t,e,n){var r=n("HHId");"string"==typeof r&&(r=[[t.i,r,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(r,s);r.locals&&(t.exports=r.locals)},tgG3:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".popover-preserve-new-lines .popover-body{white-space:pre-wrap}",""])},tx6q:function(t,e,n){"use strict";var r=n("L2JU");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o={props:["answer"],mixins:[n("dF+P").a],computed:a(a({},Object(r.c)({languages:function(t){return t.app.languages},states:function(t){return t.answers.states}})),{},{modalId:function(){return"answer-review"},totalLanguages:function(){return this.$store.getters["app/totalLanguages"]},statusOptions:function(){var t=this;return this.states.map((function(e){return{value:e.value,text:e.text,disabled:-1===t.answer.status.transitionable.indexOf(e.value)&&t.answer.status.value!==e.value}}))}}),data:function(){return{form:{answer:{},status:"",state:{}},isBusy:!1}},methods:{resetModal:function(){var t=this,e={},n={};Object.values(this.languages).forEach((function(r){var s=r.code;e[s]=t.answer.descriptions.hasOwnProperty(s)?t.answer.descriptions[s]:"",n[s]=!!e[s]||null})),this.form.answer=e,this.form.state=n,this.form.status=this.answer.status.value},canEdit:function(){return!0},canSave:function(){return this.canEdit()&&Object.values(this.form.state).every((function(t){return!0===t}))},handleSave:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;if(this.$refs.form.checkValidity()){this.isBusy=!0;var e={descriptions:[],status:this.form.status};e.descriptions=Object.entries(this.form.answer).map((function(t){return{code:t[0],value:t[1]}})),axios.put("/answers/".concat(this.answer.id),e).then((function(e){t.isBusy=!1,t.$store.dispatch("answers/updateAnswer",e.data),t.$nextTick((function(){t.$bvModal.hide(t.modalId)}))})).catch((function(e){t.isBusy=!1,console.error(e),t.displayHttpError(e)}))}},formGroupId:function(t){return"input-group-answer-".concat(t.code)},formGroupLabel:function(t){return"Answer in ".concat(t.name)},formInputId:function(t){return"input-answer-".concat(t.code)},updateInputState:function(t,e){this.form.state[t]=e.length>0}}},u=n("KHd+"),l=Object(u.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:t.modalId,title:"Review answer","ok-title":"Save","ok-disabled":!t.canSave(),busy:t.isBusy},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleSave}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[t._l(t.languages,(function(e){return n("b-form-group",{key:e.code,attrs:{id:t.formGroupId(e),label:t.formGroupLabel(e),"label-for":t.formInputId(e),"invalid-feedback":"Answer text is required",state:t.form.state[e.code]}},[n("b-form-textarea",{attrs:{id:t.formInputId(e),required:"",state:t.form.state[e.code],rows:"2","max-rows":"6",trim:"",debounce:"250",disabled:!t.canEdit()},on:{update:function(n){for(var r=arguments.length,s=Array(r);r--;)s[r]=arguments[r];return t.updateInputState.apply(void 0,[e.code].concat(s))}},model:{value:t.form.answer[e.code],callback:function(n){t.$set(t.form.answer,e.code,n)},expression:"form.answer[language.code]"}})],1)})),t._v(" "),n("b-form-group",{attrs:{id:"input-group-status",label:"Status","label-for":"input-status",description:"Published status means that current answer is fully translated and available to the chatbot service."}},[n("b-form-select",{attrs:{options:t.statusOptions,id:"input-status",disabled:!t.canEdit()},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)],2)])}),[],!1,null,null,null);e.a=l.exports},vJT8:function(t,e,n){"use strict";n("ZKpM")},xKtu:function(t,e,n){var r=n("tgG3");"string"==typeof r&&(r=[[t.i,r,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(r,s);r.locals&&(t.exports=r.locals)},xsCT:function(t,e,n){"use strict";var r=n("7O5W"),s=n("wHSu");r.c.add(s.d,s.h,s.a,s.c);var a={props:["options","value","height","disabled"],mounted:function(){var t=this;this.height&&(this.listStyle["max-height"]=this.height),this.$nextTick((function(){t.scrollToSelected()})),this.$root.$once("bv::modal::shown",this.handleModalShown)},unmounted:function(){this.$off("bv::modal::shown",this.handleModalShown)},computed:{filteredOptions:function(){var t=this;return""!=this.search?this.options.filter((function(e){return e.value==t.input.value||e.text.toLowerCase().includes(t.search.toLowerCase())})):this.options},isDisabled:function(){return!!this.disabled}},data:function(){return{search:"",input:{value:this.value},modal:{content:""},listStyle:{"max-height":"300px","overflow-y":"scroll",display:"block"}}},methods:{shorten:function(t,e){return e||(e=50),t&&t.length>e?"".concat(t.substr(0,e),"..."):t},openModal:function(t){this.modal.content=t,this.$refs.modal.show()},setValue:function(t){this.input.value=t,this.$emit("input",this.input.value)},removeValue:function(){this.input.value="",this.$emit("input",this.input.value)},scrollToSelected:function(){this.input.value&&this.$refs["option-".concat(this.input.value)][0].scrollIntoView({behavior:"smooth"})},resetSearch:function(){var t=this;this.search="",this.$nextTick((function(){t.scrollToSelected()}))},handleModalShown:function(t,e){"question-edit"!==e&&"question-review"!==e||this.scrollToSelected()}}},i=n("KHd+"),o=Object(i.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{ref:"modal",attrs:{"hide-footer":!0}},[t._v(t._s(t.modal.content))]),t._v(" "),n("b-input-group",{staticClass:"mb-2"},[n("b-form-input",{attrs:{id:"search-text",type:"text",placeholder:"Search text",trim:"",debounce:"500",disabled:t.isDisabled},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),n("b-input-group-append",[n("b-button",{attrs:{variant:"outline-danger",disabled:t.isDisabled||""==t.search},on:{click:t.resetSearch}},[t._v("Reset")])],1),t._v(" "),n("b-input-group-append",[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"outline-secondary",disabled:!t.input.value,title:"Scroll to selected item"},on:{click:t.scrollToSelected}},[n("font-awesome-icon",{attrs:{icon:["fas","eye"]}})],1)],1)],1),t._v(" "),n("div",{style:t.listStyle},[n("b-list-group",t._l(t.filteredOptions,(function(e){return n("b-list-group-item",{key:e.value,ref:"option-"+e.value,refInFor:!0,staticClass:"d-flex flex-row flex-row-reverse",attrs:{active:e.value==t.input.value}},[n("div",{staticClass:"pl-2"},[n("b-button-group",{attrs:{size:"sm"}},[e.value!=t.value?n("b-button",{attrs:{variant:"success",disabled:t.isDisabled},on:{click:function(n){return t.setValue(e.value)}}},[n("font-awesome-icon",{attrs:{icon:["fas","check"]}})],1):t._e(),t._v(" "),e.value==t.value?n("b-button",{attrs:{variant:"danger",disabled:t.isDisabled},on:{click:t.removeValue}},[n("font-awesome-icon",{attrs:{icon:["fas","times-circle"]}})],1):t._e(),t._v(" "),n("b-button",{attrs:{variant:"secondary"},on:{click:function(n){return t.openModal(e.text)}}},[n("font-awesome-icon",{attrs:{icon:["fas","info-circle"]}})],1)],1)],1),t._v(" "),n("div",{staticClass:"flex-grow-1"},[n("small",{staticClass:"mb-0"},[t._v("\n                        "+t._s(t.shorten(e.text,120))+"\n                    ")])])])})),1)],1)],1)}),[],!1,null,null,null);e.a=o.exports}},[[0,1,2]]]);
//# sourceMappingURL=app.js.map