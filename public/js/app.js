(self.webpackChunk=self.webpackChunk||[]).push([[773],{9491:(t,e,n)=>{"use strict";var s=n(538),a=n(629);const r={namespaced:!0,state:function(){return{user:null,languages:[],itemsPerPage:25}},getters:{isAuthenticated:function(t){return!!t.user},user:function(t){return t.user},languages:function(t){return t.languages},totalLanguages:function(t){return t.languages.length}},actions:{setUser:function(t,e){(0,t.commit)("setUser",e)},setLanguages:function(t,e){(0,t.commit)("setLanguages",e)}},mutations:{setUser:function(t,e){t.user=e},setLanguages:function(t,e){t.languages=e}}};const i={namespaced:!0,state:function(){return{items:[],states:[],preloaded:[]}},getters:{totalCount:function(t){return t.items.length},forReview:function(t){return t.items.filter((function(t){return"in_translation"!==t.status.value}))}},actions:{loadAllQuestions:function(t){var e=t.commit;return axios.get("/questions").then((function(t){e("setQuestions",t.data.data)})).catch((function(t){console.error("Questions loading:",t)}))},preloadAllQuestions:function(t){var e=t.state,n=t.dispatch,s=t.commit;e.preloaded.hasOwnProperty("items")||(s("setPreloaded","items"),n("loadAllQuestions"))},loadStates:function(t){var e=t.commit;return axios.get("/questions/states").then((function(t){e("setStates",t.data)})).catch((function(t){console.error("Question states loading:",t)}))},preloadStates:function(t){var e=t.state,n=t.dispatch,s=t.commit;e.preloaded.hasOwnProperty("states")||(s("setPreloaded","states"),n("loadStates"))},updateQuestion:function(t,e){(0,t.commit)("updateQuestion",e)},insertQuestion:function(t,e){(0,t.commit)("insertQuestion",e)}},mutations:{setQuestions:function(t,e){t.items=e},updateQuestion:function(t,e){var n=t.items.findIndex((function(t){return t.id===e.id}));-1!==n&&Vue.set(t.items,n,e)},setPreloaded:function(t,e){Vue.set(t.preloaded,e,e)},setStates:function(t,e){t.states=e},insertQuestion:function(t,e){t.items.push(e)}}};const o={namespaced:!0,state:function(){return{items:[],states:[],preloaded:{}}},getters:{totalCount:function(t){return t.items.length},forLanguage:function(t){return function(e){return"en"===e?t.items.filter((function(t){return t.descriptions.hasOwnProperty(e)&&1===Object.keys(t.descriptions).length})):t.items.filter((function(t){return t.descriptions.hasOwnProperty(e)}))}},forReview:function(t){return t.items.filter((function(t){return"pending"!==t.status.value}))}},actions:{loadAllPendingQuestions:function(t){var e=t.commit;return axios.get("/pending_questions").then((function(t){e("setPendingQuestions",t.data.data)})).catch((function(t){console.error("Pending questions loading:",t)}))},preloadAllPendingQuestions:function(t){var e=t.state,n=t.dispatch,s=t.commit;e.preloaded.hasOwnProperty("items")||(s("setPreloaded","items"),n("loadAllPendingQuestions"))},updatePendingQuestion:function(t,e){(0,t.commit)("updatePendingQuestion",e)},loadStates:function(t){var e=t.commit;return axios.get("/pending_questions/states").then((function(t){e("setStates",t.data)})).catch((function(t){console.error("Pending question states:",t)}))},preloadStates:function(t){var e=t.state,n=t.dispatch,s=t.commit;e.preloaded.hasOwnProperty("states")||(s("setPreloaded","states"),n("loadStates"))}},mutations:{setPendingQuestions:function(t,e){t.items=e},updatePendingQuestion:function(t,e){var n=t.items.findIndex((function(t){return t.id===e.id}));-1!==n&&Vue.set(t.items,n,e)},setPreloaded:function(t,e){Vue.set(t.preloaded,e,e)},setStates:function(t,e){t.states=e}}};const l={namespaced:!0,state:function(){return{items:[],states:[],preloaded:[]}},getters:{totalCount:function(t){return t.items.length},forReview:function(t){return t.items.filter((function(t){return"in_translation"!==t.status.value}))},published:function(t){return t.items.filter((function(t){return"published"===t.status.value}))},forQuestion:function(t){return t.items.filter((function(t){return"published"===t.status.value||"translated"===t.status.value}))}},actions:{loadAllAnswers:function(t){var e=t.commit;return axios.get("/answers").then((function(t){e("setAnswers",t.data.data)})).catch((function(t){console.error("Answers loading:",t)}))},preloadAllAnswers:function(t){var e=t.state,n=t.dispatch,s=t.commit;e.preloaded.hasOwnProperty("items")||(s("setPreloaded","items"),n("loadAllAnswers"))},loadStates:function(t){var e=t.commit;return axios.get("/answers/states").then((function(t){e("setStates",t.data)})).catch((function(t){console.error("Answer states loading:",t)}))},preloadStates:function(t){var e=t.state,n=t.dispatch,s=t.commit;e.preloaded.hasOwnProperty("states")||(s("setPreloaded","states"),n("loadStates"))},insertAnswer:function(t,e){(0,t.commit)("insertAnswer",e)},updateAnswer:function(t,e){(0,t.commit)("updateAnswer",e)}},mutations:{setAnswers:function(t,e){t.items=e},updateAnswer:function(t,e){var n=t.items.findIndex((function(t){return t.id===e.id}));-1!==n?Vue.set(t.items,n,e):console.warn("Index not found, could not update an answer:",e)},setPreloaded:function(t,e){Vue.set(t.preloaded,e,e)},setStates:function(t,e){t.states=e},insertAnswer:function(t,e){t.items.push(e)}}};const u={namespaced:!0,state:function(){return{items:[],preloaded:[]}},getters:{totalCount:function(t){return t.items.length},sortedAsc:function(t){return t.items.sort((function(t,e){return t.description.localeCompare(e.description)}))}},actions:{loadAllTopics:function(t){var e=t.commit;return axios.get("/topics").then((function(t){e("setTopics",t.data.data)})).catch((function(t){console.error("Topics loading:",t)}))},preloadAllTopics:function(t){var e=t.state,n=t.dispatch,s=t.commit;e.preloaded.hasOwnProperty("items")||(s("setPreloaded","items"),n("loadAllTopics"))},updateTopic:function(t,e){(0,t.commit)("updateTopic",e)},insertTopic:function(t,e){(0,t.commit)("insertTopic",e)},deleteTopic:function(t,e){(0,t.commit)("deleteTopic",e)}},mutations:{setTopics:function(t,e){t.items=e},updateTopic:function(t,e){var n=t.items.findIndex((function(t){return t.id===e.id}));-1!==n&&Vue.set(t.items,n,e)},setPreloaded:function(t,e){Vue.set(t.preloaded,e,e)},insertTopic:function(t,e){t.items.push(e)},deleteTopic:function(t,e){var n=t.items.findIndex((function(t){return t.id===e.id}));-1!==n&&t.items.splice(n,1)}}};s.default.use(a.ZP);const c=new a.ZP.Store({modules:{app:r,questions:i,pendingQuestions:o,answers:l,topics:u}});var d=n(7810);n(9147),s.default.use(n(4196)),window.Vue=s.default,s.default.component("font-awesome-icon",d.GN),s.default.config.productionTip=!1,s.default.component("language-expert-view",n(7526).Z),s.default.component("master-expert-view",n(3933).Z),s.default.component("users-table",n(4974).Z);new s.default({el:"#app",store:c,mounted:function(){document.querySelector('meta[name="current-user"]')&&this.$store.dispatch("app/setUser",JSON.parse(document.querySelector('meta[name="current-user"]').content)),document.querySelector('meta[name="app-languages"]')&&this.$store.dispatch("app/setLanguages",JSON.parse(document.querySelector('meta[name="app-languages"]').content)),setInterval((function(){axios.post("/refresh_csrf_token").then((function(t){document.querySelector('meta[name="csrf-token"]').content=t.data.csrfToken})).catch((function(t){console.error(t)}))}),9e5)}})},9147:(t,e,n)=>{window._=n(6486);try{window.Popper=n(8981).default,window.$=window.jQuery=n(9755),n(3734)}catch(t){}window.axios=n(9669),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",document.querySelector('meta[name="base-url"]')&&(window.axios.defaults.baseURL=document.querySelector('meta[name="base-url"]').content)},5494:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var s=n(629);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const o={computed:r(r({},(0,s.Se)({totalLanguages:"app/totalLanguages"})),(0,s.rn)({languages:function(t){return t.app.languages}})),methods:{languagesPopoverData:function(t){return{title:"Translated to languages",content:this.languages.filter((function(e){return t.descriptions.hasOwnProperty(e.code)})).map((function(t){return t.name})).join(", ")}},languagesButtonVariant:function(t){return Object.keys(t.descriptions).length>=this.totalLanguages?"outline-success":"outline-secondary"},formatDate:function(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),".").concat((e.getMonth()+1).toString().padStart(2,"0"),".").concat(e.getFullYear())},descriptionInLanguageOrEnglish:function(t,e){return t.hasOwnProperty(e)?t[e]:t.en},shortenDescription:function(t,e){return e||(e=50),t.length>e?"".concat(t.substr(0,e),"..."):t}}}},5756:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});const s={computed:{filteredItems:function(){var t=this;if(""!==this.form.search){var e=["en"];return e.includes(this.language)||e.push(this.language),this.items.filter((function(n){return(t.language?Object.entries(n.descriptions).filter((function(t){return e.includes(t[0])})).map((function(t){return t[1]})):Object.values(n.descriptions)).join(" ").toLowerCase().includes(t.form.search.toLowerCase())}))}return this.items},totalRows:function(){return this.filteredItems.length}},data:function(){return{form:{search:""}}}}},6077:(t,e,n)=>{"use strict";function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],s=!0,a=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(s=(i=o.next()).done)&&(n.push(i.value),!e||n.length!==e);s=!0);}catch(t){a=!0,r=t}finally{try{s||null==o.return||o.return()}finally{if(a)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}n.d(e,{Z:()=>r});const r={methods:{displayHttpError:function(t){var e=this.$createElement,n=[],a=2500,r=t.message;if(t.response&&t.response.data&&t.response.data.message&&(r=t.response.data.message),n.push(e("strong",{class:["text-center","mb-1","d-block"]},r)),t.response&&t.response.data&&t.response.data.errors){a=5e3;var i=[];Object.entries(t.response.data.errors).forEach((function(t){var n=s(t,2),a=n[0],r=n[1];i.push(e("dt",{class:["text-capitalize"]},a)),r.forEach((function(t){i.push(e("dd",{class:["text-center"]},t))}))})),n.push(e("dl",i))}this.$bvToast.toast(n,{variant:"danger",solid:!0,autoHideDelay:a,noCloseButton:!0})}}}},8277:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var s=n(4015),a=n.n(s),r=n(3645),i=n.n(r)()(a());i.push([t.id,".popover-preserve-new-lines .popover-body{white-space:pre-wrap}","",{version:3,sources:["webpack://./resources/js/components/Answer/Table.vue"],names:[],mappings:"AAoMA,0CACA,oBACA",sourcesContent:["<template>\n    <div>\n        <answer-edit :answer=\"answer\" :language=\"language\" v-if=\"language && answer\"></answer-edit>\n        <answer-review :answer=\"answer\" v-if=\"!language && answer\"></answer-review>\n        \n        <h3>Answers</h3>\n\n        <table-search-descriptions></table-search-descriptions>\n        \n        <b-table\n            striped\n            hover\n            :fields=\"fields\"\n            :items=\"filteredItems\"\n            primary-key=\"id\"\n            thead-class=\"text-center\"\n            stacked=\"lg\"\n            :per-page=\"perPage\"\n            :current-page=\"currentPage\"\n            :sort-by.sync=\"sortBy\"\n            :sort-desc.sync=\"sortDesc\"\n            :busy=\"isBusy\"\n        >\n            <template v-slot:cell(id)=\"data\">\n                {{ data.value }}\n            </template>\n\n            <template v-slot:cell(answer)=\"data\" v-if=\"language\">\n                <b-button\n                    variant=\"link\"\n                    :class=\"{ 'text-secondary': !hasDescription(data.item) }\"\n                    v-b-popover.hover.top=\"popoverData(data.item, language)\"\n                    @click=\"onOpenModal(data.item)\"\n                >\n                    {{ shortenDescription(descriptionOrPlaceholderText(data.item)) }}\n                </b-button>\n            </template>\n\n            <template v-slot:cell(english_translation)=\"data\">\n                <b-button\n                    variant=\"link\"\n                    v-b-popover.hover.top=\"popoverData(data.item, 'en')\"\n                    @click=\"onOpenModal(data.item)\"\n                >\n                    {{ shortenDescription(data.item.descriptions.en) }}\n                </b-button>\n            </template>\n\n            <template v-slot:cell(languages)=\"data\">\n                <b-button\n                    pill\n                    :variant=\"languagesButtonVariant(data.item)\"\n                    v-b-popover.hover.click.blur.top=\"languagesPopoverData(data.item)\"\n                >\n                    {{ descriptionsCount(data.item) }} / {{ totalLanguages }}\n                </b-button>\n            </template>\n\n            <template v-slot:cell(date)=\"data\">\n                {{ formatDate(data.value) }}\n            </template>\n\n            <template v-slot:cell(status)=\"data\">\n                {{ data.item.status.status }}\n            </template>\n        </b-table>\n\n        <b-pagination\n          v-model=\"currentPage\"\n          :total-rows=\"totalRows\"\n          :per-page=\"perPage\"\n          align=\"center\"\n          v-if=\"totalRows > perPage\"\n        ></b-pagination>\n    </div>\n</template>\n\n<script>\n    import { mapState } from 'vuex'\n    import AnswerEdit from './Edit.vue'\n    import AnswerReview from './Review.vue'\n    import TableSearchDescriptions from '../TableSearchDescriptions.vue'\n    import TableHelpers from '../../mixins/TableHelpers'\n    import TableSearchHelpers from '../../mixins/TableSearchHelpers'\n\n    export default {\n        props: ['items', 'language', 'isBusy'],\n        mixins: [TableHelpers, TableSearchHelpers],\n        components: {\n            AnswerEdit,\n            AnswerReview,\n            TableSearchDescriptions\n        },\n        computed: {\n            ...mapState({\n                perPage: state => state.app.itemsPerPage\n            }),\n            fields() {\n                const fields = [\n                    {\n                        key: 'id',\n                        label: 'ID',\n                        sortable: true,\n                        tdClass: ['align-middle', 'text-center']\n                    },\n                    {\n                        key: 'answer',\n                        sortable: false,\n                        tdClass: ['align-middle', 'text-center']\n                    },\n                    {\n                        key: 'english_translation',\n                        sortable: false,\n                        tdClass: ['align-middle', 'text-center']\n                    },\n                    {\n                        key: 'date',\n                        sortable: false,\n                        tdClass: ['align-middle', 'text-center']\n                    },\n                    {\n                        key: 'languages',\n                        sortable: false,\n                        tdClass: ['align-middle', 'text-center']\n                    },\n                    {\n                        key: 'status',\n                        sortable: false,\n                        tdClass: (value, key, item) => {\n                            const classes = ['align-middle', 'text-center']\n\n                            switch(value.value) {\n                                case 'in_translation':\n                                    classes.push('table-warning')\n                                    break\n                                case 'translated':\n                                    classes.push('table-info')\n                                    break\n                                case 'published':\n                                    classes.push('table-success')\n                            }\n\n                            return classes\n                        },\n                    }\n                ]\n\n                if (!this.language) {\n                    return fields.filter(field => field.key !== 'answer')\n                }\n\n                return fields\n            },\n            modalId() {\n                const type = this.language ? 'edit' : 'review'\n                return `answer-${type}`\n            },\n        },\n        data() {\n            return {\n                currentPage: 1,\n                sortBy: 'id',\n                sortDesc: true,\n                answer: null\n            }\n        },\n        methods: {\n            descriptionsCount(item) {\n                return Object.keys(item.descriptions).length\n            },\n            hasDescription(item) {\n                return item.descriptions.hasOwnProperty(this.language) && item.descriptions[this.language].trim()\n            },\n            descriptionOrPlaceholderText(item) {\n                return this.hasDescription(item) ? item.descriptions[this.language] : 'Add translation'\n            },\n            popoverData(item, code) {\n                return {\n                    content: item.descriptions.hasOwnProperty(code) ? item.descriptions[code] : '',\n                    customClass: 'popover-preserve-new-lines'\n                }\n            },\n            onOpenModal(answer) {\n                this.answer = answer\n                this.$nextTick(() => {\n                    this.$bvModal.show(this.modalId)\n                })\n            }\n        },\n        created() {\n            this.$store.dispatch('answers/preloadStates')\n        }\n    }\n<\/script>\n\n<style>\n.popover-preserve-new-lines .popover-body{\n    white-space: pre-wrap;\n}\n</style>\n"],sourceRoot:""}]);const o=i},4532:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var s=n(4015),a=n.n(s),r=n(3645),i=n.n(r)()(a());i.push([t.id,".fade-enter-active[data-v-9796b882],.fade-leave-active[data-v-9796b882]{transition:opacity .5s}.fade-enter[data-v-9796b882],.fade-leave-to[data-v-9796b882]{opacity:0}table.b-table[aria-busy=true][data-v-9796b882]{opacity:.6}","",{version:3,sources:["webpack://./resources/js/components/MasterExpertView.vue"],names:[],mappings:"AA8KA,wEACA,sBACA,CACA,6DACA,SACA,CACA,+CACA,UACA",sourcesContent:['<template>\n    <div class="mt-4">\n        <div class="text-right">\n            <b-button-group class="mb-4">\n                <b-button\n                    :variant="showStatistics ? \'secondary\' : \'outline-secondary\'"\n                    v-b-tooltip.hover\n                    title="Toggle statistics"\n                    @click="onToggleStatistics()"\n                >\n                    <font-awesome-icon :icon="[\'fas\', \'table\']" />\n                </b-button>\n                <b-dropdown\n                    id="language-expert-view"\n                    dropup\n                    text="Open language expert view"\n                    :variant="selectedLanguage ? \'secondary\' : \'outline-secondary\'"\n                >\n                    <b-dropdown-item\n                        v-for="language in languages"\n                        href="#"\n                        v-bind:key="language.code"\n                        class="text-uppercase text-center"\n                        @click="onLanguageSelected(language)"\n                        :disabled="selectedLanguage && selectedLanguage.code === language.code"\n                    >\n                        {{ language.name }}\n                    </b-dropdown-item>\n                </b-dropdown>\n            </b-button-group>\n        </div>\n\n        <statistics-table v-if="showStatistics"></statistics-table>\n\n        <transition name="fade" mode="out-in">\n            <b-tabs\n                v-model="tabIndex"\n                content-class="mt-4"\n                active-nav-item-class="bg-primary text-white"\n                fill\n                v-if="!selectedLanguage"\n            >\n                <b-tab lazy>\n                    <template v-slot:title>\n                        Questions\n                        <b-badge :variant="tabTitleBadgeVariant(0)" pill>{{ questions.length }}</b-badge>\n                    </template>\n\n                    <questions-table :items="questions"></questions-table>\n                </b-tab>\n                <b-tab lazy>\n                    <template v-slot:title>\n                        Pending questions\n                        <b-badge :variant="tabTitleBadgeVariant(1)" pill>{{ pendingQuestions.length }}</b-badge>\n                    </template>\n\n                    <pending-questions-table :items="pendingQuestions"></pending-questions-table>\n                </b-tab>\n                <b-tab lazy>\n                    <template v-slot:title>\n                        Answers\n                        <b-badge :variant="tabTitleBadgeVariant(2)" pill>{{ answers.length }}</b-badge>\n                    </template>\n\n                    <answers-table :items="answers"></answers-table>\n                </b-tab>\n                <b-tab lazy>\n                    <template v-slot:title>\n                        Categories\n                        <b-badge :variant="tabTitleBadgeVariant(3)" pill>{{ topics.length }}</b-badge>\n                    </template>\n\n                    <topics-table :items="topics"></topics-table>\n                </b-tab>\n            </b-tabs>\n\n            <b-card\n                v-if="selectedLanguage"\n            >\n                <template v-slot:header>\n                    <h3 class="mb-0">\n                        Country SELFIE Expert {{ selectedLanguage.name }}\n                        <b-button\n                            v-b-tooltip\n                            title="Clear selected language"\n                            @click="onLanguageSelected(null)"\n                            size="sm"\n                            variant="outline-secondary"\n                        >\n                            <font-awesome-icon :icon="[\'fas\', \'times\']" />\n                        </b-button>\n                    </h3>\n                </template>\n\n                <language-expert-view :language="selectedLanguage.code" :is-busy="isBusy"></language-expert-view>\n            </b-card>\n        </transition>\n    </div>\n</template>\n\n<script>\n    import { mapState } from \'vuex\'\n    import QuestionsTable from \'./Question/Table.vue\'\n    import PendingQuestionsTable from \'./PendingQuestion/Table.vue\'\n    import AnswersTable from \'./Answer/Table.vue\'\n    import StatisticsTable from \'./Statistics/Table.vue\'\n    import TopicsTable from \'./Topic/Table.vue\'\n    import { library } from \'@fortawesome/fontawesome-svg-core\'\n    import { faTimes, faTable } from \'@fortawesome/free-solid-svg-icons\'\n\n    library.add(faTimes)\n    library.add(faTable)\n\n    export default {\n        components: {\n            QuestionsTable,\n            PendingQuestionsTable,\n            AnswersTable,\n            StatisticsTable,\n            TopicsTable\n        },\n        data() {\n            return {\n                tabIndex: 0,\n                selectedLanguage: null,\n                isBusy: false,\n                showStatistics: false\n            }\n        },\n        computed: {\n            ...mapState({\n                languages: state => state.app.languages,\n                topics: state => state.topics.items\n            }),\n            questions() {\n                return this.$store.getters[\'questions/forReview\']\n            },\n            pendingQuestions() {\n                return this.$store.getters[\'pendingQuestions/forReview\']\n            },\n            answers() {\n                return this.$store.getters[\'answers/forReview\']\n            }\n        },\n        methods: {\n            tabTitleBadgeVariant(index) {\n                return this.tabIndex === index ? \'light\' : \'secondary\'\n            },\n            onLanguageSelected(language) {\n                if (this.selectedLanguage && language && this.selectedLanguage.code !== language.code) {\n                    this.isBusy = true\n                    this.selectedLanguage = language\n\n                    setTimeout(() => {\n                        this.isBusy = false\n                    }, 500)\n                } else {\n                    this.selectedLanguage = language\n                }\n            },\n            onToggleStatistics() {\n                this.showStatistics = !this.showStatistics\n            }\n        },\n        created() {\n            this.$store.dispatch(\'answers/preloadAllAnswers\')\n            this.$store.dispatch(\'questions/preloadAllQuestions\')\n            this.$store.dispatch(\'pendingQuestions/preloadAllPendingQuestions\')\n            this.$store.dispatch(\'topics/preloadAllTopics\')\n        }\n    }\n<\/script>\n\n<style scoped>\n.fade-enter-active, .fade-leave-active {\n  transition: opacity .5s;\n}\n.fade-enter, .fade-leave-to {\n  opacity: 0;\n}\ntable.b-table[aria-busy=\'true\'] {\n  opacity: 0.6;\n}\n</style>\n'],sourceRoot:""}]);const o=i},158:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var s=n(4015),a=n.n(s),r=n(3645),i=n.n(r)()(a());i.push([t.id,".popover-preserve-new-lines .popover-body{white-space:pre-wrap}","",{version:3,sources:["webpack://./resources/js/components/Question/Table.vue"],names:[],mappings:"AAmRA,0CACA,oBACA",sourcesContent:["<template>\n    <div>\n        <question-edit :question=\"question\" :language=\"language\" v-if=\"language && question\"></question-edit>\n        <question-review :question=\"question\" v-if=\"!language && question\"></question-review>\n        <answer-edit :answer=\"answer\" :language=\"language\" v-if=\"language && answer\"></answer-edit>\n        <answer-review :answer=\"answer\" v-if=\"!language && answer\"></answer-review>\n\n        <h3>Questions</h3>\n\n        <table-search-descriptions></table-search-descriptions>\n\n        <b-table\n            striped\n            hover\n            :fields=\"fields\"\n            :items=\"filteredItems\"\n            primary-key=\"id\"\n            thead-class=\"text-center\"\n            stacked=\"lg\"\n            :per-page=\"perPage\"\n            :current-page=\"currentPage\"\n            :sort-by.sync=\"sortBy\"\n            :sort-desc.sync=\"sortDesc\"\n            :busy=\"isBusy\"\n        >\n            <template v-slot:cell(id)=\"data\">\n                {{ data.value }}\n            </template>\n\n            <template v-slot:cell(question)=\"data\" v-if=\"language\">\n                <b-button\n                    variant=\"link\"\n                    :class=\"{ 'text-secondary': !hasDescription(data.item) }\"\n                    @click=\"onOpenModal(data.item)\"\n                >\n                    {{ descriptionOrPlaceholderText(data.item) }}\n                </b-button>\n            </template>\n\n            <template v-slot:cell(english_translation)=\"data\">\n                <b-button\n                    variant=\"link\"\n                    @click=\"onOpenModal(data.item)\"\n                >\n                    {{ data.item.descriptions.en }}\n                </b-button>\n            </template>\n\n            <template v-slot:cell(category)=\"data\">\n                {{ data.item.topic ? data.item.topic.description : null }}\n            </template>\n\n            <template v-slot:cell(answer)=\"data\">\n                <b-button-group v-if=\"data.item.answer\">\n                    <b-button\n                        variant=\"outline-secondary\"\n                        v-b-popover.hover.click.blur.top=\"answerPopoverData(data.item)\"\n                    >\n                        <font-awesome-icon :icon=\"['fas', 'info-circle']\" />\n                    </b-button>\n                    <b-button\n                        variant=\"outline-secondary\"\n                        v-b-popover.hover.click.blur.top=\"answerLanguagesPopoverData(data.item.answer)\"\n                    >\n                        {{ answerDescriptionsCount(data.item.answer) }} / {{ totalLanguages }}\n                    </b-button>\n                    <b-button\n                        variant=\"outline-secondary\"\n                        @click=\"onOpenAnswerModal(data.item)\"\n                    >\n                        <font-awesome-icon :icon=\"['fa', 'edit']\" />\n                    </b-button>\n                </b-button-group>\n            </template>\n\n            <template v-slot:cell(languages)=\"data\">\n                <b-button\n                    pill\n                    :variant=\"languagesButtonVariant(data.item)\"\n                    v-b-popover.hover.click.blur.top=\"languagesPopoverData(data.item)\"\n                >\n                    {{ descriptionsCount(data.item) }} / {{ totalLanguages }}\n                </b-button>\n            </template>\n\n            <template v-slot:cell(date)=\"data\">\n                {{ formatDate(data.value) }}\n            </template>\n\n            <template v-slot:cell(status)=\"data\">\n                {{ data.item.status.status }}\n            </template>\n        </b-table>\n\n        <b-pagination\n          v-model=\"currentPage\"\n          :total-rows=\"totalRows\"\n          :per-page=\"perPage\"\n          align=\"center\"\n          v-if=\"totalRows > perPage\"\n        ></b-pagination>\n    </div>\n</template>\n\n<script>\n    import { mapState, mapGetters } from 'vuex'\n    import QuestionEdit from './Edit.vue'\n    import QuestionReview from './Review.vue'\n    import AnswerEdit from '../Answer/Edit.vue'\n    import AnswerReview from '../Answer/Review.vue'\n    import TableSearchDescriptions from '../TableSearchDescriptions.vue'\n    import TableHelpers from '../../mixins/TableHelpers'\n    import TableSearchHelpers from '../../mixins/TableSearchHelpers'\n    import { library } from '@fortawesome/fontawesome-svg-core'\n    import { faInfoCircle, faEdit } from '@fortawesome/free-solid-svg-icons'\n\n    library.add(faInfoCircle)\n    library.add(faEdit)\n\n    export default {\n        props: ['items', 'language', 'isBusy'],\n        mixins: [TableHelpers, TableSearchHelpers],\n        components: {\n            QuestionEdit,\n            QuestionReview,\n            AnswerEdit,\n            AnswerReview,\n            TableSearchDescriptions\n        },\n        computed: {\n            ...mapState({\n                perPage: state => state.app.itemsPerPage\n            }),\n            ...mapGetters({\n                answers: 'answers/forQuestion'\n            }),\n            fields() {\n                const fields = [\n                    {\n                        key: 'id',\n                        label: 'ID',\n                        sortable: true,\n                        tdClass: ['align-middle', 'text-center']\n                    },\n                    {\n                        key: 'question',\n                        sortable: false,\n                        tdClass: ['align-middle', 'text-center']\n                    },\n                    {\n                        key: 'english_translation',\n                        sortable: false,\n                        tdClass: ['align-middle', 'text-center']\n                    },\n                    {\n                        key: 'category',\n                        sortable: false,\n                        tdClass: ['align-middle', 'text-center']\n                    },\n                                       {\n                        key: 'answer',\n                        sortable: false,\n                        tdClass: ['align-middle', 'text-center']\n                    },\n                    {\n                        key: 'date',\n                        sortable: false,\n                        tdClass: ['align-middle', 'text-center']\n                    },\n                    {\n                        key: 'languages',\n                        sortable: false,\n                        tdClass: ['align-middle', 'text-center']\n                    },\n                    {\n                        key: 'status',\n                        sortable: false,\n                        tdClass: (value, key, item) => {\n                            let classes = ['align-middle', 'text-center']\n\n                            switch(value.value) {\n                                case 'in_translation':\n                                    classes.push('table-warning')\n                                    break\n                                case 'translated':\n                                    classes.push('table-info')\n                                    break\n                                case 'published':\n                                    classes.push('table-success')\n                            }\n\n                            return classes\n                        },\n                    }\n                ]\n\n                if (!this.language) {\n                    return fields.filter(field => field.key !== 'question')\n                }\n\n                return fields\n            },\n            modalId() {\n                const type = this.language ? 'edit' : 'review'\n                return `question-${type}`\n            },\n            answerModalId() {\n                const type = this.language ? 'edit' : 'review'\n                return `answer-${type}`\n            }\n        },\n        data() {\n            return {\n                currentPage: 1,\n                sortBy: 'id',\n                sortDesc: true,\n                question: null,\n                answer: null\n            }\n        },\n        methods: {\n            descriptionsCount(item) {\n                return Object.keys(item.descriptions).length\n            },\n            hasDescription(item) {\n                return item.descriptions.hasOwnProperty(this.language) && item.descriptions[this.language].trim()\n            },\n            descriptionOrPlaceholderText(item) {\n                return this.hasDescription(item) ? item.descriptions[this.language] : 'Add translation'\n            },\n            answerPopoverData(item) {\n                const answer = this.answers.find(answer => answer.id === item.answer)\n                const language = this.language ? this.language : 'en'\n\n                return {\n                    content: answer ? this.descriptionInLanguageOrEnglish(answer.descriptions, language) : '',\n                    customClass: 'popover-preserve-new-lines'\n                }\n            },\n            onOpenModal(question) {\n                this.question = question\n                this.$nextTick(() => {\n                    this.$bvModal.show(this.modalId)\n                })\n            },\n            onOpenAnswerModal(question) {\n                const answer = this.answers.find(answer => answer.id === question.answer)\n\n                if (answer) {\n                    this.answer = answer\n                    this.$nextTick(() => {\n                        this.$bvModal.show(this.answerModalId)\n                    })\n                }\n            },\n            answerDescriptionsCount(id) {\n                const answer = this.answers.find(answer => answer.id === id)\n\n                return answer ? this.descriptionsCount(answer) : 0\n            },\n            answerLanguagesPopoverData(id) {\n                const answer = this.answers.find(answer => answer.id === id)\n\n                return answer ? this.languagesPopoverData(answer) : {}\n            }\n        },\n        created() {\n            this.$store.dispatch('questions/preloadStates')\n            this.$store.dispatch('topics/preloadAllTopics')\n            this.$store.dispatch('answers/preloadStates')\n        }\n    }\n<\/script>\n\n<style>\n.popover-preserve-new-lines .popover-body{\n    white-space: pre-wrap;\n}\n</style>\n"],sourceRoot:""}]);const o=i},8830:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var s=n(4015),a=n.n(s),r=n(3645),i=n.n(r)()(a());i.push([t.id,".fade-enter-active[data-v-4ab0644c],.fade-leave-active[data-v-4ab0644c]{transition:opacity .5s}.fade-enter[data-v-4ab0644c],.fade-leave-to[data-v-4ab0644c]{opacity:0}","",{version:3,sources:["webpack://./resources/js/components/Statistics/Table.vue"],names:[],mappings:"AAoIA,wEACA,sBACA,CACA,6DACA,SACA",sourcesContent:["<template>\n    <div>\n        <transition name=\"fade\" mode=\"out-in\">\n            <div class=\"d-flex justify-content-center\" v-if=\"!statistics\">\n                <b-spinner type=\"grow\" label=\"Loading statistics data\" small variant=\"secondary\"></b-spinner>\n            </div>\n\n            <b-table\n                striped\n                hover\n                :fields=\"fields\"\n                :items=\"languages\"\n                primary-key=\"id\"\n                thead-class=\"text-center\"\n                stacked=\"lg\"\n                v-if=\"statistics\"\n            >\n                <template v-slot:cell(name)=\"data\">\n                    {{ data.value }}\n                </template>\n\n                <template v-slot:cell(questions)>\n                    {{ statistics.questions.count }}\n                </template>\n\n                <template v-slot:cell(questions_translated)=\"data\">\n                    {{ questionTranslationsCount(data.item) }}\n                </template>\n\n                <template v-slot:cell(answers)>\n                    {{ statistics.answers.count }}\n                </template>\n\n                <template v-slot:cell(answers_translated)=\"data\">\n                    {{ answerTranslationsCount(data.item) }}\n                </template>\n            </b-table>\n        </transition>\n    </div>\n</template>\n\n<script>\n    import { mapState } from 'vuex'\n\n    export default {\n        computed: {\n            ...mapState({\n                languages: state => state.app.languages\n            }),\n            fields() {\n                const fields = [\n                    {\n                        key: 'name',\n                        label: 'Language',\n                        sortable: false,\n                        tdClass: ['align-middle', 'text-center']\n                    },\n                    {\n                        key: 'questions',\n                        sortable: false,\n                        tdClass: ['align-middle', 'text-center', 'table-success']\n                    },\n                    {\n                        key: 'questions_translated',\n                        sortable: false,\n                        tdClass: (value, key, item) => {\n                            let classes = ['align-middle', 'text-center']\n\n                            if (this.questionTranslationsCount(item) === this.statistics.questions.count) {\n                                classes.push('table-success')\n                            } else {\n                                classes.push('table-warning')\n                            }\n\n                            return classes\n                        }\n                    },\n                    {\n                        key: 'answers',\n                        sortable: false,\n                        tdClass: ['align-middle', 'text-center', 'table-success']\n                    },\n                    {\n                        key: 'answers_translated',\n                        sortable: false,\n                        tdClass: (value, key, item) => {\n                            let classes = ['align-middle', 'text-center']\n\n                            if (this.answerTranslationsCount(item) === this.statistics.answers.count) {\n                                classes.push('table-success')\n                            } else {\n                                classes.push('table-warning')\n                            }\n\n                            return classes\n                        }\n                    }\n                ]\n\n                return fields\n            }\n        },\n        data() {\n            return {\n                statistics: null\n            }\n        },\n        methods: {\n            questionTranslationsCount(language) {\n                const item = this.statistics.questions.translations.find(translation => language.code === translation.code)\n\n                return item ? item.count : 0\n            },\n            answerTranslationsCount(language) {\n                const item = this.statistics.answers.translations.find(translation => language.code === translation.code)\n\n                return item ? item.count : 0\n            }\n        },\n        created() {\n            axios.get('/statistics')\n            .then(response => {\n                this.statistics = response.data\n            })\n            .catch(error => {\n                console.error('Statistics loading:', error)\n            })\n        }\n    }\n<\/script>\n\n<style scoped>\n.fade-enter-active, .fade-leave-active {\n  transition: opacity .5s;\n}\n.fade-enter, .fade-leave-to {\n  opacity: 0;\n}\n</style>"],sourceRoot:""}]);const o=i},7404:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var s=n(4015),a=n.n(s),r=n(3645),i=n.n(r)()(a());i.push([t.id,"h3>.spinner-grow[data-v-5221dd26]{vertical-align:middle}","",{version:3,sources:["webpack://./resources/js/components/Topic/Table.vue"],names:[],mappings:"AAyNA,kCACA,qBACA",sourcesContent:["<template>\n    <div>\n        <topic-create></topic-create>\n        <topic-edit :topic=\"topic\" v-if=\"topic\"></topic-edit>\n\n        <h3>\n            Categories\n            <b-spinner type=\"grow\" label=\"Loading categories data\" small variant=\"secondary\" v-if=\"isLoadingData\"></b-spinner>\n        </h3>\n\n        <table-search-descriptions></table-search-descriptions>\n\n        <b-button\n            v-b-modal=\"'topic-create'\"\n            variant=\"primary\"\n            class=\"mb-4\"\n            v-b-tooltip\n            title=\"Add new category\"\n        >\n            <font-awesome-icon :icon=\"['fas', 'plus']\" />\n        </b-button>\n\n        <b-table\n            striped\n            hover\n            :fields=\"fields\"\n            :items=\"filteredItems\"\n            primary-key=\"id\"\n            thead-class=\"text-center\"\n            stacked=\"lg\"\n            :per-page=\"perPage\"\n            :current-page=\"currentPage\"\n            :sort-by.sync=\"sortBy\"\n            :sort-desc.sync=\"sortDesc\"\n            :busy=\"isBusy\"\n        >\n            <template v-slot:cell(id)=\"data\">\n                {{ data.value }}\n            </template>\n\n            <template v-slot:cell(description)=\"data\">\n                {{ data.value }}\n            </template>\n\n            <template v-slot:cell(created_at)=\"data\">\n                {{ formatDate(data.value) }}\n            </template>\n\n            <template v-slot:cell(updated_at)=\"data\">\n                {{ formatDate(data.value) }}\n            </template>\n\n            <template v-slot:cell(actions)=\"data\">\n                <b-button-group>\n                    <b-button\n                        variant=\"success\"\n                        @click=\"onOpenModal(data.item)\"\n                        v-b-tooltip\n                        title=\"Edit\"\n                    >\n                        <font-awesome-icon :icon=\"['fas', 'edit']\" />\n                    </b-button>\n                    <b-button\n                        variant=\"danger\"\n                        @click=\"showDeleteConfirmation(data.item)\"\n                        v-b-tooltip\n                        title=\"Delete\"\n                    >\n                        <font-awesome-icon :icon=\"['fas', 'trash']\" />\n                    </b-button>\n                </b-button-group>\n            </template>\n        </b-table>\n\n        <b-pagination\n            v-model=\"currentPage\"\n            :total-rows=\"totalRows\"\n            :per-page=\"perPage\"\n            align=\"center\"\n            v-if=\"totalRows > perPage\"\n        ></b-pagination>\n    </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport TopicCreate from './Create.vue'\nimport TopicEdit from './Edit.vue'\nimport TableSearchDescriptions from '../TableSearchDescriptions.vue'\nimport TableHelpers from '../../mixins/TableHelpers'\nimport TableSearchHelpers from '../../mixins/TableSearchHelpers'\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport { faPlus, faEdit, faTrash } from '@fortawesome/free-solid-svg-icons'\n\nlibrary.add(faPlus, faEdit, faTrash)\n\nexport default {\n    props: ['items', 'isBusy'],\n    mixins: [TableHelpers, TableSearchHelpers],\n    components: {\n        TopicCreate,\n        TopicEdit,\n        TableSearchDescriptions\n    },\n    computed: {\n        filteredItems() {\n            // Override search method\n            if (this.form.search !== '') {\n                return this.items.filter(item => {\n                    return item.description.toLowerCase().includes(this.form.search.toLowerCase())\n                })\n            }\n\n            return this.items\n        },\n        ...mapState({\n            perPage: state => state.app.itemsPerPage\n        }),\n        fields() {\n            const fields = [\n                {\n                    key: 'id',\n                    label: 'ID',\n                    sortable: true,\n                    tdClass: ['align-middle', 'text-center']\n                },\n                {\n                    key: 'description',\n                    sortable: false,\n                    tdClass: ['align-middle', 'text-center']\n                },\n                {\n                    key: 'created_at',\n                    sortable: false,\n                    tdClass: ['align-middle', 'text-center']\n                },\n                {\n                    key: 'updated_at',\n                    sortable: false,\n                    tdClass: ['align-middle', 'text-center']\n                },\n                {\n                    key: 'actions',\n                    label: '',\n                    sortable: false,\n                    tdClass: ['align-middle', 'text-right']\n                }\n            ]\n\n            return fields\n        },\n        modalId() {\n            const type = 'edit'\n            return `topic-${type}`\n        },\n    },\n    data() {\n        return {\n            currentPage: 1,\n            sortBy: 'id',\n            sortDesc: true,\n            topic: null,\n            isLoadingData: false\n        }\n    },\n    methods: {\n        onOpenModal(topic) {\n            this.topic = topic\n            this.$nextTick(() => {\n                this.$bvModal.show(this.modalId)\n            })\n        },\n        showDeleteConfirmation(topic) {\n            this.$bvModal.msgBoxConfirm(`Are you sure you want to delete category with ID of ${topic.id}?`,\n                {\n                    title: 'Please confirm',\n                    size: 'sm',\n                    buttonSize: 'sm',\n                    okVariant: 'danger',\n                    okTitle: 'Confirm',\n                    cancelTitle: 'Cancel',\n                    footerClass: 'p-2',\n                    hideHeaderClose: false,\n                    centered: true\n                })\n                .then(value => {\n                    if (value) {\n                        axios.delete(`/topics/${topic.id}`)\n                            .then(response => {\n                                this.$store.dispatch('topics/deleteTopic', response.data)\n                            })\n                            .catch(error => {\n                                console.error(error)\n                                this.displayHttpError(error)\n                            })\n                    }\n                })\n                .catch(err => {\n                    console.error('Delete topic confirmation dialog error', err)\n                })\n        }\n    },\n    created() {\n        this.isLoadingData = true;\n        this.$store.dispatch('topics/loadAllTopics')\n            .then(() => {\n                this.isLoadingData = false\n            })\n            .catch(error => {\n                this.isLoadingData = false\n                console.error(error)\n            })\n    }\n}\n<\/script>\n\n<style scoped>\nh3 > .spinner-grow {\n    vertical-align: middle;\n}\n</style>\n"],sourceRoot:""}]);const o=i},4186:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var s=n(4015),a=n.n(s),r=n(3645),i=n.n(r)()(a());i.push([t.id,".badge[data-v-7aa41ab6]:not(:last-child){margin-right:5px}","",{version:3,sources:["webpack://./resources/js/components/User/Table.vue"],names:[],mappings:"AA+TA,yCACA,gBACA",sourcesContent:["<template>\n    <div>\n        <user-create :language-options=\"languageOptions\" :role-options=\"roleOptions\"></user-create>\n        <user-edit :user=\"user\" :language-options=\"languageOptions\" :role-options=\"roleOptions\" v-if=\"user\"></user-edit>\n\n        <h3>Users</h3>\n\n        <b-button\n            v-b-modal=\"'user-create'\"\n            variant=\"primary\"\n            class=\"my-4\"\n            v-b-tooltip.right=\"'Add new user'\"\n        >\n            <font-awesome-icon :icon=\"['fas', 'user-plus']\" size=\"lg\" />\n        </b-button>\n        \n        <b-table\n            striped\n            hover\n            :fields=\"fields\"\n            :items=\"items\"\n            primary-key=\"id\"\n            thead-class=\"text-center\"\n            stacked=\"lg\"\n            :per-page=\"perPage\"\n            :current-page=\"currentPage\"\n            :sort-by.sync=\"sortBy\"\n            :sort-desc.sync=\"sortDesc\"\n            :busy=\"isBusy\"\n        >\n            <template v-slot:cell(id)=\"data\">\n                {{ data.value }}\n            </template>\n\n            <template v-slot:cell(name)=\"data\">\n                {{ data.value }}\n            </template>\n\n            <template v-slot:cell(email)=\"data\">\n                <a :href=\"formatMailto(data.value)\">\n                    {{ data.value }}\n                </a>\n            </template>\n\n            <template v-slot:cell(email_verified_at)=\"data\">\n                <b-button\n                    pill\n                    variant=\"outline-success\"\n                    v-b-tooltip\n                    :title=\"formatDate(data.value)\"\n                    v-if=\"!!data.value\"\n                >\n                    <font-awesome-icon :icon=\"['fas', 'user-check']\" size=\"lg\" />\n                </b-button>\n                <b-button\n                    pill\n                    variant=\"outline-secondary\"\n                    disabled\n                    v-if=\"!data.value\"\n                >\n                    <font-awesome-icon :icon=\"['fas', 'user-check']\" size=\"lg\" />\n                </b-button>\n            </template>\n\n            \n            <template v-slot:cell(created_at)=\"data\">\n                {{ formatDate(data.value) }}\n            </template>\n\n            <template v-slot:cell(language)=\"data\">\n                {{ formatLanguage(data.value) }}\n            </template>\n\n            <template v-slot:cell(roles)=\"data\">\n                <b-badge v-for=\"role in data.value\" v-bind:key=\"role.id\" pill>{{ capitalize(role.name) }}</b-badge>\n            </template>\n\n            <template v-slot:cell(actions)=\"data\">\n                <b-button-group>\n                    <b-button\n                        variant=\"success\"\n                        @click=\"onEditUser(data.item)\"\n                        v-b-tooltip\n                        title=\"Edit user\"\n                    >\n                        <font-awesome-icon :icon=\"['fas', 'user-edit']\" size=\"lg\" />\n                    </b-button>\n                    <b-button\n                        variant=\"danger\"\n                        @click=\"onDeleteUser(data.item)\"\n                        v-b-tooltip\n                        title=\"Delete user\"\n                        :disabled=\"data.item.id === currentUser.id\"\n                    >\n                        <font-awesome-icon :icon=\"['fas', 'user-minus']\" size=\"lg\" />\n                    </b-button>\n                </b-button-group>\n            </template>\n        </b-table>\n\n        <b-pagination\n          v-model=\"currentPage\"\n          :total-rows=\"totalRows\"\n          :per-page=\"perPage\"\n          align=\"center\"\n          v-if=\"totalRows > perPage\"\n        ></b-pagination>\n    </div>\n</template>\n\n<script>\n    import { mapState } from 'vuex'\n    import UserCreate from './Create.vue'\n    import UserEdit from './Edit.vue'\n    import ToastHelpers from '../../mixins/ToastHelpers'\n    import { library } from '@fortawesome/fontawesome-svg-core'\n    import { faUserCheck, faUserEdit, faUserPlus, faUserMinus } from '@fortawesome/free-solid-svg-icons'\n\n    library.add(faUserCheck)\n    library.add(faUserEdit)\n    library.add(faUserPlus)\n    library.add(faUserMinus)\n\n    export default {\n        components: {\n            UserCreate,\n            UserEdit\n        },\n        mixins: [ToastHelpers],\n        computed: {\n            ...mapState({\n                perPage: state => state.app.itemsPerPage,\n                currentUser: state => state.app.user,\n                languages: state => state.app.languages\n            }),\n            totalRows() {\n                return this.items.length\n            },\n            fields() {\n                const fields = [\n                    {\n                        key: 'id',\n                        label: 'ID',\n                        sortable: true,\n                        tdClass: ['align-middle', 'text-center']\n                    },\n                    {\n                        key: 'name',\n                        sortable: false,\n                        tdClass: ['align-middle', 'text-center']\n                    },\n                    {\n                        key: 'email',\n                        sortable: false,\n                        tdClass: ['align-middle', 'text-center']\n                    },\n                    {\n                        key: 'email_verified_at',\n                        label: 'Verified',\n                        sortable: false,\n                        tdClass: ['align-middle', 'text-center']\n                    },\n                    {\n                        key: 'created_at',\n                        sortable: false,\n                        tdClass: ['align-middle', 'text-center']\n                    },\n                    {\n                        key: 'language',\n                        sortable: false,\n                        tdClass: ['align-middle', 'text-center']\n                    },\n                    {\n                        key: 'roles',\n                        sortable: false,\n                        tdClass: ['align-middle', 'text-center']\n                    },\n                    {\n                        key: 'actions',\n                        label: '',\n                        sortable: false,\n                        tdClass: ['align-middle', 'text-center']\n                    }\n                ]\n\n                return fields\n            },\n            roleOptions() {\n                return this.roles.map(role => {\n                    return {\n                        value: role.id,\n                        text: this.capitalize(role.name)\n                    }\n                })\n            },\n            languageOptions() {\n                return this.languages.map(language => {\n                    return {\n                        value: language.id,\n                        text: language.name\n                    }\n                })\n            }\n        },\n        data() {\n            return {\n                currentPage: 1,\n                sortBy: 'id',\n                sortDesc: true,\n                items: [],\n                isBusy: true,\n                user: null,\n                roles: []\n            }\n        },\n        methods: {\n            formatDate(dateString) {\n                const date = new Date(dateString)\n                \n                return `${date.getDate().toString().padStart(2, '0')}.${(date.getMonth() + 1).toString().padStart(2, '0')}.${date.getFullYear()} ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`\n            },\n            formatMailto(emailString) {\n                return `mailto:${emailString}`\n            },\n            onEditUser(user) {\n                this.user = user\n                this.$nextTick(() => {\n                    this.$bvModal.show('user-edit')\n                })\n            },\n            capitalize(string) {\n                return string.charAt(0).toUpperCase() + string.slice(1)\n            },\n            onDeleteUser(user) {\n                this.$bvModal.msgBoxConfirm(`Please confirm that you really want to delete user ${user.name}.`, {\n                    title: 'Please Confirm',\n                    size: 'sm',\n                    buttonSize: 'sm',\n                    okVariant: 'danger',\n                    okTitle: 'YES',\n                    cancelTitle: 'NO',\n                    footerClass: 'p-2',\n                    hideHeaderClose: false,\n                    centered: true\n                })\n                .then(value => {\n                    if (value) {\n                        this.isBusy = true\n                        axios.delete(`/users/${user.id}`)\n                        .then(response => {\n                            this.isBusy = false\n\n                            const index = this.items.findIndex(item => {\n                                return item.id === user.id\n                            })\n\n                            if (index !== -1) {\n                                this.items.splice(index, 1)\n                            }\n                        })\n                        .catch(error => {\n                            this.isBusy = false\n                            console.error('User delete:', error)\n\n                            this.displayHttpError(error)\n                        })\n                    }\n                })\n                .catch(err => {\n                    console.log('User delete confirmation error:', err)\n                })\n            },\n            formatLanguage(id) {\n                const language = this.languages.find(language => language.id === id)\n\n                return language ? language.name : id\n            }\n        },\n        created() {\n            axios.get('/users')\n            .then(response => {\n                this.isBusy = false\n                this.items = response.data.data\n            })\n            .catch(error => {\n                this.isBusy = false\n                console.error('Users loading:', error)\n            })\n\n            axios.get('/users/roles')\n            .then(response => {\n                this.isBusy = false\n                this.roles = response.data.data\n            })\n            .catch(error => {\n                this.isBusy = false\n                console.error('Roles loading:', error)\n            })\n\n            this.$root.$on('userCreated', user => {\n                this.items.push(user)\n            })\n\n            this.$root.$on('userUpdated', user => {\n                const index = this.items.findIndex(item => {\n                    return item.id === user.id\n                })\n                \n                if (index !== -1) {\n                    Vue.set(this.items, index, user)\n                } else {\n                    console.warn('Index not found, could not update a user:', user)\n                }\n            })\n        }\n    }\n<\/script>\n\n<style scoped>\n.badge:not(:last-child) {\n    margin-right: 5px;\n}\n</style>\n"],sourceRoot:""}]);const o=i},5067:()=>{},4061:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var s=n(629);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const o={props:["language","answer"],mixins:[n(6077).Z],computed:r(r({},(0,s.rn)({languages:function(t){return t.app.languages}})),{},{modalId:function(){return"answer-edit"},totalLanguages:function(){return this.$store.getters["app/totalLanguages"]},isEnglish:function(){return"en"===this.language}}),data:function(){return{form:{answer:"",translation:"",translated:!1,state:{answer:null,translation:null}},isBusy:!1}},methods:{resetModal:function(){this.form.answer=this.answer.descriptions.hasOwnProperty(this.language)?this.answer.descriptions[this.language]:"",this.form.translation=this.answer.descriptions.en,this.form.translated=!1,this.form.state={answer:this.form.answer.length>0,translation:this.form.translation.length>0}},canEdit:function(){return"in_translation"===this.answer.status.value||"translated"===this.answer.status.value},canSave:function(){return this.canEdit()&&(this.isEnglish?this.form.state.answer:this.form.state.answer&&this.form.state.translation)},canChangeStatus:function(){return"in_translation"===this.answer.status.value&&this.form.state.answer&&this.form.state.translation},handleSave:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;if(this.$refs.form.checkValidity()){this.isBusy=!0;var e={descriptions:[]};this.isEnglish||e.descriptions.push({code:"en",value:this.form.translation}),e.descriptions.push({code:this.language,value:this.form.answer}),this.form.translated&&(e.status="translated"),axios.put("/answers/".concat(this.answer.id),e).then((function(e){t.isBusy=!1,t.$store.dispatch("answers/updateAnswer",e.data),t.$nextTick((function(){t.$bvModal.hide(t.modalId)}))})).catch((function(e){t.isBusy=!1,console.error(e),t.displayHttpError(e)}))}},answerLabel:function(t){var e=this.languages.find((function(e){return e.code===t}));return"Answer in ".concat(e?e.name:t)},updateInputState:function(t,e){this.form.state[t]=e.length>0}}};const l=(0,n(1900).Z)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:t.modalId,title:"Edit answer","ok-title":"Save","ok-disabled":!t.canSave(),busy:t.isBusy},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleSave}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{id:"input-group-answer",label:t.answerLabel(t.language),"label-for":"input-answer","invalid-feedback":"Answer is required",state:t.form.state.answer}},[n("b-form-textarea",{attrs:{id:"input-answer",required:"",state:t.form.state.answer,rows:"2","max-rows":"6",trim:"",disabled:!t.canEdit()},on:{update:function(e){for(var n=arguments.length,s=Array(n);n--;)s[n]=arguments[n];return t.updateInputState.apply(void 0,["answer"].concat(s))}},model:{value:t.form.answer,callback:function(e){t.$set(t.form,"answer",e)},expression:"form.answer"}})],1),t._v(" "),t.isEnglish?t._e():n("b-form-group",{attrs:{id:"input-group-translation",label:t.answerLabel("en"),"label-for":"input-translation","invalid-feedback":"English translation is required",state:t.form.state.translation}},[n("b-form-textarea",{attrs:{id:"input-translation",required:"",state:t.form.state.translation,rows:"2","max-rows":"6",trim:"",disabled:!t.canEdit()},on:{update:function(e){for(var n=arguments.length,s=Array(n);n--;)s[n]=arguments[n];return t.updateInputState.apply(void 0,["translation"].concat(s))}},model:{value:t.form.translation,callback:function(e){t.$set(t.form,"translation",e)},expression:"form.translation"}})],1),t._v(" "),n("b-form-group",{attrs:{description:"Changing status to Translated will send the answer for review by SELFIE master. You and other Language Experts would still be able to make changes as needed."}},[n("b-form-checkbox",{attrs:{name:"translated",switch:"",disabled:!t.canChangeStatus()},model:{value:t.form.translated,callback:function(e){t.$set(t.form,"translated",e)},expression:"form.translated"}},[n("b",[t._v("Change status to translated")])])],1)],1)])}),[],!1,null,null,null).exports},2266:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var s=n(629);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const o={props:["answer"],mixins:[n(6077).Z],computed:r(r({},(0,s.rn)({languages:function(t){return t.app.languages},states:function(t){return t.answers.states}})),{},{modalId:function(){return"answer-review"},totalLanguages:function(){return this.$store.getters["app/totalLanguages"]},statusOptions:function(){var t=this;return this.states.map((function(e){return{value:e.value,text:e.text,disabled:-1===t.answer.status.transitionable.indexOf(e.value)&&t.answer.status.value!==e.value}}))}}),data:function(){return{form:{answer:{},status:"",state:{}},isBusy:!1}},methods:{resetModal:function(){var t=this,e={},n={};Object.values(this.languages).forEach((function(s){var a=s.code;e[a]=t.answer.descriptions.hasOwnProperty(a)?t.answer.descriptions[a]:"",n[a]=!!e[a]||null})),this.form.answer=e,this.form.state=n,this.form.status=this.answer.status.value},canEdit:function(){return!0},canSave:function(){return this.canEdit()&&Object.values(this.form.state).every((function(t){return!0===t}))},handleSave:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;if(this.$refs.form.checkValidity()){this.isBusy=!0;var e={descriptions:[],status:this.form.status};e.descriptions=Object.entries(this.form.answer).map((function(t){return{code:t[0],value:t[1]}})),axios.put("/answers/".concat(this.answer.id),e).then((function(e){t.isBusy=!1,t.$store.dispatch("answers/updateAnswer",e.data),t.$nextTick((function(){t.$bvModal.hide(t.modalId)}))})).catch((function(e){t.isBusy=!1,console.error(e),t.displayHttpError(e)}))}},formGroupId:function(t){return"input-group-answer-".concat(t.code)},formGroupLabel:function(t){return"Answer in ".concat(t.name)},formInputId:function(t){return"input-answer-".concat(t.code)},updateInputState:function(t,e){this.form.state[t]=e.length>0}}};const l=(0,n(1900).Z)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:t.modalId,title:"Review answer","ok-title":"Save","ok-disabled":!t.canSave(),busy:t.isBusy},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleSave}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[t._l(t.languages,(function(e){return n("b-form-group",{key:e.code,attrs:{id:t.formGroupId(e),label:t.formGroupLabel(e),"label-for":t.formInputId(e),"invalid-feedback":"Answer text is required",state:t.form.state[e.code]}},[n("b-form-textarea",{attrs:{id:t.formInputId(e),required:"",state:t.form.state[e.code],rows:"2","max-rows":"6",trim:"",disabled:!t.canEdit()},on:{update:function(n){for(var s=arguments.length,a=Array(s);s--;)a[s]=arguments[s];return t.updateInputState.apply(void 0,[e.code].concat(a))}},model:{value:t.form.answer[e.code],callback:function(n){t.$set(t.form.answer,e.code,n)},expression:"form.answer[language.code]"}})],1)})),t._v(" "),n("b-form-group",{attrs:{id:"input-group-status",label:"Status","label-for":"input-status",description:"Published status means that current answer is fully translated and available to the chatbot service."}},[n("b-form-select",{attrs:{options:t.statusOptions,id:"input-status",disabled:!t.canEdit()},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)],2)])}),[],!1,null,null,null).exports},9165:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var s=n(629),a=n(4061),r=n(2266),i=n(4858),o=n(5494),l=n(5756);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const p={props:["items","language","isBusy"],mixins:[o.Z,l.Z],components:{AnswerEdit:a.Z,AnswerReview:r.Z,TableSearchDescriptions:i.Z},computed:c(c({},(0,s.rn)({perPage:function(t){return t.app.itemsPerPage}})),{},{fields:function(){var t=[{key:"id",label:"ID",sortable:!0,tdClass:["align-middle","text-center"]},{key:"answer",sortable:!1,tdClass:["align-middle","text-center"]},{key:"english_translation",sortable:!1,tdClass:["align-middle","text-center"]},{key:"date",sortable:!1,tdClass:["align-middle","text-center"]},{key:"languages",sortable:!1,tdClass:["align-middle","text-center"]},{key:"status",sortable:!1,tdClass:function(t,e,n){var s=["align-middle","text-center"];switch(t.value){case"in_translation":s.push("table-warning");break;case"translated":s.push("table-info");break;case"published":s.push("table-success")}return s}}];return this.language?t:t.filter((function(t){return"answer"!==t.key}))},modalId:function(){var t=this.language?"edit":"review";return"answer-".concat(t)}}),data:function(){return{currentPage:1,sortBy:"id",sortDesc:!0,answer:null}},methods:{descriptionsCount:function(t){return Object.keys(t.descriptions).length},hasDescription:function(t){return t.descriptions.hasOwnProperty(this.language)&&t.descriptions[this.language].trim()},descriptionOrPlaceholderText:function(t){return this.hasDescription(t)?t.descriptions[this.language]:"Add translation"},popoverData:function(t,e){return{content:t.descriptions.hasOwnProperty(e)?t.descriptions[e]:"",customClass:"popover-preserve-new-lines"}},onOpenModal:function(t){var e=this;this.answer=t,this.$nextTick((function(){e.$bvModal.show(e.modalId)}))}},created:function(){this.$store.dispatch("answers/preloadStates")}};var f=n(3379),m=n.n(f),g=n(8277),b={insert:"head",singleton:!1};m()(g.Z,b);g.Z.locals;const h=(0,n(1900).Z)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.language&&t.answer?n("answer-edit",{attrs:{answer:t.answer,language:t.language}}):t._e(),t._v(" "),!t.language&&t.answer?n("answer-review",{attrs:{answer:t.answer}}):t._e(),t._v(" "),n("h3",[t._v("Answers")]),t._v(" "),n("table-search-descriptions"),t._v(" "),n("b-table",{attrs:{striped:"",hover:"",fields:t.fields,items:t.filteredItems,"primary-key":"id","thead-class":"text-center",stacked:"lg","per-page":t.perPage,"current-page":t.currentPage,"sort-by":t.sortBy,"sort-desc":t.sortDesc,busy:t.isBusy},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"cell(id)",fn:function(e){return[t._v("\n            "+t._s(e.value)+"\n        ")]}},t.language?{key:"cell(answer)",fn:function(e){return[n("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:t.popoverData(e.item,t.language),expression:"popoverData(data.item, language)",modifiers:{hover:!0,top:!0}}],class:{"text-secondary":!t.hasDescription(e.item)},attrs:{variant:"link"},on:{click:function(n){return t.onOpenModal(e.item)}}},[t._v("\n                "+t._s(t.shortenDescription(t.descriptionOrPlaceholderText(e.item)))+"\n            ")])]}}:null,{key:"cell(english_translation)",fn:function(e){return[n("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:t.popoverData(e.item,"en"),expression:"popoverData(data.item, 'en')",modifiers:{hover:!0,top:!0}}],attrs:{variant:"link"},on:{click:function(n){return t.onOpenModal(e.item)}}},[t._v("\n                "+t._s(t.shortenDescription(e.item.descriptions.en))+"\n            ")])]}},{key:"cell(languages)",fn:function(e){return[n("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.click.blur.top",value:t.languagesPopoverData(e.item),expression:"languagesPopoverData(data.item)",modifiers:{hover:!0,click:!0,blur:!0,top:!0}}],attrs:{pill:"",variant:t.languagesButtonVariant(e.item)}},[t._v("\n                "+t._s(t.descriptionsCount(e.item))+" / "+t._s(t.totalLanguages)+"\n            ")])]}},{key:"cell(date)",fn:function(e){return[t._v("\n            "+t._s(t.formatDate(e.value))+"\n        ")]}},{key:"cell(status)",fn:function(e){return[t._v("\n            "+t._s(e.item.status.status)+"\n        ")]}}],null,!0)}),t._v(" "),t.totalRows>t.perPage?n("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"center"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)}),[],!1,null,null,null).exports},3530:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var s=n(8947),a=n(1436);s.vI.add(a.sqG,a.nYk,a.LEp,a.Mdf);const r={props:["options","value","height","disabled"],mounted:function(){var t=this;this.height&&(this.listStyle["max-height"]=this.height),this.$nextTick((function(){t.scrollToSelected()})),this.$root.$once("bv::modal::shown",this.handleModalShown)},unmounted:function(){this.$off("bv::modal::shown",this.handleModalShown)},computed:{filteredOptions:function(){var t=this;return""!=this.search?this.options.filter((function(e){return e.value==t.input.value||e.text.toLowerCase().includes(t.search.toLowerCase())})):this.options},isDisabled:function(){return!!this.disabled}},data:function(){return{search:"",input:{value:this.value},modal:{content:""},listStyle:{"max-height":"300px","overflow-y":"scroll",display:"block"}}},methods:{shorten:function(t,e){return e||(e=50),t&&t.length>e?"".concat(t.substr(0,e),"..."):t},openModal:function(t){this.modal.content=t,this.$refs.modal.show()},setValue:function(t){this.input.value=t,this.$emit("input",this.input.value)},removeValue:function(){this.input.value="",this.$emit("input",this.input.value)},scrollToSelected:function(){this.input.value&&this.$refs["option-".concat(this.input.value)][0].scrollIntoView({behavior:"smooth"})},resetSearch:function(){var t=this;this.search="",this.$nextTick((function(){t.scrollToSelected()}))},handleModalShown:function(t,e){"question-edit"!==e&&"question-review"!==e||this.scrollToSelected()}}};const i=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{ref:"modal",attrs:{"hide-footer":!0}},[t._v(t._s(t.modal.content))]),t._v(" "),n("b-input-group",{staticClass:"mb-2"},[n("b-form-input",{attrs:{id:"search-text",type:"text",placeholder:"Search text",trim:"",disabled:t.isDisabled},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),n("b-input-group-append",[n("b-button",{attrs:{variant:"outline-danger",disabled:t.isDisabled||""==t.search},on:{click:t.resetSearch}},[t._v("Reset")])],1),t._v(" "),n("b-input-group-append",[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"outline-secondary",disabled:!t.input.value,title:"Scroll to selected item"},on:{click:t.scrollToSelected}},[n("font-awesome-icon",{attrs:{icon:["fas","eye"]}})],1)],1)],1),t._v(" "),n("div",{style:t.listStyle},[n("b-list-group",t._l(t.filteredOptions,(function(e){return n("b-list-group-item",{key:e.value,ref:"option-"+e.value,refInFor:!0,staticClass:"d-flex flex-row flex-row-reverse",attrs:{active:e.value==t.input.value}},[n("div",{staticClass:"pl-2"},[n("b-button-group",{attrs:{size:"sm"}},[e.value!=t.value?n("b-button",{attrs:{variant:"success",disabled:t.isDisabled},on:{click:function(n){return t.setValue(e.value)}}},[n("font-awesome-icon",{attrs:{icon:["fas","check"]}})],1):t._e(),t._v(" "),e.value==t.value?n("b-button",{attrs:{variant:"danger",disabled:t.isDisabled},on:{click:t.removeValue}},[n("font-awesome-icon",{attrs:{icon:["fas","times-circle"]}})],1):t._e(),t._v(" "),n("b-button",{attrs:{variant:"secondary"},on:{click:function(n){return t.openModal(e.text)}}},[n("font-awesome-icon",{attrs:{icon:["fas","info-circle"]}})],1)],1)],1),t._v(" "),n("div",{staticClass:"flex-grow-1"},[n("small",{staticClass:"mb-0"},[t._v("\n                        "+t._s(t.shorten(e.text,120))+"\n                    ")])])])})),1)],1)],1)}),[],!1,null,null,null).exports},7526:(t,e,n)=>{"use strict";n.d(e,{Z:()=>P});var s=n(629),a=n(6987),r=n(3316),i=n(9165),o=n(6077);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const d={props:["language"],mixins:[o.Z],computed:u(u({},(0,s.rn)({languages:function(t){return t.app.languages}})),{},{modalId:function(){return"answer-create"},isEnglish:function(){return"en"===this.language}}),data:function(){return{form:{answer:"",translation:"",state:{answer:null,translation:null}},isBusy:!1}},methods:{resetModal:function(){this.form.answer="",this.form.translation="",this.form.state={answer:null,translation:null}},canSave:function(){return this.isEnglish?this.form.state.answer:this.form.state.answer&&this.form.state.translation},handleSave:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;if(this.$refs.form.checkValidity()){this.isBusy=!0;var e={descriptions:[]};this.isEnglish||e.descriptions.push({code:"en",value:this.form.translation}),e.descriptions.push({code:this.language,value:this.form.answer}),axios.post("/answers",e).then((function(e){t.isBusy=!1,t.$store.dispatch("answers/insertAnswer",e.data),t.$nextTick((function(){t.$bvModal.hide(t.modalId)}))})).catch((function(e){t.isBusy=!1,console.error(e),t.displayHttpError(e)}))}},answerLabel:function(t){var e=this.languages.find((function(e){return e.code===t}));return"Answer in ".concat(e?e.name:t)},updateInputState:function(t,e){this.form.state[t]=e.length>0}}};var p=n(1900);const f=(0,p.Z)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:t.modalId,title:"Add new answer","ok-title":"Create","ok-disabled":!t.canSave(),busy:t.isBusy},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleSave}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{id:"input-group-answer",label:t.answerLabel(t.language),"label-for":"input-answer","invalid-feedback":"Answer is required",state:t.form.state.answer}},[n("b-form-textarea",{attrs:{id:"input-answer",required:"",state:t.form.state.answer,rows:"2","max-rows":"6",trim:""},on:{update:function(e){for(var n=arguments.length,s=Array(n);n--;)s[n]=arguments[n];return t.updateInputState.apply(void 0,["answer"].concat(s))}},model:{value:t.form.answer,callback:function(e){t.$set(t.form,"answer",e)},expression:"form.answer"}})],1),t._v(" "),t.isEnglish?t._e():n("b-form-group",{attrs:{id:"input-group-translation",label:t.answerLabel("en"),"label-for":"input-translation","invalid-feedback":"English translation is required",state:t.form.state.translation}},[n("b-form-textarea",{attrs:{id:"input-translation",required:"",state:t.form.state.translation,rows:"2","max-rows":"6",trim:""},on:{update:function(e){for(var n=arguments.length,s=Array(n);n--;)s[n]=arguments[n];return t.updateInputState.apply(void 0,["translation"].concat(s))}},model:{value:t.form.translation,callback:function(e){t.$set(t.form,"translation",e)},expression:"form.translation"}})],1)],1)])}),[],!1,null,null,null).exports;function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const h={props:["language"],components:{FormAnswer:n(3530).Z},mixins:[o.Z],computed:g(g(g({},(0,s.rn)({languages:function(t){return t.app.languages}})),(0,s.Se)({answers:"answers/forQuestion",topics:"topics/sortedAsc"})),{},{modalId:function(){return"question-create"},topicOptions:function(){var t=this.topics.map((function(t){return{value:t.id,text:t.description}}));return t.unshift({value:"",text:""}),t},answerOptions:function(){var t=this;return this.answers.map((function(e){return{value:e.id,text:e.descriptions.hasOwnProperty(t.language)?e.descriptions[t.language]:e.descriptions.en}}))},isEnglish:function(){return"en"===this.language}}),data:function(){return{form:{question:"",translation:"",topic:"",answer:"",state:{question:null,translation:null}},isBusy:!1}},methods:{resetModal:function(){this.form.question="",this.form.translation="",this.form.topic="",this.form.answer="",this.form.state.question=null,this.form.state.translation=null},canSave:function(){return this.isEnglish?this.form.state.question:this.form.state.question&&this.form.state.translation},handleSave:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;if(this.$refs.form.checkValidity()){this.isBusy=!0;var e={descriptions:[],status:this.form.status};this.isEnglish||e.descriptions.push({code:"en",value:this.form.translation}),e.descriptions.push({code:this.language,value:this.form.question}),this.form.topic&&(e.topic=this.form.topic),this.form.answer&&(e.answer=this.form.answer),axios.post("/questions",e).then((function(e){t.isBusy=!1,t.$store.dispatch("questions/insertQuestion",e.data),t.$nextTick((function(){t.$bvModal.hide(t.modalId)}))})).catch((function(e){t.isBusy=!1,console.error(e),t.displayHttpError(e)}))}},questionLabel:function(t){var e=this.languages.find((function(e){return e.code===t}));return"Question in ".concat(e?e.name:t)},updateInputState:function(t,e){this.form.state[t]=e.length>0}}};const v=(0,p.Z)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:t.modalId,title:"Add new question","ok-title":"Create","ok-disabled":!t.canSave(),busy:t.isBusy},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleSave}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{id:"input-group-question",label:t.questionLabel(t.language),"label-for":"input-question","invalid-feedback":"Question is required",state:t.form.state.question}},[n("b-form-input",{attrs:{id:"input-question",type:"text",required:"",state:t.form.state.question,trim:""},on:{update:function(e){for(var n=arguments.length,s=Array(n);n--;)s[n]=arguments[n];return t.updateInputState.apply(void 0,["question"].concat(s))}},model:{value:t.form.question,callback:function(e){t.$set(t.form,"question",e)},expression:"form.question"}})],1),t._v(" "),t.isEnglish?t._e():n("b-form-group",{attrs:{id:"input-group-translation",label:t.questionLabel("en"),"label-for":"input-translation","invalid-feedback":"English translation is required",state:t.form.state.translation}},[n("b-form-input",{attrs:{id:"input-translation",type:"text",required:"",state:t.form.state.translation,trim:""},on:{update:function(e){for(var n=arguments.length,s=Array(n);n--;)s[n]=arguments[n];return t.updateInputState.apply(void 0,["translation"].concat(s))}},model:{value:t.form.translation,callback:function(e){t.$set(t.form,"translation",e)},expression:"form.translation"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-topic",label:"Category","label-for":"input-topic"}},[n("b-form-select",{attrs:{options:t.topicOptions,id:"input-topic"},model:{value:t.form.topic,callback:function(e){t.$set(t.form,"topic",e)},expression:"form.topic"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-answer",label:"Answer","label-for":"input-answer"}},[n("form-answer",{attrs:{options:t.answerOptions},model:{value:t.form.answer,callback:function(e){t.$set(t.form,"answer",e)},expression:"form.answer"}})],1)],1)])}),[],!1,null,null,null).exports;var w=n(8947),y=n(1436);function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){k(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}w.vI.add(y.r8p);const S={props:["language","isBusy"],components:{QuestionsTable:a.Z,PendingQuestionsTable:r.Z,AnswersTable:i.Z,AnswerCreate:f,QuestionCreate:v},data:function(){return{tabIndex:0}},computed:O(O({},(0,s.rn)({questions:function(t){return t.questions.items},answers:function(t){return t.answers.items}})),{},{pendingQuestions:function(){return this.$store.getters["pendingQuestions/forLanguage"](this.language)},isEnglish:function(){return"en"===this.language}}),methods:{tabTitleBadgeVariant:function(t){return this.tabIndex===t?"light":"secondary"}},created:function(){this.$store.dispatch("questions/preloadAllQuestions"),this.$store.dispatch("pendingQuestions/preloadAllPendingQuestions"),this.$store.dispatch("answers/preloadAllAnswers")}};const P=(0,p.Z)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mt-4"},[n("b-tabs",{attrs:{"content-class":"mt-4","active-nav-item-class":"bg-primary text-white",fill:""},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[n("b-tab",{attrs:{lazy:""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n                Questions\n                "),t.isBusy?t._e():n("b-badge",{attrs:{variant:t.tabTitleBadgeVariant(0),pill:""}},[t._v("\n                    "+t._s(t.questions.length)+"\n                ")]),t._v(" "),t.isBusy?n("b-spinner",{attrs:{variant:t.tabTitleBadgeVariant(0),type:"grow",label:"Loading...",small:""}}):t._e()]},proxy:!0}])},[t._v(" "),n("question-create",{attrs:{language:t.language}}),t._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"question-create",expression:"'question-create'"},{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mb-4",attrs:{variant:"primary",title:"Add new question"}},[n("font-awesome-icon",{attrs:{icon:["fas","plus"]}})],1),t._v(" "),n("questions-table",{attrs:{items:t.questions,language:t.language,"is-busy":t.isBusy}})],1),t._v(" "),n("b-tab",{attrs:{lazy:""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n                Pending questions\n                "),t.isBusy?t._e():n("b-badge",{attrs:{variant:t.tabTitleBadgeVariant(1),pill:""}},[t._v("\n                    "+t._s(t.pendingQuestions.length)+"\n                ")]),t._v(" "),t.isBusy?n("b-spinner",{attrs:{variant:t.tabTitleBadgeVariant(1),type:"grow",label:"Loading...",small:""}}):t._e()]},proxy:!0}])},[t._v(" "),n("pending-questions-table",{attrs:{items:t.pendingQuestions,language:t.language,"is-busy":t.isBusy}})],1),t._v(" "),n("b-tab",{attrs:{lazy:""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n                Answers\n                "),t.isBusy?t._e():n("b-badge",{attrs:{variant:t.tabTitleBadgeVariant(2),pill:""}},[t._v("\n                    "+t._s(t.answers.length)+"\n                ")]),t._v(" "),t.isBusy?n("b-spinner",{attrs:{variant:t.tabTitleBadgeVariant(2),type:"grow",label:"Loading...",small:""}}):t._e()]},proxy:!0}])},[t._v(" "),n("answer-create",{attrs:{language:t.language}}),t._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"answer-create",expression:"'answer-create'"},{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mb-4",attrs:{variant:"primary",title:"Add new answer"}},[n("font-awesome-icon",{attrs:{icon:["fas","plus"]}})],1),t._v(" "),n("answers-table",{attrs:{items:t.answers,language:t.language,"is-busy":t.isBusy}})],1)],1)],1)}),[],!1,null,null,null).exports},3933:(t,e,n)=>{"use strict";n.d(e,{Z:()=>Z});var s=n(629),a=n(6987),r=n(3316),i=n(9165);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const c={computed:l(l({},(0,s.rn)({languages:function(t){return t.app.languages}})),{},{fields:function(){var t=this,e=[{key:"name",label:"Language",sortable:!1,tdClass:["align-middle","text-center"]},{key:"questions",sortable:!1,tdClass:["align-middle","text-center","table-success"]},{key:"questions_translated",sortable:!1,tdClass:function(e,n,s){var a=["align-middle","text-center"];return t.questionTranslationsCount(s)===t.statistics.questions.count?a.push("table-success"):a.push("table-warning"),a}},{key:"answers",sortable:!1,tdClass:["align-middle","text-center","table-success"]},{key:"answers_translated",sortable:!1,tdClass:function(e,n,s){var a=["align-middle","text-center"];return t.answerTranslationsCount(s)===t.statistics.answers.count?a.push("table-success"):a.push("table-warning"),a}}];return e}}),data:function(){return{statistics:null}},methods:{questionTranslationsCount:function(t){var e=this.statistics.questions.translations.find((function(e){return t.code===e.code}));return e?e.count:0},answerTranslationsCount:function(t){var e=this.statistics.answers.translations.find((function(e){return t.code===e.code}));return e?e.count:0}},created:function(){var t=this;axios.get("/statistics").then((function(e){t.statistics=e.data})).catch((function(t){console.error("Statistics loading:",t)}))}};var d=n(3379),p=n.n(d),f=n(8830),m={insert:"head",singleton:!1};p()(f.Z,m);f.Z.locals;var g=n(1900);const b=(0,g.Z)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("transition",{attrs:{name:"fade",mode:"out-in"}},[t.statistics?t._e():n("div",{staticClass:"d-flex justify-content-center"},[n("b-spinner",{attrs:{type:"grow",label:"Loading statistics data",small:"",variant:"secondary"}})],1),t._v(" "),t.statistics?n("b-table",{attrs:{striped:"",hover:"",fields:t.fields,items:t.languages,"primary-key":"id","thead-class":"text-center",stacked:"lg"},scopedSlots:t._u([{key:"cell(name)",fn:function(e){return[t._v("\n                "+t._s(e.value)+"\n            ")]}},{key:"cell(questions)",fn:function(){return[t._v("\n                "+t._s(t.statistics.questions.count)+"\n            ")]},proxy:!0},{key:"cell(questions_translated)",fn:function(e){return[t._v("\n                "+t._s(t.questionTranslationsCount(e.item))+"\n            ")]}},{key:"cell(answers)",fn:function(){return[t._v("\n                "+t._s(t.statistics.answers.count)+"\n            ")]},proxy:!0},{key:"cell(answers_translated)",fn:function(e){return[t._v("\n                "+t._s(t.answerTranslationsCount(e.item))+"\n            ")]}}],null,!1,4028698361)}):t._e()],1)],1)}),[],!1,null,"4ab0644c",null).exports;var h=n(6077);const v={mixins:[h.Z],computed:{modalId:function(){return"topic-create"}},data:function(){return{form:{description:"",state:{description:null}},isBusy:!1}},methods:{resetModal:function(){this.form.description="",this.form.state={description:null}},canSave:function(){return this.form.state.description},handleSave:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;if(this.$refs.form.checkValidity()){this.isBusy=!0;var e={description:this.form.description};axios.post("/topics",e).then((function(e){t.isBusy=!1,t.$store.dispatch("topics/insertTopic",e.data),t.$nextTick((function(){t.$bvModal.hide(t.modalId)}))})).catch((function(e){t.isBusy=!1,console.error(e),t.displayHttpError(e)}))}},updateInputState:function(t,e){this.form.state[t]=e.length>0}}};const w=(0,g.Z)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:t.modalId,title:"Add new category","ok-title":"Create","ok-disabled":!t.canSave(),busy:t.isBusy},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleSave}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{id:"input-group-description",label:"Description","label-for":"input-description","invalid-feedback":"Description is required",state:t.form.state.description}},[n("b-form-textarea",{attrs:{id:"input-description",required:"",state:t.form.state.description,rows:"2","max-rows":"6",trim:""},on:{update:function(e){for(var n=arguments.length,s=Array(n);n--;)s[n]=arguments[n];return t.updateInputState.apply(void 0,["description"].concat(s))}},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)])}),[],!1,null,null,null).exports;const y={props:["topic"],mixins:[h.Z],computed:{modalId:function(){return"topic-edit"}},data:function(){return{form:{description:"",state:{description:null}},isBusy:!1}},methods:{resetModal:function(){this.form.description=this.topic.description,this.form.state={description:this.form.description.length>0}},canEdit:function(){return this.form.state.description},canSave:function(){return this.canEdit()},handleSave:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;if(this.$refs.form.checkValidity()){this.isBusy=!0;var e={description:this.form.description};axios.put("/topics/".concat(this.topic.id),e).then((function(e){t.isBusy=!1,t.$store.dispatch("topics/updateTopic",e.data),t.$nextTick((function(){t.$bvModal.hide(t.modalId)}))})).catch((function(e){t.isBusy=!1,console.error(e),t.displayHttpError(e)}))}},updateInputState:function(t,e){this.form.state[t]=e.length>0}}};const x=(0,g.Z)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:t.modalId,title:"Edit category","ok-title":"Save","ok-disabled":!t.canSave(),busy:t.isBusy},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleSave}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{id:"input-group-description",label:"Description","label-for":"input-description","invalid-feedback":"Description is required",state:t.form.state.description}},[n("b-form-textarea",{attrs:{id:"input-description",required:"",state:t.form.state.description,rows:"2","max-rows":"6",trim:"",disabled:!t.canEdit()},on:{update:function(e){for(var n=arguments.length,s=Array(n);n--;)s[n]=arguments[n];return t.updateInputState.apply(void 0,["description"].concat(s))}},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)])}),[],!1,null,null,null).exports;var O=n(4858),k=n(5494),S=n(5756),P=n(8947),_=n(1436);function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach((function(e){C(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}P.vI.add(_.r8p,_.Xcf,_.$aW);const E={props:["items","isBusy"],mixins:[k.Z,S.Z],components:{TopicCreate:w,TopicEdit:x,TableSearchDescriptions:O.Z},computed:D(D({filteredItems:function(){var t=this;return""!==this.form.search?this.items.filter((function(e){return e.description.toLowerCase().includes(t.form.search.toLowerCase())})):this.items}},(0,s.rn)({perPage:function(t){return t.app.itemsPerPage}})),{},{fields:function(){return[{key:"id",label:"ID",sortable:!0,tdClass:["align-middle","text-center"]},{key:"description",sortable:!1,tdClass:["align-middle","text-center"]},{key:"created_at",sortable:!1,tdClass:["align-middle","text-center"]},{key:"updated_at",sortable:!1,tdClass:["align-middle","text-center"]},{key:"actions",label:"",sortable:!1,tdClass:["align-middle","text-right"]}]},modalId:function(){return"topic-".concat("edit")}}),data:function(){return{currentPage:1,sortBy:"id",sortDesc:!0,topic:null,isLoadingData:!1}},methods:{onOpenModal:function(t){var e=this;this.topic=t,this.$nextTick((function(){e.$bvModal.show(e.modalId)}))},showDeleteConfirmation:function(t){var e=this;this.$bvModal.msgBoxConfirm("Are you sure you want to delete category with ID of ".concat(t.id,"?"),{title:"Please confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"Confirm",cancelTitle:"Cancel",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(n){n&&axios.delete("/topics/".concat(t.id)).then((function(t){e.$store.dispatch("topics/deleteTopic",t.data)})).catch((function(t){console.error(t),e.displayHttpError(t)}))})).catch((function(t){console.error("Delete topic confirmation dialog error",t)}))}},created:function(){var t=this;this.isLoadingData=!0,this.$store.dispatch("topics/loadAllTopics").then((function(){t.isLoadingData=!1})).catch((function(e){t.isLoadingData=!1,console.error(e)}))}};var j=n(7404),$={insert:"head",singleton:!1};p()(j.Z,$);j.Z.locals;const T=(0,g.Z)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("topic-create"),t._v(" "),t.topic?n("topic-edit",{attrs:{topic:t.topic}}):t._e(),t._v(" "),n("h3",[t._v("\n        Categories\n        "),t.isLoadingData?n("b-spinner",{attrs:{type:"grow",label:"Loading categories data",small:"",variant:"secondary"}}):t._e()],1),t._v(" "),n("table-search-descriptions"),t._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"topic-create",expression:"'topic-create'"},{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mb-4",attrs:{variant:"primary",title:"Add new category"}},[n("font-awesome-icon",{attrs:{icon:["fas","plus"]}})],1),t._v(" "),n("b-table",{attrs:{striped:"",hover:"",fields:t.fields,items:t.filteredItems,"primary-key":"id","thead-class":"text-center",stacked:"lg","per-page":t.perPage,"current-page":t.currentPage,"sort-by":t.sortBy,"sort-desc":t.sortDesc,busy:t.isBusy},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"cell(id)",fn:function(e){return[t._v("\n            "+t._s(e.value)+"\n        ")]}},{key:"cell(description)",fn:function(e){return[t._v("\n            "+t._s(e.value)+"\n        ")]}},{key:"cell(created_at)",fn:function(e){return[t._v("\n            "+t._s(t.formatDate(e.value))+"\n        ")]}},{key:"cell(updated_at)",fn:function(e){return[t._v("\n            "+t._s(t.formatDate(e.value))+"\n        ")]}},{key:"cell(actions)",fn:function(e){return[n("b-button-group",[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{variant:"success",title:"Edit"},on:{click:function(n){return t.onOpenModal(e.item)}}},[n("font-awesome-icon",{attrs:{icon:["fas","edit"]}})],1),t._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{variant:"danger",title:"Delete"},on:{click:function(n){return t.showDeleteConfirmation(e.item)}}},[n("font-awesome-icon",{attrs:{icon:["fas","trash"]}})],1)],1)]}}])}),t._v(" "),t.totalRows>t.perPage?n("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"center"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)}),[],!1,null,"5221dd26",null).exports;function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function B(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){I(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function I(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}P.vI.add(_.NBC),P.vI.add(_.B3e);const L={components:{QuestionsTable:a.Z,PendingQuestionsTable:r.Z,AnswersTable:i.Z,StatisticsTable:b,TopicsTable:T},data:function(){return{tabIndex:0,selectedLanguage:null,isBusy:!1,showStatistics:!1}},computed:B(B({},(0,s.rn)({languages:function(t){return t.app.languages},topics:function(t){return t.topics.items}})),{},{questions:function(){return this.$store.getters["questions/forReview"]},pendingQuestions:function(){return this.$store.getters["pendingQuestions/forReview"]},answers:function(){return this.$store.getters["answers/forReview"]}}),methods:{tabTitleBadgeVariant:function(t){return this.tabIndex===t?"light":"secondary"},onLanguageSelected:function(t){var e=this;this.selectedLanguage&&t&&this.selectedLanguage.code!==t.code?(this.isBusy=!0,this.selectedLanguage=t,setTimeout((function(){e.isBusy=!1}),500)):this.selectedLanguage=t},onToggleStatistics:function(){this.showStatistics=!this.showStatistics}},created:function(){this.$store.dispatch("answers/preloadAllAnswers"),this.$store.dispatch("questions/preloadAllQuestions"),this.$store.dispatch("pendingQuestions/preloadAllPendingQuestions"),this.$store.dispatch("topics/preloadAllTopics")}};var Q=n(4532),M={insert:"head",singleton:!1};p()(Q.Z,M);Q.Z.locals;const Z=(0,g.Z)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mt-4"},[n("div",{staticClass:"text-right"},[n("b-button-group",{staticClass:"mb-4"},[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:t.showStatistics?"secondary":"outline-secondary",title:"Toggle statistics"},on:{click:function(e){return t.onToggleStatistics()}}},[n("font-awesome-icon",{attrs:{icon:["fas","table"]}})],1),t._v(" "),n("b-dropdown",{attrs:{id:"language-expert-view",dropup:"",text:"Open language expert view",variant:t.selectedLanguage?"secondary":"outline-secondary"}},t._l(t.languages,(function(e){return n("b-dropdown-item",{key:e.code,staticClass:"text-uppercase text-center",attrs:{href:"#",disabled:t.selectedLanguage&&t.selectedLanguage.code===e.code},on:{click:function(n){return t.onLanguageSelected(e)}}},[t._v("\n                    "+t._s(e.name)+"\n                ")])})),1)],1)],1),t._v(" "),t.showStatistics?n("statistics-table"):t._e(),t._v(" "),n("transition",{attrs:{name:"fade",mode:"out-in"}},[t.selectedLanguage?t._e():n("b-tabs",{attrs:{"content-class":"mt-4","active-nav-item-class":"bg-primary text-white",fill:""},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[n("b-tab",{attrs:{lazy:""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n                    Questions\n                    "),n("b-badge",{attrs:{variant:t.tabTitleBadgeVariant(0),pill:""}},[t._v(t._s(t.questions.length))])]},proxy:!0}],null,!1,2111805051)},[t._v(" "),n("questions-table",{attrs:{items:t.questions}})],1),t._v(" "),n("b-tab",{attrs:{lazy:""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n                    Pending questions\n                    "),n("b-badge",{attrs:{variant:t.tabTitleBadgeVariant(1),pill:""}},[t._v(t._s(t.pendingQuestions.length))])]},proxy:!0}],null,!1,622617658)},[t._v(" "),n("pending-questions-table",{attrs:{items:t.pendingQuestions}})],1),t._v(" "),n("b-tab",{attrs:{lazy:""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n                    Answers\n                    "),n("b-badge",{attrs:{variant:t.tabTitleBadgeVariant(2),pill:""}},[t._v(t._s(t.answers.length))])]},proxy:!0}],null,!1,2480985657)},[t._v(" "),n("answers-table",{attrs:{items:t.answers}})],1),t._v(" "),n("b-tab",{attrs:{lazy:""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n                    Categories\n                    "),n("b-badge",{attrs:{variant:t.tabTitleBadgeVariant(3),pill:""}},[t._v(t._s(t.topics.length))])]},proxy:!0}],null,!1,3246048284)},[t._v(" "),n("topics-table",{attrs:{items:t.topics}})],1)],1),t._v(" "),t.selectedLanguage?n("b-card",{scopedSlots:t._u([{key:"header",fn:function(){return[n("h3",{staticClass:"mb-0"},[t._v("\n                    Country SELFIE Expert "+t._s(t.selectedLanguage.name)+"\n                    "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{title:"Clear selected language",size:"sm",variant:"outline-secondary"},on:{click:function(e){return t.onLanguageSelected(null)}}},[n("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)],1)]},proxy:!0}],null,!1,159328666)},[t._v(" "),n("language-expert-view",{attrs:{language:t.selectedLanguage.code,"is-busy":t.isBusy}})],1):t._e()],1)],1)}),[],!1,null,"9796b882",null).exports},3316:(t,e,n)=>{"use strict";n.d(e,{Z:()=>y});var s=n(629),a=n(6077);const r={props:["pendingQuestion"],mixins:[a.Z],computed:{modalId:function(){return"pending-question-edit"},questionState:function(){return(this.form.question&&this.form.question.length)>0},translationState:function(){return(this.form.translation&&this.form.translation.length)>0}},data:function(){return{form:{question:"",translation:"",group:null,propagate:!1},isBusy:!1}},methods:{getDescription:function(t){var e=Object.keys(t.descriptions);return 1===e.length&&"en"===e[0]?t.descriptions.en:"en"!==e[0]?t.descriptions[e[0]]:t.descriptions[e[1]]},getEnglishDescription:function(t){return t.descriptions.hasOwnProperty("en")?t.descriptions.en:""},resetModal:function(){this.form.question=this.getDescription(this.pendingQuestion),this.form.translation=this.getEnglishDescription(this.pendingQuestion),this.form.group=this.pendingQuestion.group,this.form.propagate=!1},canBePropagated:function(){return this.form.question&&this.form.translation&&this.form.question.trim()&&this.form.translation.trim()&&"pending"===this.pendingQuestion.status.value},isEnglishOnly:function(){var t=Object.keys(this.pendingQuestion.descriptions);return 1===t.length&&"en"===t[0]},canEdit:function(){return"pending"===this.pendingQuestion.status.value},canSave:function(){return this.canEdit()},handleSave:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;this.$refs.form.checkValidity()&&(this.isBusy=!0,axios.put("/pending_questions/"+this.pendingQuestion.id,{question:this.form.question,translation:this.form.translation,group:this.form.group,propagate:this.form.propagate}).then((function(e){t.isBusy=!1,t.$store.dispatch("pendingQuestions/updatePendingQuestion",e.data),t.$nextTick((function(){t.$bvModal.hide(t.modalId)}))})).catch((function(e){t.isBusy=!1,console.error(e),t.displayHttpError(e)})))}}};var i=n(1900);const o=(0,i.Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:t.modalId,title:"Edit pending question","ok-title":"Save","ok-disabled":!t.canSave(),busy:t.isBusy},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleSave}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{id:"input-group-question",label:"Question","label-for":"input-question","invalid-feedback":"Question is required",state:t.questionState}},[n("b-form-input",{attrs:{id:"input-question",type:"text",required:"",state:t.questionState,trim:"",disabled:!t.canEdit()},model:{value:t.form.question,callback:function(e){t.$set(t.form,"question",e)},expression:"form.question"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-translation",label:"English translation","label-for":"input-translation","invalid-feedback":"English translation is required",state:t.translationState,description:"Translation is not needed if suggestion was submitted in English."}},[n("b-form-input",{attrs:{id:"input-translation",type:"text",required:"",state:t.translationState,trim:"",disabled:!t.canEdit()||t.isEnglishOnly()},model:{value:t.form.translation,callback:function(e){t.$set(t.form,"translation",e)},expression:"form.translation"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-group",label:"Group number"}},[n("b-form-input",{attrs:{id:"input-group",type:"number",min:"0",disabled:!t.canEdit()},model:{value:t.form.group,callback:function(e){t.$set(t.form,"group",e)},expression:"form.group"}})],1),t._v(" "),n("b-form-group",{attrs:{description:"Changing status to Propagated will send the question for review by SELFIE master. This would also prevent you from making any changes to the question itself or English translation."}},[n("b-form-checkbox",{attrs:{name:"propagate",switch:"",disabled:!t.canBePropagated()},model:{value:t.form.propagate,callback:function(e){t.$set(t.form,"propagate",e)},expression:"form.propagate"}},[n("b",[t._v("Change status to propagated")])])],1)],1)])}),[],!1,null,null,null).exports;function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const d={props:["pendingQuestion"],mixins:[a.Z],computed:u(u({},(0,s.rn)({states:function(t){return t.pendingQuestions.states}})),{},{modalId:function(){return"pending-question-review"},questionState:function(){return(this.form.question&&this.form.question.length)>0},translationState:function(){return(this.form.translation&&this.form.translation.length)>0}}),data:function(){return{form:{question:"",translation:"",group:null,status:""},isBusy:!1}},methods:{getDescription:function(t){var e=Object.keys(t.descriptions);return 1===e.length&&"en"===e[0]?t.descriptions.en:"en"!==e[0]?t.descriptions[e[0]]:t.descriptions[e[1]]},getEnglishDescription:function(t){return t.descriptions.hasOwnProperty("en")?t.descriptions.en:""},statusOptions:function(){var t=this;return this.states.map((function(e){return{value:e.value,text:e.text,disabled:-1===t.pendingQuestion.status.transitionable.indexOf(e.value)&&t.pendingQuestion.status.value!==e.value}}))},resetModal:function(){this.form.question=this.getDescription(this.pendingQuestion),this.form.translation=this.getEnglishDescription(this.pendingQuestion),this.form.group=this.pendingQuestion.group,this.form.status=this.pendingQuestion.status.value},isEnglishOnly:function(){var t=Object.keys(this.pendingQuestion.descriptions);return 1===t.length&&"en"===t[0]},canEdit:function(){return"propagated"===this.pendingQuestion.status.value},canSave:function(){return this.canEdit()},handleSave:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;this.$refs.form.checkValidity()&&(this.isBusy=!0,axios.put("/pending_questions/"+this.pendingQuestion.id,{question:this.form.question,translation:this.form.translation,group:this.form.group,status:this.form.status}).then((function(e){t.isBusy=!1,t.$store.dispatch("pendingQuestions/updatePendingQuestion",e.data),"completed"===e.data.status.value&&t.$store.dispatch("questions/loadAllQuestions"),t.$nextTick((function(){t.$bvModal.hide(t.modalId)}))})).catch((function(e){t.isBusy=!1,console.error(e),t.displayHttpError(e)})))}}};const p=(0,i.Z)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:t.modalId,title:"Review pending question","ok-title":"Save","ok-disabled":!t.canSave(),busy:t.isBusy},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleSave}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{id:"input-group-question",label:"Question","label-for":"input-question","invalid-feedback":"Question is required",state:t.questionState}},[n("b-form-input",{attrs:{id:"input-question",type:"text",required:"",state:t.questionState,trim:"",disabled:!t.canEdit()},model:{value:t.form.question,callback:function(e){t.$set(t.form,"question",e)},expression:"form.question"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-translation",label:"English translation","label-for":"input-translation","invalid-feedback":"English translation is required",state:t.translationState,description:"Translation is not needed if suggestion was submitted in English."}},[n("b-form-input",{attrs:{id:"input-translation",type:"text",required:"",state:t.translationState,trim:"",disabled:!t.canEdit()||t.isEnglishOnly()},model:{value:t.form.translation,callback:function(e){t.$set(t.form,"translation",e)},expression:"form.translation"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-group",label:"Group number"}},[n("b-form-input",{attrs:{id:"input-group",type:"number",min:"0",disabled:!t.canEdit()},model:{value:t.form.group,callback:function(e){t.$set(t.form,"group",e)},expression:"form.group"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-status",label:"Status","label-for":"input-status",description:"Completed and Canceled are final states, former of those will create a new question as a result. Pending will send the pending question back to language experts."}},[n("b-form-select",{attrs:{options:t.statusOptions(),id:"input-status",disabled:!t.canEdit()},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)],1)])}),[],!1,null,null,null).exports;var f=n(4858),m=n(5494),g=n(5756);function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const w={props:["items","language","isBusy"],mixins:[m.Z,g.Z],components:{PendingQuestionEdit:o,PendingQuestionReview:p,TableSearchDescriptions:f.Z},computed:h(h({},(0,s.rn)({perPage:function(t){return t.app.itemsPerPage}})),{},{modalId:function(){return"pending-question-"+(this.language?"edit":"review")}}),data:function(){return{currentPage:1,sortBy:"id",sortDesc:!0,fields:[{key:"id",label:"ID",sortable:!0,tdClass:["align-middle","text-center"]},{key:"question",sortable:!1,tdClass:["align-middle","text-center"]},{key:"english_translation",sortable:!1,tdClass:["align-middle","text-center"]},{key:"group",sortable:!1,tdClass:["align-middle","text-center"]},{key:"date",sortable:!1,tdClass:["align-middle","text-center"]},{key:"status",sortable:!1,tdClass:function(t,e,n){var s=["align-middle","text-center"];switch(t.value){case"pending":s.push("table-warning");break;case"completed":s.push("table-success");break;case"canceled":s.push("table-danger")}return s}}],pendingQuestion:null}},methods:{getDescription:function(t){var e=Object.keys(t.descriptions);return 1===e.length&&"en"===e[0]?t.descriptions.en:"en"!==e[0]?t.descriptions[e[0]]:t.descriptions[e[1]]},hasEnglishDescription:function(t){return t.descriptions.hasOwnProperty("en")},getEnglishDescription:function(t){return this.hasEnglishDescription(t)?t.descriptions.en:null},englishTranslationOrPlaceholderText:function(t){return t&&t.trim()?t:"Add English translation"},onOpenModal:function(t){var e=this;this.pendingQuestion=t,this.$nextTick((function(){e.$bvModal.show(e.modalId)}))}},created:function(){this.$store.dispatch("pendingQuestions/preloadStates")}};const y=(0,i.Z)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.language&&t.pendingQuestion?n("pending-question-edit",{attrs:{"pending-question":t.pendingQuestion}}):t._e(),t._v(" "),!t.language&&t.pendingQuestion?n("pending-question-review",{attrs:{"pending-question":t.pendingQuestion}}):t._e(),t._v(" "),n("h3",[t._v("Pending questions")]),t._v(" "),n("table-search-descriptions"),t._v(" "),n("b-table",{attrs:{striped:"",hover:"",fields:t.fields,items:t.filteredItems,"primary-key":"id","thead-class":"text-center","per-page":t.perPage,"current-page":t.currentPage,stacked:"lg","sort-by":t.sortBy,"sort-desc":t.sortDesc,busy:t.isBusy},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"cell(id)",fn:function(e){return[t._v("\n            "+t._s(e.value)+"\n        ")]}},{key:"cell(question)",fn:function(e){return[n("b-button",{attrs:{variant:"link"},on:{click:function(n){return t.onOpenModal(e.item)}}},[t._v("\n                "+t._s(t.getDescription(e.item))+"\n            ")])]}},{key:"cell(english_translation)",fn:function(e){return[n("b-button",{class:{"text-secondary":!t.hasEnglishDescription(e.item)},attrs:{variant:"link"},on:{click:function(n){return t.onOpenModal(e.item)}}},[t._v("\n                "+t._s(t.englishTranslationOrPlaceholderText(t.getEnglishDescription(e.item)))+"\n            ")])]}},{key:"cell(group)",fn:function(e){return[t._v("\n            "+t._s(e.value)+"\n        ")]}},{key:"cell(date)",fn:function(e){return[t._v("\n            "+t._s(t.formatDate(e.value))+"\n        ")]}},{key:"cell(status)",fn:function(e){return[t._v("\n            "+t._s(e.item.status.status)+"\n        ")]}}])}),t._v(" "),t.totalRows>t.perPage?n("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"center"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)}),[],!1,null,null,null).exports},6987:(t,e,n)=>{"use strict";n.d(e,{Z:()=>$});var s=n(629),a=n(6077),r=n(3530);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const u={props:["question","language"],mixins:[a.Z],components:{FormAnswer:r.Z},computed:o(o(o({},(0,s.rn)({states:function(t){return t.questions.states},languages:function(t){return t.app.languages}})),(0,s.Se)({answers:"answers/forQuestion",topics:"topics/sortedAsc"})),{},{modalId:function(){return"question-edit"},questionState:function(){return(this.form.question&&this.form.question.length)>0},translationState:function(){return(this.form.translation&&this.form.translation.length)>0},topicOptions:function(){var t=this.topics.map((function(t){return{value:t.id,text:t.description}}));return t.unshift({value:"",text:""}),t},statusOptions:function(){var t=this;return this.states.filter((function(t){return"published"!==t.value})).map((function(e){return{value:e.value,text:e.text,disabled:-1===t.question.status.transitionable.indexOf(e.value)&&t.question.status.value!==e.value}}))},answerOptions:function(){var t=this;return this.answers.map((function(e){return{value:e.id,text:e.descriptions.hasOwnProperty(t.language)?e.descriptions[t.language]:e.descriptions.en}}))},isEnglish:function(){return"en"===this.language}}),data:function(){return{form:{question:"",translation:"",topic:"",answer:"",translated:!1},isBusy:!1}},methods:{getDescription:function(t){return t.descriptions[this.language]},getEnglishDescription:function(t){return t.descriptions.hasOwnProperty("en")?t.descriptions.en:""},resetModal:function(){this.form.question=this.getDescription(this.question),this.form.translation=this.getEnglishDescription(this.question),this.form.topic=this.question.topic?this.question.topic.id:"",this.form.answer=this.question.answer?this.question.answer:"",this.form.translated=!1},canEdit:function(){return"in_translation"===this.question.status.value||"translated"===this.question.status.value},canSave:function(){return this.canEdit()&&(this.isEnglish?this.form.question:this.form.question&&this.form.translation)},canChangeStatus:function(){return"in_translation"===this.question.status.value&&this.questionState&&this.translationState},handleSave:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;if(this.$refs.form.checkValidity()){this.isBusy=!0;var e={descriptions:[]};this.isEnglish||e.descriptions.push({code:"en",value:this.form.translation}),e.descriptions.push({code:this.language,value:this.form.question}),this.form.topic&&(e.topic=this.form.topic),this.form.answer&&(e.answer=this.form.answer),this.form.translated&&(e.status="translated"),axios.put("/questions/".concat(this.question.id),e).then((function(e){t.isBusy=!1,t.$store.dispatch("questions/updateQuestion",e.data),t.$nextTick((function(){t.$bvModal.hide(t.modalId)}))})).catch((function(e){t.isBusy=!1,console.error(e),t.displayHttpError(e)}))}},questionLabel:function(t){var e=this.languages.find((function(e){return e.code===t}));return"Question in ".concat(e?e.name:t)}}};var c=n(1900);const d=(0,c.Z)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:t.modalId,title:"Edit question","ok-title":"Save","ok-disabled":!t.canSave(),busy:t.isBusy},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleSave}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{id:"input-group-question",label:t.questionLabel(t.language),"label-for":"input-question","invalid-feedback":"Question is required",state:t.questionState}},[n("b-form-input",{attrs:{id:"input-question",type:"text",required:"",state:t.questionState,trim:"",disabled:!t.canEdit()},model:{value:t.form.question,callback:function(e){t.$set(t.form,"question",e)},expression:"form.question"}})],1),t._v(" "),t.isEnglish?t._e():n("b-form-group",{attrs:{id:"input-group-translation",label:t.questionLabel("en"),"label-for":"input-translation","invalid-feedback":"English translation is required",state:t.translationState}},[n("b-form-input",{attrs:{id:"input-translation",type:"text",required:"",state:t.translationState,trim:"",disabled:!t.canEdit()},model:{value:t.form.translation,callback:function(e){t.$set(t.form,"translation",e)},expression:"form.translation"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-topic",label:"Category","label-for":"input-topic"}},[n("b-form-select",{attrs:{options:t.topicOptions,id:"input-topic",disabled:!t.canEdit()},model:{value:t.form.topic,callback:function(e){t.$set(t.form,"topic",e)},expression:"form.topic"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-answer",label:"Answer","label-for":"input-answer"}},[n("form-answer",{attrs:{options:t.answerOptions,disabled:!t.canEdit()},model:{value:t.form.answer,callback:function(e){t.$set(t.form,"answer",e)},expression:"form.answer"}})],1),t._v(" "),n("b-form-group",{attrs:{description:"Changing status to Translated will send the question for review by SELFIE master. You and other Language Experts would still be able to make changes as needed."}},[n("b-form-checkbox",{attrs:{name:"translated",switch:"",disabled:!t.canChangeStatus()},model:{value:t.form.translated,callback:function(e){t.$set(t.form,"translated",e)},expression:"form.translated"}},[n("b",[t._v("Change status to translated")])])],1)],1)])}),[],!1,null,null,null).exports;function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const g={props:["question"],mixins:[a.Z],components:{FormAnswer:r.Z},computed:f(f(f({},(0,s.rn)({states:function(t){return t.questions.states},languages:function(t){return t.app.languages}})),(0,s.Se)({answers:"answers/forQuestion",topics:"topics/sortedAsc"})),{},{modalId:function(){return"question-review"},topicOptions:function(){var t=this.topics.map((function(t){return{value:t.id,text:t.description}}));return t.unshift({value:"",text:""}),t},statusOptions:function(){var t=this;return this.states.filter((function(t){return"in_translation"!==t.value})).map((function(e){return{value:e.value,text:e.text,disabled:-1===t.question.status.transitionable.indexOf(e.value)&&t.question.status.value!==e.value}}))},answerOptions:function(){var t=this;return this.answers.map((function(e){return{value:e.id,text:e.descriptions.hasOwnProperty(t.language)?e.descriptions[t.language]:e.descriptions.en}}))}}),data:function(){return{form:{question:{},topic:"",status:"",answer:"",state:{}},isBusy:!1}},methods:{resetModal:function(){var t=this,e={},n={};Object.values(this.languages).forEach((function(s){var a=s.code;e[a]=t.question.descriptions.hasOwnProperty(a)?t.question.descriptions[a]:"",n[a]=!!e[a]||null})),this.form.question=e,this.form.state=n,this.form.status=this.question.status.value,this.form.topic=this.question.topic?this.question.topic.id:"",this.form.status=this.question.status.value,this.form.answer=this.question.answer?this.question.answer:""},canEdit:function(){return!0},canSave:function(){return this.canEdit()&&Object.values(this.form.state).every((function(t){return!0===t}))},handleSave:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;if(this.$refs.form.checkValidity()){this.isBusy=!0;var e={descriptions:[],status:this.form.status};e.descriptions=Object.entries(this.form.question).map((function(t){return{code:t[0],value:t[1]}})),this.form.topic&&(e.topic=this.form.topic),this.form.answer&&(e.answer=this.form.answer),axios.put("/questions/".concat(this.question.id),e).then((function(e){t.isBusy=!1,t.$store.dispatch("questions/updateQuestion",e.data),t.$nextTick((function(){t.$bvModal.hide(t.modalId)}))})).catch((function(e){t.isBusy=!1,console.error(e),t.displayHttpError(e)}))}},formGroupId:function(t){return"input-group-question-".concat(t.code)},formGroupLabel:function(t){return"Question in ".concat(t.name)},formInputId:function(t){return"input-question-".concat(t.code)},updateInputState:function(t,e){this.form.state[t]=e.length>0}}};const b=(0,c.Z)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:t.modalId,title:"Review question","ok-title":"Save","ok-disabled":!t.canSave(),busy:t.isBusy},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleSave}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[t._l(t.languages,(function(e){return n("b-form-group",{key:e.code,attrs:{id:t.formGroupId(e),label:t.formGroupLabel(e),"label-for":t.formInputId(e),"invalid-feedback":"Question text is required",state:t.form.state[e.code]}},[n("b-form-input",{attrs:{id:t.formInputId(e),type:"text",required:"",state:t.form.state[e.code],trim:"",disabled:!t.canEdit()},on:{update:function(n){for(var s=arguments.length,a=Array(s);s--;)a[s]=arguments[s];return t.updateInputState.apply(void 0,[e.code].concat(a))}},model:{value:t.form.question[e.code],callback:function(n){t.$set(t.form.question,e.code,n)},expression:"form.question[language.code]"}})],1)})),t._v(" "),n("b-form-group",{attrs:{id:"input-group-topic",label:"Category","label-for":"input-topic"}},[n("b-form-select",{attrs:{options:t.topicOptions,id:"input-topic",disabled:!t.canEdit()},model:{value:t.form.topic,callback:function(e){t.$set(t.form,"topic",e)},expression:"form.topic"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-status",label:"Status","label-for":"input-status"}},[n("b-form-select",{attrs:{options:t.statusOptions,id:"input-status",disabled:!t.canEdit()},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-answer",label:"Answer","label-for":"input-answer"}},[n("form-answer",{attrs:{options:t.answerOptions,disabled:!t.canEdit()},model:{value:t.form.answer,callback:function(e){t.$set(t.form,"answer",e)},expression:"form.answer"}})],1)],2)])}),[],!1,null,null,null).exports;var h=n(4061),v=n(2266),w=n(4858),y=n(5494),x=n(5756),O=n(8947),k=n(1436);function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}O.vI.add(k.sqG),O.vI.add(k.Xcf);const q={props:["items","language","isBusy"],mixins:[y.Z,x.Z],components:{QuestionEdit:d,QuestionReview:b,AnswerEdit:h.Z,AnswerReview:v.Z,TableSearchDescriptions:w.Z},computed:P(P(P({},(0,s.rn)({perPage:function(t){return t.app.itemsPerPage}})),(0,s.Se)({answers:"answers/forQuestion"})),{},{fields:function(){var t=[{key:"id",label:"ID",sortable:!0,tdClass:["align-middle","text-center"]},{key:"question",sortable:!1,tdClass:["align-middle","text-center"]},{key:"english_translation",sortable:!1,tdClass:["align-middle","text-center"]},{key:"category",sortable:!1,tdClass:["align-middle","text-center"]},{key:"answer",sortable:!1,tdClass:["align-middle","text-center"]},{key:"date",sortable:!1,tdClass:["align-middle","text-center"]},{key:"languages",sortable:!1,tdClass:["align-middle","text-center"]},{key:"status",sortable:!1,tdClass:function(t,e,n){var s=["align-middle","text-center"];switch(t.value){case"in_translation":s.push("table-warning");break;case"translated":s.push("table-info");break;case"published":s.push("table-success")}return s}}];return this.language?t:t.filter((function(t){return"question"!==t.key}))},modalId:function(){var t=this.language?"edit":"review";return"question-".concat(t)},answerModalId:function(){var t=this.language?"edit":"review";return"answer-".concat(t)}}),data:function(){return{currentPage:1,sortBy:"id",sortDesc:!0,question:null,answer:null}},methods:{descriptionsCount:function(t){return Object.keys(t.descriptions).length},hasDescription:function(t){return t.descriptions.hasOwnProperty(this.language)&&t.descriptions[this.language].trim()},descriptionOrPlaceholderText:function(t){return this.hasDescription(t)?t.descriptions[this.language]:"Add translation"},answerPopoverData:function(t){var e=this.answers.find((function(e){return e.id===t.answer})),n=this.language?this.language:"en";return{content:e?this.descriptionInLanguageOrEnglish(e.descriptions,n):"",customClass:"popover-preserve-new-lines"}},onOpenModal:function(t){var e=this;this.question=t,this.$nextTick((function(){e.$bvModal.show(e.modalId)}))},onOpenAnswerModal:function(t){var e=this,n=this.answers.find((function(e){return e.id===t.answer}));n&&(this.answer=n,this.$nextTick((function(){e.$bvModal.show(e.answerModalId)})))},answerDescriptionsCount:function(t){var e=this.answers.find((function(e){return e.id===t}));return e?this.descriptionsCount(e):0},answerLanguagesPopoverData:function(t){var e=this.answers.find((function(e){return e.id===t}));return e?this.languagesPopoverData(e):{}}},created:function(){this.$store.dispatch("questions/preloadStates"),this.$store.dispatch("topics/preloadAllTopics"),this.$store.dispatch("answers/preloadStates")}};var D=n(3379),C=n.n(D),E=n(158),j={insert:"head",singleton:!1};C()(E.Z,j);E.Z.locals;const $=(0,c.Z)(q,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.language&&t.question?n("question-edit",{attrs:{question:t.question,language:t.language}}):t._e(),t._v(" "),!t.language&&t.question?n("question-review",{attrs:{question:t.question}}):t._e(),t._v(" "),t.language&&t.answer?n("answer-edit",{attrs:{answer:t.answer,language:t.language}}):t._e(),t._v(" "),!t.language&&t.answer?n("answer-review",{attrs:{answer:t.answer}}):t._e(),t._v(" "),n("h3",[t._v("Questions")]),t._v(" "),n("table-search-descriptions"),t._v(" "),n("b-table",{attrs:{striped:"",hover:"",fields:t.fields,items:t.filteredItems,"primary-key":"id","thead-class":"text-center",stacked:"lg","per-page":t.perPage,"current-page":t.currentPage,"sort-by":t.sortBy,"sort-desc":t.sortDesc,busy:t.isBusy},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"cell(id)",fn:function(e){return[t._v("\n            "+t._s(e.value)+"\n        ")]}},t.language?{key:"cell(question)",fn:function(e){return[n("b-button",{class:{"text-secondary":!t.hasDescription(e.item)},attrs:{variant:"link"},on:{click:function(n){return t.onOpenModal(e.item)}}},[t._v("\n                "+t._s(t.descriptionOrPlaceholderText(e.item))+"\n            ")])]}}:null,{key:"cell(english_translation)",fn:function(e){return[n("b-button",{attrs:{variant:"link"},on:{click:function(n){return t.onOpenModal(e.item)}}},[t._v("\n                "+t._s(e.item.descriptions.en)+"\n            ")])]}},{key:"cell(category)",fn:function(e){return[t._v("\n            "+t._s(e.item.topic?e.item.topic.description:null)+"\n        ")]}},{key:"cell(answer)",fn:function(e){return[e.item.answer?n("b-button-group",[n("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.click.blur.top",value:t.answerPopoverData(e.item),expression:"answerPopoverData(data.item)",modifiers:{hover:!0,click:!0,blur:!0,top:!0}}],attrs:{variant:"outline-secondary"}},[n("font-awesome-icon",{attrs:{icon:["fas","info-circle"]}})],1),t._v(" "),n("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.click.blur.top",value:t.answerLanguagesPopoverData(e.item.answer),expression:"answerLanguagesPopoverData(data.item.answer)",modifiers:{hover:!0,click:!0,blur:!0,top:!0}}],attrs:{variant:"outline-secondary"}},[t._v("\n                    "+t._s(t.answerDescriptionsCount(e.item.answer))+" / "+t._s(t.totalLanguages)+"\n                ")]),t._v(" "),n("b-button",{attrs:{variant:"outline-secondary"},on:{click:function(n){return t.onOpenAnswerModal(e.item)}}},[n("font-awesome-icon",{attrs:{icon:["fa","edit"]}})],1)],1):t._e()]}},{key:"cell(languages)",fn:function(e){return[n("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.click.blur.top",value:t.languagesPopoverData(e.item),expression:"languagesPopoverData(data.item)",modifiers:{hover:!0,click:!0,blur:!0,top:!0}}],attrs:{pill:"",variant:t.languagesButtonVariant(e.item)}},[t._v("\n                "+t._s(t.descriptionsCount(e.item))+" / "+t._s(t.totalLanguages)+"\n            ")])]}},{key:"cell(date)",fn:function(e){return[t._v("\n            "+t._s(t.formatDate(e.value))+"\n        ")]}},{key:"cell(status)",fn:function(e){return[t._v("\n            "+t._s(e.item.status.status)+"\n        ")]}}],null,!0)}),t._v(" "),t.totalRows>t.perPage?n("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"center"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)}),[],!1,null,null,null).exports},4858:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const s={methods:{onSearchSubmit:function(t){t.preventDefault()},onSearchReset:function(t){t.preventDefault(),this.$parent.form.search=""}}};const a=(0,n(1900).Z)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex flex-row-reverse"},[n("b-form",{staticClass:"mb-2",attrs:{inline:""},on:{submit:t.onSearchSubmit,reset:t.onSearchReset}},[n("b-form-group",{attrs:{id:"input-group-search-text"}},[n("b-input-group",[n("b-form-input",{attrs:{id:"search-text",type:"text",placeholder:"Search text",trim:""},model:{value:t.$parent.form.search,callback:function(e){t.$set(t.$parent.form,"search",e)},expression:"$parent.form.search"}}),t._v(" "),n("b-input-group-append",[n("b-button",{attrs:{type:"reset",variant:"outline-danger"}},[t._v("Reset")])],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},4974:(t,e,n)=>{"use strict";n.d(e,{Z:()=>y});var s=n(629),a=n(6077);const r={props:["languageOptions","roleOptions"],mixins:[a.Z],computed:{modalId:function(){return"user-create"},nameState:function(){return-1===this.form.dirty.indexOf("name")?null:(this.form.name&&this.form.name.length)>0},emailState:function(){return-1===this.form.dirty.indexOf("email")?null:(this.form.email&&this.form.email.length)>0},passwordState:function(){return-1===this.form.dirty.indexOf("password")?null:!!(this.form.password&&this.form.password.length>=8)},confirmationState:function(){return-1===this.form.dirty.indexOf("confirmation")?null:!!(this.form.confirmation&&this.form.confirmation.length>=8&&this.form.password===this.form.confirmation)}},data:function(){return{form:{dirty:[],name:"",email:"",password:"",confirmation:"",language:null,roles:[]},isBusy:!1}},methods:{resetModal:function(){this.form.dirty=[],this.form.name="",this.form.email="",this.form.password="",this.form.confirmation="",this.form.language=this.languageOptions[0].value,this.form.roles=[]},canEdit:function(){return!0},canSave:function(){return this.canEdit()&&this.nameState&&this.emailState&&this.passwordState&&this.confirmationState},handleSave:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;this.$refs.form.checkValidity()&&(this.isBusy=!0,axios.post("/users",{name:this.form.name,email:this.form.email,password:this.form.password,password_confirmation:this.form.confirmation,language:this.form.language,roles:this.form.roles}).then((function(e){t.isBusy=!1,t.$root.$emit("userCreated",e.data.data),t.$nextTick((function(){t.$bvModal.hide(t.modalId)}))})).catch((function(e){t.isBusy=!1,console.error(e),t.displayHttpError(e)})))},setDirty:function(t){-1===this.form.dirty.indexOf(t)&&this.form.dirty.push(t)}}};var i=n(1900);const o=(0,i.Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:t.modalId,title:"Create user","ok-title":"Create","ok-disabled":!t.canSave(),busy:t.isBusy},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleSave}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{id:"input-group-name",label:"Name","label-for":"input-name","invalid-feedback":"Name is required",state:t.nameState}},[n("b-form-input",{attrs:{id:"input-name",type:"text",required:"",state:t.nameState,trim:"",disabled:!t.canEdit()},on:{update:function(e){return t.setDirty("name")}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-email",label:"Email","label-for":"input-emai","invalid-feedback":"Email is required",state:t.emailState}},[n("b-form-input",{attrs:{id:"input-email",type:"email",required:"",state:t.emailState,trim:"",disabled:!t.canEdit()},on:{update:function(e){return t.setDirty("email")}},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-password",label:"Password","label-for":"input-password","invalid-feedback":"Password is required. Length should be at least 8 characters.",state:t.passwordState}},[n("b-form-input",{attrs:{id:"input-password",type:"password",trim:"",required:"",state:t.passwordState,disabled:!t.canEdit()},on:{update:function(e){return t.setDirty("password")}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-confirmation",label:"Password confirmation","label-for":"input-confirmation","invalid-feedback":"Confirmation is required. Length should be at least 8 characters. Password and confirmation should match.",state:t.confirmationState}},[n("b-form-input",{attrs:{id:"input-confirmation",type:"password",trim:"",required:"",state:t.confirmationState,disabled:!t.canEdit()},on:{update:function(e){return t.setDirty("confirmation")}},model:{value:t.form.confirmation,callback:function(e){t.$set(t.form,"confirmation",e)},expression:"form.confirmation"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-language",label:"Language","label-for":"input-language"}},[n("b-form-select",{attrs:{options:t.languageOptions,id:"input-language"},model:{value:t.form.language,callback:function(e){t.$set(t.form,"language",e)},expression:"form.language"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-roles",label:"Roles","label-for":"input-roles"}},[n("b-form-select",{attrs:{id:"input-roles",options:t.roleOptions,multiple:""},model:{value:t.form.roles,callback:function(e){t.$set(t.form,"roles",e)},expression:"form.roles"}})],1)],1)])}),[],!1,null,null,null).exports;const l={props:["user","languageOptions","roleOptions"],mixins:[a.Z],computed:{modalId:function(){return"user-edit"},nameState:function(){return(this.form.name&&this.form.name.length)>0},emailState:function(){return(this.form.email&&this.form.email.length)>0},passwordState:function(){return""===this.form.password?null:!!(this.form.password&&this.form.password.length>=8)},confirmationState:function(){return""===this.form.confirmation?null:!!(this.form.confirmation&&this.form.confirmation.length>=8&&this.form.password===this.form.confirmation)}},data:function(){return{form:{name:"",email:"",password:"",confirmation:"",language:null,roles:[]},isBusy:!1}},methods:{resetModal:function(){this.form.name=this.user.name,this.form.email=this.user.email,this.form.password="",this.form.confirmation="",this.form.language=this.user.language,this.form.roles=this.user.roles.map((function(t){return t.id}))},canEdit:function(){return!0},canSave:function(){return this.canEdit()&&this.nameState&&this.emailState&&(this.passwordState||null===this.passwordState)&&(this.confirmationState||null===this.confirmationState)},handleSave:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;if(this.$refs.form.checkValidity()){this.isBusy=!0;var e={name:this.form.name,language:this.form.language,roles:this.form.roles};this.user.email!==this.form.email&&(e.email=this.form.email),this.form.password&&this.form.confirmation&&(e.password=this.form.password,e.password_confirmation=this.form.confirmation),axios.put("/users/"+this.user.id,e).then((function(e){t.isBusy=!1,t.$root.$emit("userUpdated",e.data.data),t.$nextTick((function(){t.$bvModal.hide(t.modalId)}))})).catch((function(e){t.isBusy=!1,console.error(e),t.displayHttpError(e)}))}}}};const u=(0,i.Z)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:t.modalId,title:"Edit user","ok-title":"Save","ok-disabled":!t.canSave(),busy:t.isBusy},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleSave}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{id:"input-group-name",label:"Name","label-for":"input-name","invalid-feedback":"Name is required",state:t.nameState}},[n("b-form-input",{attrs:{id:"input-name",type:"text",required:"",state:t.nameState,trim:"",disabled:!t.canEdit()},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-email",label:"Email","label-for":"input-emai","invalid-feedback":"Email is required",state:t.emailState}},[n("b-form-input",{attrs:{id:"input-email",type:"email",required:"",state:t.emailState,trim:"",disabled:!t.canEdit()},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-password",label:"Password","label-for":"input-password","invalid-feedback":"Length should be at least 8 characters.",state:t.passwordState}},[n("b-form-input",{attrs:{id:"input-password",type:"password",trim:"",disabled:!t.canEdit(),state:t.passwordState},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-confirmation",label:"Password confirmation","label-for":"input-confirmation","invalid-feedback":"Length should be at least 8 characters. Password and confirmation should match.",state:t.confirmationState}},[n("b-form-input",{attrs:{id:"input-confirmation",type:"password",trim:"",disabled:!t.canEdit(),state:t.confirmationState},model:{value:t.form.confirmation,callback:function(e){t.$set(t.form,"confirmation",e)},expression:"form.confirmation"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-language",label:"Language","label-for":"input-language"}},[n("b-form-select",{attrs:{options:t.languageOptions,id:"input-language"},model:{value:t.form.language,callback:function(e){t.$set(t.form,"language",e)},expression:"form.language"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-roles",label:"Roles","label-for":"input-roles"}},[n("b-form-select",{attrs:{id:"input-roles",options:t.roleOptions,multiple:""},model:{value:t.form.roles,callback:function(e){t.$set(t.form,"roles",e)},expression:"form.roles"}})],1)],1)])}),[],!1,null,null,null).exports;var c=n(8947),d=n(1436);function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}c.vI.add(d.hkK),c.vI.add(d.yXf),c.vI.add(d.FKd),c.vI.add(d.k9h);const g={components:{UserCreate:o,UserEdit:u},mixins:[a.Z],computed:f(f({},(0,s.rn)({perPage:function(t){return t.app.itemsPerPage},currentUser:function(t){return t.app.user},languages:function(t){return t.app.languages}})),{},{totalRows:function(){return this.items.length},fields:function(){return[{key:"id",label:"ID",sortable:!0,tdClass:["align-middle","text-center"]},{key:"name",sortable:!1,tdClass:["align-middle","text-center"]},{key:"email",sortable:!1,tdClass:["align-middle","text-center"]},{key:"email_verified_at",label:"Verified",sortable:!1,tdClass:["align-middle","text-center"]},{key:"created_at",sortable:!1,tdClass:["align-middle","text-center"]},{key:"language",sortable:!1,tdClass:["align-middle","text-center"]},{key:"roles",sortable:!1,tdClass:["align-middle","text-center"]},{key:"actions",label:"",sortable:!1,tdClass:["align-middle","text-center"]}]},roleOptions:function(){var t=this;return this.roles.map((function(e){return{value:e.id,text:t.capitalize(e.name)}}))},languageOptions:function(){return this.languages.map((function(t){return{value:t.id,text:t.name}}))}}),data:function(){return{currentPage:1,sortBy:"id",sortDesc:!0,items:[],isBusy:!0,user:null,roles:[]}},methods:{formatDate:function(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),".").concat((e.getMonth()+1).toString().padStart(2,"0"),".").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))},formatMailto:function(t){return"mailto:".concat(t)},onEditUser:function(t){var e=this;this.user=t,this.$nextTick((function(){e.$bvModal.show("user-edit")}))},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},onDeleteUser:function(t){var e=this;this.$bvModal.msgBoxConfirm("Please confirm that you really want to delete user ".concat(t.name,"."),{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(n){n&&(e.isBusy=!0,axios.delete("/users/".concat(t.id)).then((function(n){e.isBusy=!1;var s=e.items.findIndex((function(e){return e.id===t.id}));-1!==s&&e.items.splice(s,1)})).catch((function(t){e.isBusy=!1,console.error("User delete:",t),e.displayHttpError(t)})))})).catch((function(t){console.log("User delete confirmation error:",t)}))},formatLanguage:function(t){var e=this.languages.find((function(e){return e.id===t}));return e?e.name:t}},created:function(){var t=this;axios.get("/users").then((function(e){t.isBusy=!1,t.items=e.data.data})).catch((function(e){t.isBusy=!1,console.error("Users loading:",e)})),axios.get("/users/roles").then((function(e){t.isBusy=!1,t.roles=e.data.data})).catch((function(e){t.isBusy=!1,console.error("Roles loading:",e)})),this.$root.$on("userCreated",(function(e){t.items.push(e)})),this.$root.$on("userUpdated",(function(e){var n=t.items.findIndex((function(t){return t.id===e.id}));-1!==n?Vue.set(t.items,n,e):console.warn("Index not found, could not update a user:",e)}))}};var b=n(3379),h=n.n(b),v=n(4186),w={insert:"head",singleton:!1};h()(v.Z,w);v.Z.locals;const y=(0,i.Z)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("user-create",{attrs:{"language-options":t.languageOptions,"role-options":t.roleOptions}}),t._v(" "),t.user?n("user-edit",{attrs:{user:t.user,"language-options":t.languageOptions,"role-options":t.roleOptions}}):t._e(),t._v(" "),n("h3",[t._v("Users")]),t._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"user-create",expression:"'user-create'"},{name:"b-tooltip",rawName:"v-b-tooltip.right",value:"Add new user",expression:"'Add new user'",modifiers:{right:!0}}],staticClass:"my-4",attrs:{variant:"primary"}},[n("font-awesome-icon",{attrs:{icon:["fas","user-plus"],size:"lg"}})],1),t._v(" "),n("b-table",{attrs:{striped:"",hover:"",fields:t.fields,items:t.items,"primary-key":"id","thead-class":"text-center",stacked:"lg","per-page":t.perPage,"current-page":t.currentPage,"sort-by":t.sortBy,"sort-desc":t.sortDesc,busy:t.isBusy},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"cell(id)",fn:function(e){return[t._v("\n            "+t._s(e.value)+"\n        ")]}},{key:"cell(name)",fn:function(e){return[t._v("\n            "+t._s(e.value)+"\n        ")]}},{key:"cell(email)",fn:function(e){return[n("a",{attrs:{href:t.formatMailto(e.value)}},[t._v("\n                "+t._s(e.value)+"\n            ")])]}},{key:"cell(email_verified_at)",fn:function(e){return[e.value?n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{pill:"",variant:"outline-success",title:t.formatDate(e.value)}},[n("font-awesome-icon",{attrs:{icon:["fas","user-check"],size:"lg"}})],1):t._e(),t._v(" "),e.value?t._e():n("b-button",{attrs:{pill:"",variant:"outline-secondary",disabled:""}},[n("font-awesome-icon",{attrs:{icon:["fas","user-check"],size:"lg"}})],1)]}},{key:"cell(created_at)",fn:function(e){return[t._v("\n            "+t._s(t.formatDate(e.value))+"\n        ")]}},{key:"cell(language)",fn:function(e){return[t._v("\n            "+t._s(t.formatLanguage(e.value))+"\n        ")]}},{key:"cell(roles)",fn:function(e){return t._l(e.value,(function(e){return n("b-badge",{key:e.id,attrs:{pill:""}},[t._v(t._s(t.capitalize(e.name)))])}))}},{key:"cell(actions)",fn:function(e){return[n("b-button-group",[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{variant:"success",title:"Edit user"},on:{click:function(n){return t.onEditUser(e.item)}}},[n("font-awesome-icon",{attrs:{icon:["fas","user-edit"],size:"lg"}})],1),t._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{variant:"danger",title:"Delete user",disabled:e.item.id===t.currentUser.id},on:{click:function(n){return t.onDeleteUser(e.item)}}},[n("font-awesome-icon",{attrs:{icon:["fas","user-minus"],size:"lg"}})],1)],1)]}}])}),t._v(" "),t.totalRows>t.perPage?n("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"center"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)}),[],!1,null,"7aa41ab6",null).exports}},0,[[9491,929,898],[5067,929,898]]]);
//# sourceMappingURL=app.js.map